(function(){function e(e){function n(n,t,r,i,o,s){for(;o>=0&&s>o;o+=e){var a=i?i[o]:o;r=t(r,n[a],a,n)}return r}return function(t,r,i,o){r=R(r,o,4);var s=!C(t)&&y.keys(t),a=(s||t).length,u=e>0?0:a-1;return arguments.length<3&&(i=t[s?s[u]:u],u+=e),n(t,r,i,s,u,a)}}function n(e){return function(n,t,r){t=b(t,r);for(var i=V(n),o=e>0?0:i-1;o>=0&&i>o;o+=e)if(t(n[o],o,n))return o;return-1}}function t(e,n,t){return function(r,i,o){var s=0,a=V(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(t&&o&&a)return o=t(r,i),r[o]===i?o:-1;if(i!==i)return o=n(c.call(r,s,a),y.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&a>o;o+=e)if(r[o]===i)return o;return-1}}function r(e,n){var t=L.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||a,o="constructor";for(y.has(e,o)&&!y.contains(n,o)&&n.push(o);t--;)o=L[t],o in e&&e[o]!==i[o]&&!y.contains(n,o)&&n.push(o)}var i=this,o=i._,s=Array.prototype,a=Object.prototype,u=Function.prototype,l=s.push,c=s.slice,f=a.toString,d=a.hasOwnProperty,g=Array.isArray,m=Object.keys,p=u.bind,v=Object.create,h=function(){},y=function(e){return e instanceof y?e:this instanceof y?(this._wrapped=e,void 0):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):i._=y,y.VERSION="1.8.3";var R=function(e,n,t){if(void 0===n)return e;switch(null==t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,o){return e.call(n,t,r,i,o)}}return function(){return e.apply(n,arguments)}},b=function(e,n,t){return null==e?y.identity:y.isFunction(e)?R(e,n,t):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,n){return b(e,n,1/0)};var E=function(e,n){return function(t){var r=arguments.length;if(2>r||null==t)return t;for(var i=1;r>i;i++)for(var o=arguments[i],s=e(o),a=s.length,u=0;a>u;u++){var l=s[u];n&&void 0!==t[l]||(t[l]=o[l])}return t}},I=function(e){if(!y.isObject(e))return{};if(v)return v(e);h.prototype=e;var n=new h;return h.prototype=null,n},w=function(e){return function(n){return null==n?void 0:n[e]}},_=Math.pow(2,53)-1,V=w("length"),C=function(e){var n=V(e);return"number"==typeof n&&n>=0&&_>=n};y.each=y.forEach=function(e,n,t){n=R(n,t);var r,i;if(C(e))for(r=0,i=e.length;i>r;r++)n(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;i>r;r++)n(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,n,t){n=b(n,t);for(var r=!C(e)&&y.keys(e),i=(r||e).length,o=Array(i),s=0;i>s;s++){var a=r?r[s]:s;o[s]=n(e[a],a,e)}return o},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,n,t){var r;return r=C(e)?y.findIndex(e,n,t):y.findKey(e,n,t),void 0!==r&&-1!==r?e[r]:void 0},y.filter=y.select=function(e,n,t){var r=[];return n=b(n,t),y.each(e,function(e,t,i){n(e,t,i)&&r.push(e)}),r},y.reject=function(e,n,t){return y.filter(e,y.negate(b(n)),t)},y.every=y.all=function(e,n,t){n=b(n,t);for(var r=!C(e)&&y.keys(e),i=(r||e).length,o=0;i>o;o++){var s=r?r[o]:o;if(!n(e[s],s,e))return!1}return!0},y.some=y.any=function(e,n,t){n=b(n,t);for(var r=!C(e)&&y.keys(e),i=(r||e).length,o=0;i>o;o++){var s=r?r[o]:o;if(n(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,n,t,r){return C(e)||(e=y.values(e)),("number"!=typeof t||r)&&(t=0),y.indexOf(e,n,t)>=0},y.invoke=function(e,n){var t=c.call(arguments,2),r=y.isFunction(n);return y.map(e,function(e){var i=r?n:e[n];return null==i?i:i.apply(e,t)})},y.pluck=function(e,n){return y.map(e,y.property(n))},y.where=function(e,n){return y.filter(e,y.matcher(n))},y.findWhere=function(e,n){return y.find(e,y.matcher(n))},y.max=function(e,n,t){var r,i,o=-1/0,s=-1/0;if(null==n&&null!=e){e=C(e)?e:y.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],r>o&&(o=r)}else n=b(n,t),y.each(e,function(e,t,r){i=n(e,t,r),(i>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},y.min=function(e,n,t){var r,i,o=1/0,s=1/0;if(null==n&&null!=e){e=C(e)?e:y.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],o>r&&(o=r)}else n=b(n,t),y.each(e,function(e,t,r){i=n(e,t,r),(s>i||1/0===i&&1/0===o)&&(o=e,s=i)});return o},y.shuffle=function(e){for(var n,t=C(e)?e:y.values(e),r=t.length,i=Array(r),o=0;r>o;o++)n=y.random(0,o),n!==o&&(i[o]=i[n]),i[n]=t[o];return i},y.sample=function(e,n,t){return null==n||t?(C(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,n))},y.sortBy=function(e,n,t){return n=b(n,t),y.pluck(y.map(e,function(e,t,r){return{value:e,index:t,criteria:n(e,t,r)}}).sort(function(e,n){var t=e.criteria,r=n.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(r>t||void 0===r)return-1}return e.index-n.index}),"value")};var S=function(e){return function(n,t,r){var i={};return t=b(t,r),y.each(n,function(r,o){var s=t(r,o,n);e(i,r,s)}),i}};y.groupBy=S(function(e,n,t){y.has(e,t)?e[t].push(n):e[t]=[n]}),y.indexBy=S(function(e,n,t){e[t]=n}),y.countBy=S(function(e,n,t){y.has(e,t)?e[t]++:e[t]=1}),y.toArray=function(e){return e?y.isArray(e)?c.call(e):C(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:C(e)?e.length:y.keys(e).length},y.partition=function(e,n,t){n=b(n,t);var r=[],i=[];return y.each(e,function(e,t,o){(n(e,t,o)?r:i).push(e)}),[r,i]},y.first=y.head=y.take=function(e,n,t){return null==e?void 0:null==n||t?e[0]:y.initial(e,e.length-n)},y.initial=function(e,n,t){return c.call(e,0,Math.max(0,e.length-(null==n||t?1:n)))},y.last=function(e,n,t){return null==e?void 0:null==n||t?e[e.length-1]:y.rest(e,Math.max(0,e.length-n))},y.rest=y.tail=y.drop=function(e,n,t){return c.call(e,null==n||t?1:n)},y.compact=function(e){return y.filter(e,y.identity)};var T=function(e,n,t,r){for(var i=[],o=0,s=r||0,a=V(e);a>s;s++){var u=e[s];if(C(u)&&(y.isArray(u)||y.isArguments(u))){n||(u=T(u,n,t));var l=0,c=u.length;for(i.length+=c;c>l;)i[o++]=u[l++]}else t||(i[o++]=u)}return i};y.flatten=function(e,n){return T(e,n,!1)},y.without=function(e){return y.difference(e,c.call(arguments,1))},y.uniq=y.unique=function(e,n,t,r){y.isBoolean(n)||(r=t,t=n,n=!1),null!=t&&(t=b(t,r));for(var i=[],o=[],s=0,a=V(e);a>s;s++){var u=e[s],l=t?t(u,s,e):u;n?(s&&o===l||i.push(u),o=l):t?y.contains(o,l)||(o.push(l),i.push(u)):y.contains(i,u)||i.push(u)}return i},y.union=function(){return y.uniq(T(arguments,!0,!0))},y.intersection=function(e){for(var n=[],t=arguments.length,r=0,i=V(e);i>r;r++){var o=e[r];if(!y.contains(n,o)){for(var s=1;t>s&&y.contains(arguments[s],o);s++);s===t&&n.push(o)}}return n},y.difference=function(e){var n=T(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(n,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var n=e&&y.max(e,V).length||0,t=Array(n),r=0;n>r;r++)t[r]=y.pluck(e,r);return t},y.object=function(e,n){for(var t={},r=0,i=V(e);i>r;r++)n?t[e[r]]=n[r]:t[e[r][0]]=e[r][1];return t},y.findIndex=n(1),y.findLastIndex=n(-1),y.sortedIndex=function(e,n,t,r){t=b(t,r,1);for(var i=t(n),o=0,s=V(e);s>o;){var a=Math.floor((o+s)/2);t(e[a])<i?o=a+1:s=a}return o},y.indexOf=t(1,y.findIndex,y.sortedIndex),y.lastIndexOf=t(-1,y.findLastIndex),y.range=function(e,n,t){null==n&&(n=e||0,e=0),t=t||1;for(var r=Math.max(Math.ceil((n-e)/t),0),i=Array(r),o=0;r>o;o++,e+=t)i[o]=e;return i};var O=function(e,n,t,r,i){if(!(r instanceof n))return e.apply(t,i);var o=I(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=function(e,n){if(p&&e.bind===p)return p.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var t=c.call(arguments,2),r=function(){return O(e,r,n,this,t.concat(c.call(arguments)))};return r},y.partial=function(e){var n=c.call(arguments,1),t=function(){for(var r=0,i=n.length,o=Array(i),s=0;i>s;s++)o[s]=n[s]===y?arguments[r++]:n[s];for(;r<arguments.length;)o.push(arguments[r++]);return O(e,t,this,this,o)};return t},y.bindAll=function(e){var n,t,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(n=1;r>n;n++)t=arguments[n],e[t]=y.bind(e[t],e);return e},y.memoize=function(e,n){var t=function(r){var i=t.cache,o=""+(n?n.apply(this,arguments):r);return y.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return t.cache={},t},y.delay=function(e,n){var t=c.call(arguments,2);return setTimeout(function(){return e.apply(null,t)},n)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,n,t){var r,i,o,s=null,a=0;t||(t={});var u=function(){a=t.leading===!1?0:y.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var l=y.now();a||t.leading!==!1||(a=l);var c=n-(l-a);return r=this,i=arguments,0>=c||c>n?(s&&(clearTimeout(s),s=null),a=l,o=e.apply(r,i),s||(r=i=null)):s||t.trailing===!1||(s=setTimeout(u,c)),o}},y.debounce=function(e,n,t){var r,i,o,s,a,u=function(){var l=y.now()-s;n>l&&l>=0?r=setTimeout(u,n-l):(r=null,t||(a=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=y.now();var l=t&&!r;return r||(r=setTimeout(u,n)),l&&(a=e.apply(o,i),o=i=null),a}},y.wrap=function(e,n){return y.partial(n,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,n=e.length-1;return function(){for(var t=n,r=e[n].apply(this,arguments);t--;)r=e[t].call(this,r);return r}},y.after=function(e,n){return function(){return--e<1?n.apply(this,arguments):void 0}},y.before=function(e,n){var t;return function(){return--e>0&&(t=n.apply(this,arguments)),1>=e&&(n=null),t}},y.once=y.partial(y.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var n=[];for(var t in e)y.has(e,t)&&n.push(t);return A&&r(e,n),n},y.allKeys=function(e){if(!y.isObject(e))return[];var n=[];for(var t in e)n.push(t);return A&&r(e,n),n},y.values=function(e){for(var n=y.keys(e),t=n.length,r=Array(t),i=0;t>i;i++)r[i]=e[n[i]];return r},y.mapObject=function(e,n,t){n=b(n,t);for(var r,i=y.keys(e),o=i.length,s={},a=0;o>a;a++)r=i[a],s[r]=n(e[r],r,e);return s},y.pairs=function(e){for(var n=y.keys(e),t=n.length,r=Array(t),i=0;t>i;i++)r[i]=[n[i],e[n[i]]];return r},y.invert=function(e){for(var n={},t=y.keys(e),r=0,i=t.length;i>r;r++)n[e[t[r]]]=t[r];return n},y.functions=y.methods=function(e){var n=[];for(var t in e)y.isFunction(e[t])&&n.push(t);return n.sort()},y.extend=E(y.allKeys),y.extendOwn=y.assign=E(y.keys),y.findKey=function(e,n,t){n=b(n,t);for(var r,i=y.keys(e),o=0,s=i.length;s>o;o++)if(r=i[o],n(e[r],r,e))return r},y.pick=function(e,n,t){var r,i,o={},s=e;if(null==s)return o;y.isFunction(n)?(i=y.allKeys(s),r=R(n,t)):(i=T(arguments,!1,!1,1),r=function(e,n,t){return n in t},s=Object(s));for(var a=0,u=i.length;u>a;a++){var l=i[a],c=s[l];r(c,l,s)&&(o[l]=c)}return o},y.omit=function(e,n,t){if(y.isFunction(n))n=y.negate(n);else{var r=y.map(T(arguments,!1,!1,1),String);n=function(e,n){return!y.contains(r,n)}}return y.pick(e,n,t)},y.defaults=E(y.allKeys,!0),y.create=function(e,n){var t=I(e);return n&&y.extendOwn(t,n),t},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,n){return n(e),e},y.isMatch=function(e,n){var t=y.keys(n),r=t.length;if(null==e)return!r;for(var i=Object(e),o=0;r>o;o++){var s=t[o];if(n[s]!==i[s]||!(s in i))return!1}return!0};var x=function(e,n,t,r){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof y&&(e=e._wrapped),n instanceof y&&(n=n._wrapped);var i=f.call(e);if(i!==f.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof n)return!1;var s=e.constructor,a=n.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in n)return!1}t=t||[],r=r||[];for(var u=t.length;u--;)if(t[u]===e)return r[u]===n;if(t.push(e),r.push(n),o){if(u=e.length,u!==n.length)return!1;for(;u--;)if(!x(e[u],n[u],t,r))return!1}else{var l,c=y.keys(e);if(u=c.length,y.keys(n).length!==u)return!1;for(;u--;)if(l=c[u],!y.has(n,l)||!x(e[l],n[l],t,r))return!1}return t.pop(),r.pop(),!0};y.isEqual=function(e,n){return x(e,n)},y.isEmpty=function(e){return null==e?!0:C(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=g||function(e){return"[object Array]"===f.call(e)},y.isObject=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(n){return f.call(n)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===f.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,n){return null!=e&&d.call(e,n)},y.noConflict=function(){return i._=o,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=w,y.propertyOf=function(e){return null==e?function(){}:function(n){return e[n]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(n){return y.isMatch(n,e)}},y.times=function(e,n,t){var r=Array(Math.max(0,e));n=R(n,t,1);for(var i=0;e>i;i++)r[i]=n(i);return r},y.random=function(e,n){return null==n&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=y.invert(k),N=function(e){var n=function(n){return e[n]},t="(?:"+y.keys(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,n):e}};y.escape=N(k),y.unescape=N(F),y.result=function(e,n,t){var r=null==e?void 0:e[n];return void 0===r&&(r=t),y.isFunction(r)?r.call(e):r};var M=0;y.uniqueId=function(e){var n=++M+"";return e?e+n:n},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,D=function(e){return"\\"+P[e]};y.template=function(e,n,t){!n&&t&&(n=t),n=y.defaults({},n,y.templateSettings);var r=RegExp([(n.escape||j).source,(n.interpolate||j).source,(n.evaluate||j).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(n,t,r,s,a){return o+=e.slice(i,a).replace(q,D),i=a+n.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),n}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(e){return s.call(this,e,y)},l=n.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u},y.chain=function(e){var n=y(e);return n._chain=!0,n};var U=function(e,n){return e._chain?y(n).chain():n};y.mixin=function(e){y.each(y.functions(e),function(n){var t=y[n]=e[n];y.prototype[n]=function(){var e=[this._wrapped];return l.apply(e,arguments),U(this,t.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=s[e];y.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],U(this,t)}}),y.each(["concat","join","slice"],function(e){var n=s[e];y.prototype[e]=function(){return U(this,n.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this);var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,n){var r=null;e.event?(r=e,r.file_url&&(r.file_format=t(r.file_url)),r.company_id=l,r.display_id=u,c&&(r.version=c),n(r)):n(r)}function n(){var e=new Date,n=e.getUTCFullYear(),t=e.getUTCMonth()+1,r=e.getUTCDate();return 10>t&&(t="0"+t),10>r&&(r="0"+r),""+n+t+r}function t(e){var n,t=/[?#&]/;return e&&"string"==typeof e?(n=e.substr(e.lastIndexOf(".")+1),t.test(n)&&(n=n.substr(0,-1!==n.indexOf("?")?n.indexOf("?"):n.length),n=n.substr(0,-1!==n.indexOf("#")?n.indexOf("#"):n.length),n=n.substr(0,-1!==n.indexOf("&")?n.indexOf("&"):n.length)),n.toLowerCase()):null}function r(e){var t={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:n(),rows:[{insertId:""}]},r=JSON.parse(JSON.stringify(t));return r.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),r.rows[0].json=JSON.parse(JSON.stringify(e)),r.rows[0].json.ts=(new Date).toISOString(),r}function i(n,t){e(t,function(e){null!==e&&RiseVision.Common.Logger.log(n,e)})}function o(e,t){try{top.postToPlayer({message:"widget-log",table:e,params:JSON.stringify(t),suffix:n()})}catch(r){console.log("widget-common.logEventToPlayer",r)}}function s(e,n){l=e,u=n}function a(e){c=e}var u="",l="",c=null;return{getInsertData:r,getFileFormat:t,logEvent:i,logEventToPlayer:o,setIds:s,setVersion:a}}(),RiseVision.Common.Logger=function(e){"use strict";function n(e){var n=new XMLHttpRequest;return new Date-l<358e4?e({}):(n.open("POST",i,!0),n.onloadend=function(){var t={};try{t=JSON.parse(n.response)}catch(r){console.warn("Can't refresh logger token - ",r.message)}e({token:t.access_token,refreshedAt:new Date})},n.send(),void 0)}function t(e){return s&&u===e}function r(r,i){function f(n){var t,s,a=new XMLHttpRequest;s=o.replace("TABLE_ID",r),l=n.refreshedAt||l,c=n.token||c,t=e.getInsertData(i),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+c),i.cb&&"function"==typeof i.cb&&(a.onloadend=function(){i.cb(a.response)}),a.send(JSON.stringify(t))}if(!(!r||!i||i.hasOwnProperty("event")&&!i.event||i.hasOwnProperty("event")&&t(i.event))&&i.display_id&&"preview"!==i.display_id&&"display_id"!==i.display_id&&"displayId"!==i.display_id){try{if(top.postToPlayer&&top.enableWidgetLogging)return e.logEventToPlayer(r,i)}catch(d){console.log("widget-common: logger",d)}return s=!0,u=i.event,setTimeout(function(){s=!1},a),n(f)}}var i="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",o="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,u="",l=0,c="";return{log:r}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,n){var t="font-family: "+decodeURIComponent(n.font.family).replace(/'/g,"")+"; ",r="color: "+(n.color?n.color:n.forecolor)+"; ",i="font-size: "+(-1===n.size.indexOf("px")?n.size+"px; ":n.size+"; "),o="font-weight: "+(n.bold?"bold":"normal")+"; ",s="font-style: "+(n.italic?"italic":"normal")+"; ",a="text-decoration: "+(n.underline?"underline":"none")+"; ",u="background-color: "+(n.highlightColor?n.highlightColor:n.backcolor)+";";return"."+e+" {"+t+r+i+o+s+a+u+"}"}function n(e){for(var n=document.createElement("style"),t=0,r=e.length;r>t;t++)n.appendChild(document.createTextNode(e[t]));document.head.appendChild(n)}function t(t,o){function s(){o&&"function"==typeof o&&o()}function a(){s()}var u=null,l=[],c=[],f=[];if(!t||0===t.length)return s(),void 0;t.forEach(function(t){t.class&&t.fontStyle&&n([e(t.class,t.fontStyle)])});for(var d=0;d<t.length;d++)t[d].fontStyle&&t[d].fontStyle.font.type&&"google"===t[d].fontStyle.font.type&&(u=t[d].fontStyle.font.family.split(",")[0],u=u.replace(/'/g,""),l.push(u));for(d=0;d<t.length;d++)t[d].fontStyle&&t[d].fontStyle.font.type&&"custom"===t[d].fontStyle.font.type&&(c.push(decodeURIComponent(t[d].fontStyle.font.family).replace(/'/g,"")),f.push(t[d].fontStyle.font.url.replace(/'/g,"\\'")));if(0===l.length&&0===c.length)s();else{for(var g=0;g<c.length;g+=1)r(c[g],f[g]);l.length>0?i(l,a):s()}}function r(e,n,t){var r=null,i="font-family: "+e+"; src: url('"+n+"');";t=t||document,r=t.styleSheets[0],null!==r&&r.addRule("@font-face",i)}function i(e,n){WebFont.load({google:{families:e},active:function(){n&&"function"==typeof n&&n()},inactive:function(){n&&"function"==typeof n&&n()},timeout:5e3})}function o(e){var n=document.createElement("script");n.src=e,document.body.appendChild(n)}function s(e){for(var n=e.length,t=[],r=0;n>r;r++)t[r]=new Image,t[r].src=e[r]}function a(e){return u(e,window.location.search.substring(1))}function u(e,n){for(var t,r=n.split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0]==e)return decodeURIComponent(t[1]);return""}function l(e){var n=/(\d{4})\.(\d{2})\.(\d{2})\.(\d{2})\.(\d{2})/,t=n.exec(e);return t?new Date(+t[1],+t[2]-1,+t[3],+t[4],+t[5]):void 0}function c(e){var n="";switch(e){case 404:n="The file does not exist or cannot be accessed.";break;case 507:n="There is not enough disk space to save the file on Rise Cache.";break;default:n="There was a problem retrieving the file from Rise Cache."}return n}function f(e){var n=document.createElement("div");return n.innerHTML=e,n.textContent}function d(e,n){var t=new XMLHttpRequest;if(e&&n&&"function"==typeof n){t.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{t.send(),n(t.status>=200&&t.status<304)}catch(r){n(!1)}}}function g(){var e=25,n=navigator.userAgent.match(/Chrome\/(\S+)/),t=n?n[1]:0;return t&&(t=parseInt(t.substring(0,t.indexOf("."))),e>=t)?!0:!1}function m(e,n){return/^(?:f|ht)tps?\:\/\//.test(e)||(e=(n?"https://":"http://")+e),e}return{addProtocol:m,getQueryParameter:a,getQueryStringParameter:u,getFontCssStyle:e,addCSSRules:n,loadFonts:t,loadCustomFont:r,loadGoogleFonts:i,loadScript:o,preloadImages:s,getRiseCacheErrorMessage:c,unescapeHTML:f,hasInternetConnection:d,isLegacy:g,getDateObjectFromPlayerVersionString:l}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var n=new XMLHttpRequest,t=this;e&&"function"==typeof e&&(f?n.open("GET",u,!0):n.open("GET",u+"ping?callback=_",!0),n.onreadystatechange=function(){try{if(4===n.readyState)if(l=!0,200===n.status){c=!0;try{var r=n.responseText?JSON.parse(n.responseText):"";r&&(p=r.version)}catch(i){console.log(i)}e(!0,n.responseText)}else{if(404===n.status)return f=!0,u="https://localhost:9495/",t.ping(e);if(d)return f=!0,d=!1,u="http://localhost:9494/",t.ping(e);console.debug("Rise Cache is not running"),f=!1,c=!1,e(!1,null)}}catch(i){console.debug("Caught exception: ",i.description)}},n.send())}function n(e,n,t){function r(){var n,r,s;c?n=f?i(p,m)>0?u+"files?url="+e:u+"files?url="+encodeURIComponent(e):t?u+"?url="+encodeURIComponent(e):u+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):t?n=e:(r=e.split("?"),s=1===r.length?"?":"&",n=e+s+"cb="+(new Date).getTime()),o("HEAD",n)}function i(e,n){function t(e){return/^\d+$/.test(e)}function r(e){for(s=0;s<e.length;s++)if(!t(e[s]))return!1;return!0}var i=e.split("."),o=n.split("."),s=0;if(!r(i)||!r(o))return 0/0;for(s=0;s<i.length;++s){if(o.length===s)return 1;if(i[s]!==o[s])return i[s]>o[s]?1:-1}return i.length!==o.length?-1:0}function o(e,t){var r=new XMLHttpRequest,i={xhr:r,url:t};c?(r.open(e,t,!0),r.addEventListener("loadend",function(){var a=r.status||0;202===a?(s++,3>s?setTimeout(function(){o(e,t)},3e3):n(i,new Error("File is downloading"))):a>=200&&300>a?n(i):"HEAD"===e?o("GET",t):n(i,new Error("The request failed with status code: "+a))}),r.send()):n(i)}if(e&&n&&"function"==typeof n){var s=0;return l?r():this.ping(r)}}function t(e){var n="";switch(e){case 502:n="There was a problem retrieving the file.";break;case 504:n="Unable to download the file. The server is not responding.";break;case 507:n="There is not enough disk space to save the file on Rise Cache.";break;case 534:n="The file does not exist or cannot be accessed.";break;default:n=""}return n}function r(e){return e&&"function"==typeof e?l?(e(c),void 0):this.ping(function(){e(c)}):void 0}function i(e){return e&&"function"==typeof e?l?(e(f),void 0):this.ping(function(){e(f)}):void 0}function o(e){return e&&"function"==typeof e?this.isV2Running(function(n){n?e(n):e(s())}):void 0}function s(){var e=g.getDateObjectFromPlayerVersionString("2016.10.10.00.00"),n=g.getQueryParameter("sysInfo");if(!n){var t=g.getQueryParameter("parent");n=g.getQueryStringParameter("sysInfo",t)}if(n){var r=g.getQueryStringParameter("pv",n),i=g.getDateObjectFromPlayerVersionString(r);return i>=e}return!1}function a(){l=!1,c=!1,f=!1,d=!0,u="http://localhost:9494/"}var u="http://localhost:9494/",l=!1,c=!1,f=!1,d=!0,g=RiseVision.Common.Utilities,m="1.7.3",p="";return{getErrorMessage:t,getFile:n,isRiseCacheRunning:r,isV2Running:i,isRCV2Player:o,ping:e,reset:a}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.WSClient=function(){function e(e){i(e)}function n(){try{if(top.RiseVision.Viewer.LocalMessaging)return top.RiseVision.Viewer.LocalMessaging.canConnect()}catch(e){console.log("widget-common: ws-client",e)}}function t(){i({topic:"client-list-request"})}function r(e){if(e&&"function"==typeof e)try{top.RiseVision.Viewer.LocalMessaging&&top.RiseVision.Viewer.LocalMessaging.receiveMessages(e)}catch(n){console.log("widget-common: ws-client",n)}}function i(e){try{top.RiseVision.Viewer.LocalMessaging&&top.RiseVision.Viewer.LocalMessaging.write(e)}catch(n){console.log("widget-common: ws-client",n)}}return{broadcastMessage:e,canConnect:n,getModuleClientList:t,receiveMessages:r}}();var version="0.1.1",config={STORAGE_ENV:"prod",COMPONENTS_PATH:"components/"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var RiseVision=RiseVision||{};RiseVision.Image={},RiseVision.Image=function(e){"use strict";function n(){e.rpc.call("","rsevent_ready",null,C.getString("id"),!0,!0,!0,!0,!0)}function t(){e.rpc.call("","rsevent_done",null,C.getString("id")),null!==F&&f(F,!0),f({event:"done",file_url:o()},!1)}function r(){clearTimeout(M),M=null}function i(){r(),M=setTimeout(function(){t()},5e3)}function o(){var e=-1;if(k&&k.length>0){if("file"===w)return k[0];if("folder"===w&&x&&x.isReady()&&(e=x.getCurrentSlide(),-1!==e))return k[e]?k[e].url:null}return null}function s(){V&&"preview"!==V&&"display_id"!==V&&-1===V.indexOf("displayId")&&(L=new RiseVision.Image.LocalStorageFile,L.init())}function a(){var e,t=document.getElementById("container"),r=document.createDocumentFragment(),i=document.createElement("div");S=new RiseVision.Image.Message(document.getElementById("container"),document.getElementById("messageContainer")),S.show("Please wait while your image is downloaded."),T.background&&Object.keys(T.background).length>0&&(document.body.style.background=T.background.color),"file"===w?(i=u(),r.appendChild(i),t.appendChild(r),H=new Image,e=0!==Object.keys(T.storage).length,e?(N="storage file",O=new RiseVision.Image.StorageFile(T,V),O.init()):(N="custom",A=new RiseVision.Image.NonStorage(T),A.init())):"folder"===w&&(i.className="tp-banner-container",r.appendChild(i),t.appendChild(r),N="storage folder",O=new RiseVision.Image.StorageFolder(T,V),O.init()),s(),n()}function u(){var e=document.createElement("div");return e.setAttribute("id","image"),e.className=T.position,e.className=T.scaleToFit?e.className+" scale-to-fit":e.className,e}function l(e){H.onload=function(){var n=document.querySelector("#container #image");n.style.backgroundImage="none",n.style.backgroundImage="url('"+e+"')",G=-1===e.indexOf(".gif")?!1:!0,!U&&G&&(n.style.visibility="visible")},H.onerror=function(){f({event:"error",event_details:"image load error",file_url:e},!0)},H.src=e.replace("\\'","'")}function c(){return P}function f(e,n){n&&(F=e),RiseVision.Common.LoggerUtils.logEvent(b(),e)}function d(e){"file"===w?(k[0]=e,D=!1,S.hide(),l(k[0])):"folder"===w&&(k=e,x=new RiseVision.Image.Slider(T),x.init(e))}function g(e){"file"===w?(k[0]=e,D&&S.hide(),l(k[0])):"folder"===w&&(k=e,x.refresh(k)),j=!1,P=!1,D=!1,F=null}function m(e){D=!0,S.show(e),U||i()}function p(e,n,t){T=_.clone(e),w=n,V=t,T.width=C.getInt("rsW"),T.height=C.getInt("rsH"),document.getElementById("container").style.height=C.getInt("rsH")+"px",a()}function v(){S.hide(),U||x.play()}function h(){t()}function y(){var e=document.querySelector("#container #image");U=!0,r(),"folder"===w&&x&&x.isReady()?x.pause():"file"===w&&e&&G&&(e.style.visibility="hidden")}function R(){var e=document.querySelector("#container #image");return U=!1,q||(f({event:"configuration",event_details:N},!1),q=!0),f({event:"play",file_url:o()},!1),j?(i(),void 0):D?("file"===w&&O&&O.retry(),void 0):("folder"===w&&x&&x.isReady()?x.play():"file"===w&&e&&G&&(e.style.visibility="visible"),void 0)}function b(){return"image_events"}function E(e,n){j=!0,P="undefined"!=typeof n,S.show(e),"folder"===w&&x&&x.isReady()&&x.destroy(),U||i()}function I(){y()}var w,V,C=new e.Prefs,S=null,T=null,O=null,A=null,L=null,x=null,k=[],F=null,N=null,M=null,j=!1,P=!1,q=!1,D=!1,U=!0,H=null,G=!1;return{hasStorageError:c,logEvent:f,onFileInit:d,onFileRefresh:g,onFileUnavailable:m,onSliderComplete:h,onSliderReady:v,pause:y,play:R,setAdditionalParams:p,getTableName:b,showError:E,stop:I}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.Message=function(e,n){"use strict";function t(){try{n.style.height=e.style.height}catch(t){console.warn("Can't initialize Message - ",t.message)}}function r(){if(o){for(;n.firstChild;)n.removeChild(n.firstChild);n.style.display="none",e.style.visibility="visible",o=!1}}function i(t){var r,i=document.createDocumentFragment();o?(r=n.querySelector(".message"),r.innerHTML=t):(e.style.visibility="hidden",n.style.display="block",r=document.createElement("p"),r.innerHTML=t,r.setAttribute("class","message"),i.appendChild(r),n.appendChild(i),o=!0)}var o=!1;return t(),{hide:r,show:i}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.Slider=function(e){"use strict";function n(){var n=document.querySelector(".tp-banner ul"),t=document.createDocumentFragment(),r=[],i=null,o=null,s="";m=v.length,v.forEach(function(n){switch(i=document.createElement("li"),o=document.createElement("img"),i.setAttribute("data-transition","fade"),i.setAttribute("data-masterspeed",500),i.setAttribute("data-delay",1e3*e.duration),o.src="",o.setAttribute("data-lazyload",n.url),e.position){case"top-left":s="left top";break;case"top-center":s="center top";break;case"top-right":s="right top";break;case"middle-left":s="left center";break;case"middle-center":s="center center";break;case"middle-right":s="right center";break;case"bottom-left":s="left bottom";break;case"bottom-center":s="center bottom";break;case"bottom-right":s="right bottom";break;default:s="left top"}o.setAttribute("data-bgposition",s),e.scaleToFit?o.setAttribute("data-bgfit","contain"):o.setAttribute("data-bgfit","normal"),i.appendChild(o),r.push(i)}),r.forEach(function(e){t.appendChild(e)
}),n.appendChild(t)}function t(e){V?d():b&&(b=!1,d(),RiseVision.Image.onSliderComplete(),E&&(p&&(r(),l(h)),E=!1)),e.slideIndex===m&&(b=!0)}function r(){$("body").off("touchend"),p.off("revolution.slide.onloaded"),p.off("revolution.slide.onchange"),p.revkill(),p=null}function i(){V=!0,clearTimeout(R),R=setTimeout(function(){p.revnext(),p.revresume(),V=!1,w=!0},1e3*e.pause),o()}function o(){e.autoHide&&(clearTimeout(y),y=setTimeout(function(){$(".tp-leftarrow, .tp-rightarrow").addClass("hidearrows")},C))}function s(){var n=void 0===e.duration||e.duration<1?1e4:1e3*e.duration;S=setTimeout(function(){RiseVision.Image.onSliderComplete()},n)}function a(){p&&(b=!1,d(),r())}function u(){return p&&v&&v.length>0?p.revcurrentslide():-1}function l(r){var s=document.querySelector(".tp-banner-container"),a=document.createDocumentFragment(),u=document.createElement("div"),l=document.createElement("ul");u.setAttribute("class","tp-banner"),u.appendChild(l),a.appendChild(u),s.appendChild(a),v=_.clone(r),n(),I=!0,p=$(".tp-banner").revolution({hideThumbs:0,hideTimerBar:"on",navigationType:"none",onHoverStop:"off",startwidth:e.width,startheight:e.height}),p.on("revolution.slide.onloaded",function(){d(),I=!1,RiseVision.Image.onSliderReady()}),p.on("revolution.slide.onchange",function(e,n){t(n)}),$("body").on("touchend",".tp-banner",function(){i(),$(".tp-leftarrow, .tp-rightarrow").removeClass("hidearrows")}),$("body").on("touchend",".tp-leftarrow, .tp-rightarrow",function(){i()}),o()}function c(){return!I}function f(){p&&(e.hasOwnProperty("resume")&&!e.resume&&p.revshowslide(0),w||(p.revresume(),w=!0),1===v.length&&s())}function d(){p&&w&&(p.revpause(),w=!1),S&&clearTimeout(S)}function g(e){RiseVision.Common.Utilities.preloadImages(e),1===v.length?p&&(clearTimeout(S),r(),l(e)):(h=_.clone(e),E=!0)}var m=0,p=null,v=null,h=null,y=null,R=null,b=!1,E=!1,I=!0,w=!1,V=!1,C=3e3,S=null;return{getCurrentSlide:u,destroy:a,init:l,isReady:c,play:f,pause:d,refresh:g}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.StorageFile=function(e,n){"use strict";function t(){var t=document.querySelector("rise-storage");t.addEventListener("rise-storage-response",function(e){var n;e.detail&&e.detail.url&&(n=e.detail.url.replace("'","\\'"),s?(s=!1,RiseVision.Image.onFileInit(n)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Image.onFileRefresh(n):RiseVision.Image.hasStorageError()&&RiseVision.Image.onFileRefresh(e.detail.url)))}),t.addEventListener("rise-storage-api-error",function(e){var n={event:"error",event_details:"storage api error",error_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-no-file",function(e){var n={event:"error",event_details:"storage file not found",file_url:e.detail},t=document.getElementById("image");t.style.background="",RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("The selected image does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-file-throttled",function(e){var n={event:"error",event_details:"storage file throttled",file_url:e.detail};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("The selected image is temporarily unavailable.")}),t.addEventListener("rise-storage-subscription-error",function(e){var n={event:"error",event_details:"storage subscription error",error_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Image.logEvent(n,!0)}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"error",event_details:"storage subscription expired"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-error",function(e){var n=e.detail&&e.detail.request&&e.detail.request.url?e.detail.request.url:null,t={event:"error",event_details:"rise storage error",error_details:"The request failed with status code: "+e.detail.error.currentTarget.status,file_url:n};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var n,t=e.detail&&e.detail.request&&e.detail.request.url?e.detail.request.url:null,r={event:"error",event_details:"rise cache error",error_details:e.detail.error.message,file_url:t},s=0;RiseVision.Image.logEvent(r,!0),o.isV2Running()?n=o.getErrorMessage(s):(e.detail.error.message&&(s=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2)),n=i.getRiseCacheErrorMessage(s)),RiseVision.Image.showError(n)}),t.addEventListener("rise-cache-not-running",function(e){var n={event:"error",event_details:"rise cache not running",error_details:""};e.detail&&(e.detail.error?n.error_details=e.detail.error.message:e.detail.resp&&e.detail.resp.error&&(n.error_details=e.detail.resp.error.message)),RiseVision.Image.logEvent(n,!0),e.detail&&e.detail.isPlayerRunning&&RiseVision.Image.showError("Waiting for Rise Cache",!0)}),t.addEventListener("rise-cache-file-unavailable",function(){RiseVision.Image.onFileUnavailable("File is downloading")}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("displayId",n),t.setAttribute("env",config.STORAGE_ENV),t.go()}function r(){var e=document.querySelector("rise-storage");e&&e.go()}var i=RiseVision.Common.Utilities,o=RiseVision.Common.RiseCache,s=!0;return{init:t,retry:r}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.StorageFolder=function(e,n){"use strict";function t(e){var n;e.detail&&(e.detail.added&&u.push({name:e.detail.name,url:e.detail.url}),e.detail.changed&&(n=_.find(u,function(n){return n.name===e.detail.name}),n.url=e.detail.url),e.detail.deleted&&(u=_.reject(u,function(n){return n.name===e.detail.name}))),u=_.sortBy(u,function(e){return e.name.toLowerCase()})}function r(e){return t(e),e.detail.added&&a?(u.length>1?(a=!1,clearTimeout(l),RiseVision.Image.onFileInit(u)):l=setTimeout(function(){a=!1,RiseVision.Image.onFileInit(u)},5e3),void 0):((!e.detail.hasOwnProperty("changed")||e.detail.changed||RiseVision.Image.hasStorageError())&&RiseVision.Image.onFileRefresh(u),void 0)}function i(){var t=document.querySelector("rise-storage");t.addEventListener("rise-storage-response",r),t.addEventListener("rise-storage-api-error",function(e){var n={event:"error",event_details:"storage api error",error_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"error",event_details:"storage folder empty"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("The selected folder does not contain any images.")}),t.addEventListener("rise-storage-no-folder",function(e){var n={event:"error",event_details:"storage folder doesn't exist",error_details:e.detail};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("The selected folder does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-folder-invalid",function(){var e={event:"error",event_details:"storage folder format(s) invalid"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("The selected folder does not contain any supported image formats.")}),t.addEventListener("rise-storage-subscription-error",function(e){var n={event:"error",event_details:"storage subscription error",error_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Image.logEvent(n,!0)}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"error",event_details:"storage subscription expired"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-error",function(e){var n={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var n,t={event:"rise cache error",event_details:e.detail.error.message},r=0;RiseVision.Image.logEvent(t,!0),s.isV2Running()?n=s.getErrorMessage(r):(e.detail.error.message&&(r=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2)),n=o.getRiseCacheErrorMessage(r)),RiseVision.Image.showError(n)}),t.addEventListener("rise-cache-not-running",function(e){var n={event:"error",event_details:"rise cache not running",error_details:""};e.detail&&(e.detail.error?n.error_details=e.detail.error.message:e.detail.resp&&e.detail.resp.error&&(n.error_details=e.detail.resp.error.message)),RiseVision.Image.logEvent(n,!0),e.detail&&e.detail.isPlayerRunning&&RiseVision.Image.showError("Waiting for Rise Cache",!0)}),t.setAttribute("fileType","image"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("displayId",n),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go()}var o=RiseVision.Common.Utilities,s=RiseVision.Common.RiseCache,a=!0,u=[],l=null;return{init:i}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.NonStorage=function(e){"use strict";function n(e){var n;i.getFile(l,function(e,r){var s,a=0;r?r.message&&"File is downloading"===r.message?RiseVision.Image.onFileUnavailable(r.message):(n={event:"error",event_details:"non-storage error",error_details:r.message,file_url:e.url},RiseVision.Image.logEvent(n,!0),i.isV2Running()?s=i.getErrorMessage(a):(r.message&&(a=+r.message.substring(r.message.indexOf(":")+2)),s=o.getRiseCacheErrorMessage(a)),RiseVision.Image.showError(s)):u?(u=!1,RiseVision.Image.onFileInit(e.url),t()):RiseVision.Image.onFileRefresh(e.url)},e)}function t(){null===a&&(a=setInterval(function(){n(!0)},s))}function r(){l=e.url&&""!==e.url?e.url:e.selector.url,l=o.addProtocol(l),n(!0)}var i=RiseVision.Common.RiseCache,o=RiseVision.Common.Utilities,s=3e5,a=null,u=!0,l="";return{init:r}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.LocalStorageFile=function(){"use strict";function e(e){var n=e.clients;s||(n.includes("local-storage")?(RiseVision.Image.logEvent({event:"LS is present",file_url:o}),i.broadcastMessage({topic:"WATCH",filePath:o}),s=!0):RiseVision.Image.logEvent({event:"LS is not present",file_url:o}))}function n(e){var n=null;e.filePath&&e.filePath===o&&(RiseVision.Image.logEvent({event:"Test image FILE-UPDATE",event_details:JSON.stringify(e),file_url:e.filePath}),!a&&e.status&&"CURRENT"===e.status&&(n=new Image,n.onload=function(){RiseVision.Image.logEvent({event:"Test image loaded",file_url:e.ospath})},n.onerror=function(n){RiseVision.Image.logEvent({event:"Test image load failed",event_details:JSON.stringify(n),file_url:e.ospath})},RiseVision.Image.logEvent({event:"Attempt test image load",file_url:e.ospath}),n.src="file://"+e.ospath,a=!0))}function t(e){RiseVision.Image.logEvent({event:"Test image FILE-ERROR",event_details:JSON.stringify(e),file_url:e.filePath})}function r(){i.canConnect()&&(i.receiveMessages(function(r){if(!r||!r.topic)return RiseVision.Image.logEvent({event:"Invalid LMS message received",event_details:JSON.stringify(r),file_url:o}),void 0;switch(r.topic.toUpperCase()){case"CLIENT-LIST":return e(r);case"FILE-UPDATE":return n(r);case"FILE-ERROR":return t(r)}}),i.getModuleClientList())}var i=RiseVision.Common.WSClient,o="local-storage-test/test-1x1.png",s=!1,a=!1;return{init:r}},function(e,n,t){"use strict";function r(e,n){var t,r,i="",o="";Array.isArray(e)&&e.length>0&&Array.isArray(n)&&n.length>0&&("companyId"===e[0]&&(i=n[0]),"displayId"===e[1]&&(o=n[1]?n[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(i,o),RiseVision.Common.LoggerUtils.setVersion(version),"additionalParams"===e[2]&&(t=JSON.parse(n[2]),r=0!==Object.keys(t.storage).length?t.storage.fileName?"file":"folder":"file",RiseVision.Image.setAdditionalParams(t,r,o)))}function i(){RiseVision.Image.pause()}function o(){RiseVision.Image.play()}function s(){RiseVision.Image.stop()}function a(){u&&""!==u&&(t.rpc.register("rscmd_play_"+u,o),t.rpc.register("rscmd_pause_"+u,i),t.rpc.register("rscmd_stop_"+u,s),t.rpc.register("rsparam_set_"+u,r),t.rpc.call("","rsparam_get",null,u,["companyId","displayId","additionalParams"]))}var u=(new t.Prefs).getString("id");e.oncontextmenu=function(){return!1},n.body.onmousedown=function(){return!1},RiseVision.Common.RiseCache.isRCV2Player(function(t){function r(){e.removeEventListener("WebComponentsReady",r),d=!0,f&&d&&a()}function i(){c.removeEventListener("rise-storage-ready",i),f=!0,f&&d&&a()}var o=n.createDocumentFragment(),s=n.createElement("link"),u=n.createElement("script"),l=config.COMPONENTS_PATH+(t?"rise-storage-v2":"rise-storage")+"/rise-storage.html",c=n.createElement("rise-storage"),f=!1,d=!1;u.src=config.COMPONENTS_PATH+"webcomponentsjs/webcomponents-lite.min.js",e.addEventListener("WebComponentsReady",r),n.getElementsByTagName("head")[0].appendChild(u),s.setAttribute("rel","import"),s.setAttribute("href",l),n.getElementsByTagName("head")[0].appendChild(s),c.setAttribute("refresh",5),t&&c.setAttribute("usage","widget"),c.addEventListener("rise-storage-ready",i),o.appendChild(c),n.body.appendChild(o)})}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY3JlYXRlUmVkdWNlIiwiZGlyIiwiaXRlcmF0b3IiLCJvYmoiLCJpdGVyYXRlZSIsIm1lbW8iLCJrZXlzIiwiaW5kZXgiLCJsZW5ndGgiLCJjdXJyZW50S2V5IiwiY29udGV4dCIsIm9wdGltaXplQ2IiLCJpc0FycmF5TGlrZSIsIl8iLCJhcmd1bWVudHMiLCJjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciIsImFycmF5IiwicHJlZGljYXRlIiwiY2IiLCJnZXRMZW5ndGgiLCJjcmVhdGVJbmRleEZpbmRlciIsInByZWRpY2F0ZUZpbmQiLCJzb3J0ZWRJbmRleCIsIml0ZW0iLCJpZHgiLCJpIiwiTWF0aCIsIm1heCIsIm1pbiIsInNsaWNlIiwiY2FsbCIsImlzTmFOIiwiY29sbGVjdE5vbkVudW1Qcm9wcyIsIm5vbkVudW1JZHgiLCJub25FbnVtZXJhYmxlUHJvcHMiLCJjb25zdHJ1Y3RvciIsInByb3RvIiwiaXNGdW5jdGlvbiIsInByb3RvdHlwZSIsIk9ialByb3RvIiwicHJvcCIsImhhcyIsImNvbnRhaW5zIiwicHVzaCIsInJvb3QiLCJ0aGlzIiwicHJldmlvdXNVbmRlcnNjb3JlIiwiQXJyYXlQcm90byIsIkFycmF5IiwiT2JqZWN0IiwiRnVuY1Byb3RvIiwiRnVuY3Rpb24iLCJ0b1N0cmluZyIsImhhc093blByb3BlcnR5IiwibmF0aXZlSXNBcnJheSIsImlzQXJyYXkiLCJuYXRpdmVLZXlzIiwibmF0aXZlQmluZCIsImJpbmQiLCJuYXRpdmVDcmVhdGUiLCJjcmVhdGUiLCJDdG9yIiwiX3dyYXBwZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiVkVSU0lPTiIsImZ1bmMiLCJhcmdDb3VudCIsInZhbHVlIiwib3RoZXIiLCJjb2xsZWN0aW9uIiwiYWNjdW11bGF0b3IiLCJhcHBseSIsImlkZW50aXR5IiwiaXNPYmplY3QiLCJtYXRjaGVyIiwicHJvcGVydHkiLCJJbmZpbml0eSIsImNyZWF0ZUFzc2lnbmVyIiwia2V5c0Z1bmMiLCJ1bmRlZmluZWRPbmx5Iiwic291cmNlIiwibCIsImtleSIsImJhc2VDcmVhdGUiLCJyZXN1bHQiLCJNQVhfQVJSQVlfSU5ERVgiLCJwb3ciLCJlYWNoIiwiZm9yRWFjaCIsIm1hcCIsImNvbGxlY3QiLCJyZXN1bHRzIiwicmVkdWNlIiwiZm9sZGwiLCJpbmplY3QiLCJyZWR1Y2VSaWdodCIsImZvbGRyIiwiZmluZCIsImRldGVjdCIsImZpbmRJbmRleCIsImZpbmRLZXkiLCJmaWx0ZXIiLCJzZWxlY3QiLCJsaXN0IiwicmVqZWN0IiwibmVnYXRlIiwiZXZlcnkiLCJhbGwiLCJzb21lIiwiYW55IiwiaW5jbHVkZXMiLCJpbmNsdWRlIiwiZnJvbUluZGV4IiwiZ3VhcmQiLCJ2YWx1ZXMiLCJpbmRleE9mIiwiaW52b2tlIiwibWV0aG9kIiwiYXJncyIsImlzRnVuYyIsInBsdWNrIiwid2hlcmUiLCJhdHRycyIsImZpbmRXaGVyZSIsImNvbXB1dGVkIiwibGFzdENvbXB1dGVkIiwic2h1ZmZsZSIsInJhbmQiLCJzZXQiLCJzaHVmZmxlZCIsInJhbmRvbSIsInNhbXBsZSIsIm4iLCJzb3J0QnkiLCJjcml0ZXJpYSIsInNvcnQiLCJsZWZ0IiwicmlnaHQiLCJhIiwiYiIsImdyb3VwIiwiYmVoYXZpb3IiLCJncm91cEJ5IiwiaW5kZXhCeSIsImNvdW50QnkiLCJ0b0FycmF5Iiwic2l6ZSIsInBhcnRpdGlvbiIsInBhc3MiLCJmYWlsIiwiZmlyc3QiLCJoZWFkIiwidGFrZSIsImluaXRpYWwiLCJsYXN0IiwicmVzdCIsInRhaWwiLCJkcm9wIiwiY29tcGFjdCIsImZsYXR0ZW4iLCJpbnB1dCIsInNoYWxsb3ciLCJzdHJpY3QiLCJzdGFydEluZGV4Iiwib3V0cHV0IiwiaXNBcmd1bWVudHMiLCJqIiwibGVuIiwid2l0aG91dCIsImRpZmZlcmVuY2UiLCJ1bmlxIiwidW5pcXVlIiwiaXNTb3J0ZWQiLCJpc0Jvb2xlYW4iLCJzZWVuIiwidW5pb24iLCJpbnRlcnNlY3Rpb24iLCJhcmdzTGVuZ3RoIiwiemlwIiwidW56aXAiLCJvYmplY3QiLCJmaW5kTGFzdEluZGV4IiwibG93IiwiaGlnaCIsIm1pZCIsImZsb29yIiwibGFzdEluZGV4T2YiLCJyYW5nZSIsInN0YXJ0Iiwic3RvcCIsInN0ZXAiLCJjZWlsIiwiZXhlY3V0ZUJvdW5kIiwic291cmNlRnVuYyIsImJvdW5kRnVuYyIsImNhbGxpbmdDb250ZXh0Iiwic2VsZiIsIlR5cGVFcnJvciIsImJvdW5kIiwiY29uY2F0IiwicGFydGlhbCIsImJvdW5kQXJncyIsInBvc2l0aW9uIiwiYmluZEFsbCIsIkVycm9yIiwibWVtb2l6ZSIsImhhc2hlciIsImNhY2hlIiwiYWRkcmVzcyIsImRlbGF5Iiwid2FpdCIsInNldFRpbWVvdXQiLCJkZWZlciIsInRocm90dGxlIiwib3B0aW9ucyIsInRpbWVvdXQiLCJwcmV2aW91cyIsImxhdGVyIiwibGVhZGluZyIsIm5vdyIsInJlbWFpbmluZyIsImNsZWFyVGltZW91dCIsInRyYWlsaW5nIiwiZGVib3VuY2UiLCJpbW1lZGlhdGUiLCJ0aW1lc3RhbXAiLCJjYWxsTm93Iiwid3JhcCIsIndyYXBwZXIiLCJjb21wb3NlIiwiYWZ0ZXIiLCJ0aW1lcyIsImJlZm9yZSIsIm9uY2UiLCJoYXNFbnVtQnVnIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJhbGxLZXlzIiwibWFwT2JqZWN0IiwicGFpcnMiLCJpbnZlcnQiLCJmdW5jdGlvbnMiLCJtZXRob2RzIiwibmFtZXMiLCJleHRlbmQiLCJleHRlbmRPd24iLCJhc3NpZ24iLCJwaWNrIiwib2l0ZXJhdGVlIiwib21pdCIsIlN0cmluZyIsImRlZmF1bHRzIiwicHJvcHMiLCJjbG9uZSIsInRhcCIsImludGVyY2VwdG9yIiwiaXNNYXRjaCIsImVxIiwiYVN0YWNrIiwiYlN0YWNrIiwiY2xhc3NOYW1lIiwiYXJlQXJyYXlzIiwiYUN0b3IiLCJiQ3RvciIsInBvcCIsImlzRXF1YWwiLCJpc0VtcHR5IiwiaXNTdHJpbmciLCJpc0VsZW1lbnQiLCJub2RlVHlwZSIsInR5cGUiLCJuYW1lIiwiSW50OEFycmF5IiwiaXNGaW5pdGUiLCJwYXJzZUZsb2F0IiwiaXNOdW1iZXIiLCJpc051bGwiLCJpc1VuZGVmaW5lZCIsIm5vQ29uZmxpY3QiLCJjb25zdGFudCIsIm5vb3AiLCJwcm9wZXJ0eU9mIiwibWF0Y2hlcyIsImFjY3VtIiwiRGF0ZSIsImdldFRpbWUiLCJlc2NhcGVNYXAiLCImIiwiPCIsIj4iLCJcIiIsIiciLCJgIiwidW5lc2NhcGVNYXAiLCJjcmVhdGVFc2NhcGVyIiwiZXNjYXBlciIsIm1hdGNoIiwiam9pbiIsInRlc3RSZWdleHAiLCJSZWdFeHAiLCJyZXBsYWNlUmVnZXhwIiwic3RyaW5nIiwidGVzdCIsInJlcGxhY2UiLCJlc2NhcGUiLCJ1bmVzY2FwZSIsImZhbGxiYWNrIiwiaWRDb3VudGVyIiwidW5pcXVlSWQiLCJwcmVmaXgiLCJpZCIsInRlbXBsYXRlU2V0dGluZ3MiLCJldmFsdWF0ZSIsImludGVycG9sYXRlIiwibm9NYXRjaCIsImVzY2FwZXMiLCJcXCIsIlxyIiwiXG4iLCLigKgiLCLigKkiLCJlc2NhcGVDaGFyIiwidGVtcGxhdGUiLCJ0ZXh0Iiwic2V0dGluZ3MiLCJvbGRTZXR0aW5ncyIsIm9mZnNldCIsInZhcmlhYmxlIiwicmVuZGVyIiwiZSIsImRhdGEiLCJhcmd1bWVudCIsImNoYWluIiwiaW5zdGFuY2UiLCJfY2hhaW4iLCJtaXhpbiIsInZhbHVlT2YiLCJ0b0pTT04iLCJkZWZpbmUiLCJhbWQiLCJXSURHRVRfQ09NTU9OX0NPTkZJRyIsIkFVVEhfUEFUSF9VUkwiLCJMT0dHRVJfQ0xJRU5UX0lEIiwiTE9HR0VSX0NMSUVOVF9TRUNSRVQiLCJMT0dHRVJfUkVGUkVTSF9UT0tFTiIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdldEV2ZW50UGFyYW1zIiwicGFyYW1zIiwianNvbiIsImV2ZW50IiwiZmlsZV91cmwiLCJmaWxlX2Zvcm1hdCIsImdldEZpbGVGb3JtYXQiLCJjb21wYW55X2lkIiwiY29tcGFueUlkIiwiZGlzcGxheV9pZCIsImRpc3BsYXlJZCIsInZlcnNpb24iLCJnZXRTdWZmaXgiLCJkYXRlIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwibW9udGgiLCJnZXRVVENNb250aCIsImRheSIsImdldFVUQ0RhdGUiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJ0b0xvd2VyQ2FzZSIsImdldEluc2VydERhdGEiLCJCQVNFX0lOU0VSVF9TQ0hFTUEiLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInRlbXBsYXRlU3VmZml4Iiwicm93cyIsImluc2VydElkIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwidG9VcHBlckNhc2UiLCJ0cyIsInRvSVNPU3RyaW5nIiwibG9nRXZlbnQiLCJ0YWJsZSIsIkxvZ2dlciIsImxvZyIsImxvZ0V2ZW50VG9QbGF5ZXIiLCJ0b3AiLCJwb3N0VG9QbGF5ZXIiLCJtZXNzYWdlIiwic3VmZml4IiwiZXJyIiwiY29uc29sZSIsInNldElkcyIsImNvbXBhbnkiLCJkaXNwbGF5Iiwic2V0VmVyc2lvbiIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsIndhcm4iLCJ0b2tlbiIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hlZEF0Iiwic2VuZCIsImlzVGhyb3R0bGVkIiwibGFzdEV2ZW50IiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInNldFJlcXVlc3RIZWFkZXIiLCJlbmFibGVXaWRnZXRMb2dnaW5nIiwidGhyb3R0bGVEZWxheSIsIlV0aWxpdGllcyIsImdldEZvbnRDc3NTdHlsZSIsImZvbnRPYmoiLCJmYW1pbHkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJmb250IiwiY29sb3IiLCJmb3JlY29sb3IiLCJ3ZWlnaHQiLCJib2xkIiwiaXRhbGljIiwidW5kZXJsaW5lIiwiaGlnaGxpZ2h0IiwiaGlnaGxpZ2h0Q29sb3IiLCJiYWNrY29sb3IiLCJhZGRDU1NSdWxlcyIsInJ1bGVzIiwic3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwibG9hZEZvbnRzIiwiY2FsbGJhY2siLCJvbkdvb2dsZUZvbnRzTG9hZGVkIiwiZmFtaWxpZXMiLCJnb29nbGVGYW1pbGllcyIsImN1c3RvbUZhbWlsaWVzIiwiY3VzdG9tVXJscyIsImNsYXNzIiwiZm9udFN0eWxlIiwic3BsaXQiLCJsb2FkQ3VzdG9tRm9udCIsImxvYWRHb29nbGVGb250cyIsImNvbnRlbnREb2MiLCJzaGVldCIsInJ1bGUiLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJXZWJGb250IiwibG9hZCIsImdvb2dsZSIsImFjdGl2ZSIsImluYWN0aXZlIiwibG9hZFNjcmlwdCIsInNyYyIsInNjcmlwdCIsImJvZHkiLCJwcmVsb2FkSW1hZ2VzIiwidXJscyIsImltYWdlcyIsIkltYWdlIiwiZ2V0UXVlcnlQYXJhbWV0ZXIiLCJwYXJhbSIsImdldFF1ZXJ5U3RyaW5nUGFyYW1ldGVyIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdWJzdHJpbmciLCJxdWVyeSIsInBhaXIiLCJ2YXJzIiwiZ2V0RGF0ZU9iamVjdEZyb21QbGF5ZXJWZXJzaW9uU3RyaW5nIiwicGxheWVyVmVyc2lvbiIsInJlZ2dpZSIsImRhdGVBcnJheSIsImV4ZWMiLCJnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiZXJyb3JNZXNzYWdlIiwidW5lc2NhcGVIVE1MIiwiaHRtbCIsImRpdiIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiaGFzSW50ZXJuZXRDb25uZWN0aW9uIiwiZmlsZVBhdGgiLCJzdGF0dXMiLCJpc0xlZ2FjeSIsImxlZ2FjeVZlcnNpb24iLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJzZUludCIsImFkZFByb3RvY29sIiwic2VjdXJlIiwiUmlzZUNhY2hlIiwicGluZyIsInIiLCJfaXNWMlJ1bm5pbmciLCJCQVNFX0NBQ0hFX1VSTCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJfcGluZ1JlY2VpdmVkIiwiX2lzQ2FjaGVSdW5uaW5nIiwicmVzcG9uc2VPYmplY3QiLCJyZXNwb25zZVRleHQiLCJfUkNfVkVSU0lPTiIsIl9pc0h0dHBzIiwiZGVidWciLCJkZXNjcmlwdGlvbiIsImdldEZpbGUiLCJmaWxlVXJsIiwibm9jYWNoZWJ1c3RlciIsImZpbGVSZXF1ZXN0Iiwic2VwYXJhdG9yIiwiX2NvbXBhcmVWZXJzaW9uTnVtYmVycyIsIl9SQ19WRVJTSU9OX1dJVEhfRU5DT0RFIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibWFrZVJlcXVlc3QiLCJ2MSIsInYyIiwiaXNQb3NpdGl2ZUludGVnZXIiLCJ4IiwidmFsaWRhdGVQYXJ0cyIsInBhcnRzIiwidjFwYXJ0cyIsInYycGFydHMiLCJOYU4iLCJyZXF1ZXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvdGFsQ2FjaGVSZXF1ZXN0cyIsImdldEVycm9yTWVzc2FnZSIsImlzUmlzZUNhY2hlUnVubmluZyIsImlzVjJSdW5uaW5nIiwiaXNSQ1YyUGxheWVyIiwiaXNWM1BsYXllclZlcnNpb25XaXRoUkNWMiIsIlJDX1YyX0ZJUlNUX1BMQVlFUl9WRVJTSU9OX0RBVEUiLCJfdXRpbHMiLCJzeXNJbmZvVmlld2VyUGFyYW1ldGVyIiwicGFyZW50UGFyYW1ldGVyIiwicGxheWVyVmVyc2lvblN0cmluZyIsInBsYXllclZlcnNpb25EYXRlIiwicmVzZXQiLCJXU0NsaWVudCIsImJyb2FkY2FzdE1lc3NhZ2UiLCJzYWZlV3JpdGUiLCJjYW5Db25uZWN0IiwiVmlld2VyIiwiTG9jYWxNZXNzYWdpbmciLCJnZXRNb2R1bGVDbGllbnRMaXN0IiwidG9waWMiLCJyZWNlaXZlTWVzc2FnZXMiLCJoYW5kbGVyIiwid3JpdGUiLCJjb25maWciLCJTVE9SQUdFX0VOViIsIkNPTVBPTkVOVFNfUEFUSCIsImFuZ3VsYXIiLCJnYWRnZXRzIiwiX3JlYWR5IiwicnBjIiwiX3ByZWZzIiwiZ2V0U3RyaW5nIiwiX2RvbmUiLCJfZXJyb3JMb2ciLCJfZ2V0Q3VycmVudEZpbGUiLCJfY2xlYXJFcnJvclRpbWVyIiwiX2Vycm9yVGltZXIiLCJfc3RhcnRFcnJvclRpbWVyIiwic2xpZGVOdW0iLCJfY3VycmVudEZpbGVzIiwiX21vZGUiLCJfc2xpZGVyIiwiaXNSZWFkeSIsImdldEN1cnJlbnRTbGlkZSIsIl90ZXN0TG9jYWxTdG9yYWdlIiwiX2Rpc3BsYXlJZCIsIl9sb2NhbFN0b3JhZ2UiLCJMb2NhbFN0b3JhZ2VGaWxlIiwiaW5pdCIsImlzU3RvcmFnZUZpbGUiLCJjb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImVsIiwiX21lc3NhZ2UiLCJNZXNzYWdlIiwic2hvdyIsIl9wYXJhbXMiLCJiYWNrZ3JvdW5kIiwiX2dldEltYWdlRWxlbWVudCIsIl9pbWciLCJzdG9yYWdlIiwiX2NvbmZpZ3VyYXRpb25UeXBlIiwiX3N0b3JhZ2UiLCJTdG9yYWdlRmlsZSIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJzZXRBdHRyaWJ1dGUiLCJzY2FsZVRvRml0Iiwic2V0U2luZ2xlSW1hZ2UiLCJvbmxvYWQiLCJpbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJfaXNHaWYiLCJfdmlld2VyUGF1c2VkIiwidmlzaWJpbGl0eSIsIm9uZXJyb3IiLCJldmVudF9kZXRhaWxzIiwiaGFzU3RvcmFnZUVycm9yIiwiX3N0b3JhZ2VFcnJvckZsYWciLCJpc0Vycm9yIiwiZ2V0VGFibGVOYW1lIiwib25GaWxlSW5pdCIsIl91bmF2YWlsYWJsZUZsYWciLCJoaWRlIiwiU2xpZGVyIiwib25GaWxlUmVmcmVzaCIsInJlZnJlc2giLCJfZXJyb3JGbGFnIiwib25GaWxlVW5hdmFpbGFibGUiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwiYWRkaXRpb25hbFBhcmFtcyIsIm1vZGVUeXBlIiwid2lkdGgiLCJnZXRJbnQiLCJoZWlnaHQiLCJvblNsaWRlclJlYWR5IiwicGxheSIsIm9uU2xpZGVyQ29tcGxldGUiLCJwYXVzZSIsIl9jb25maWd1cmF0aW9uTG9nZ2VkIiwicmV0cnkiLCJzaG93RXJyb3IiLCJpc1N0b3JhZ2VFcnJvciIsImRlc3Ryb3kiLCJQcmVmcyIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJfYWN0aXZlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicCIsImFkZFNsaWRlcyIsInNsaWRlcyIsInNsaWRlIiwidG90YWxTbGlkZXMiLCJjdXJyZW50RmlsZXMiLCJmaWxlIiwiZHVyYXRpb24iLCJvblNsaWRlQ2hhbmdlZCIsImlzSW50ZXJhY3RpbmciLCJpc0xhc3RTbGlkZSIsInJlZnJlc2hTbGlkZXIiLCIkYXBpIiwiZGVzdHJveVNsaWRlciIsIm5ld0ZpbGVzIiwic2xpZGVJbmRleCIsIiQiLCJvZmYiLCJyZXZraWxsIiwiaGFuZGxlVXNlckFjdGl2aXR5Iiwic2xpZGVUaW1lciIsInJldm5leHQiLCJyZXZyZXN1bWUiLCJpc1BsYXlpbmciLCJoaWRlTmF2IiwiYXV0b0hpZGUiLCJuYXZUaW1lciIsImFkZENsYXNzIiwibmF2VGltZW91dCIsInN0YXJ0U2luZ2xlSW1hZ2VQVURUaW1lciIsInVuZGVmaW5lZCIsInNpbmdsZUltYWdlUFVEVGltZXIiLCJyZXZjdXJyZW50c2xpZGUiLCJmaWxlcyIsInRwQmFubmVyQ29udGFpbmVyIiwidHBCYW5uZXIiLCJ1bCIsImlzTG9hZGluZyIsInJldm9sdXRpb24iLCJoaWRlVGh1bWJzIiwiaGlkZVRpbWVyQmFyIiwibmF2aWdhdGlvblR5cGUiLCJvbkhvdmVyU3RvcCIsInN0YXJ0d2lkdGgiLCJzdGFydGhlaWdodCIsIm9uIiwicmVtb3ZlQ2xhc3MiLCJyZXN1bWUiLCJyZXZzaG93c2xpZGUiLCJyZXZwYXVzZSIsImRldGFpbCIsIl9pbml0aWFsTG9hZCIsImNoYW5nZWQiLCJlcnJvcl9kZXRhaWxzIiwiY29kZSIsImltZyIsImVycm9yIiwiY3VycmVudFRhcmdldCIsInJpc2VDYWNoZSIsImlzUGxheWVyUnVubmluZyIsImZvbGRlciIsImZpbGVOYW1lIiwiZ28iLCJwcm9jZXNzVXJsIiwiYWRkZWQiLCJfZmlsZXMiLCJkZWxldGVkIiwiaGFuZGxlUmVzcG9uc2UiLCJfaXNMb2FkaW5nIiwiX3RpbWVyIiwiX2dldEZpbGUiLCJvbWl0Q2FjaGVCdXN0ZXIiLCJfdXJsIiwiX3N0YXJ0UmVmcmVzaEludGVydmFsIiwiX3JlZnJlc2hJbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfcmVmcmVzaER1cmF0aW9uIiwic2VsZWN0b3IiLCJfY2xpZW50TGlzdEhhbmRsZXIiLCJjbGllbnRzIiwid2F0Y2hNZXNzYWdlQWxyZWFkeVNlbnQiLCJ0ZXN0R0NTSW1hZ2UiLCJ3c0NsaWVudCIsIl9maWxlVXBkYXRlSGFuZGxlciIsImltZ1Rlc3QiLCJ0ZXN0SW1hZ2VMb2FkQXR0ZW1wdGVkIiwib3NwYXRoIiwiX2ZpbGVFcnJvckhhbmRsZXIiLCJjb25maWd1cmUiLCJtb2RlIiwicmVnaXN0ZXIiLCJvbmNvbnRleHRtZW51Iiwib25tb3VzZWRvd24iLCJpc1YyIiwib25Qb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicG9seW1lclJlYWR5Iiwic3RvcmFnZVJlYWR5Iiwib25TdG9yYWdlUmVhZHkiLCJsaW5rIiwid2ViY29tcG9uZW50cyIsImhyZWYiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIl9nYXEiLCJnYSIsImFzeW5jIiwicHJvdG9jb2wiLCJzIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkNBS0MsV0E0S0MsUUFBU0EsR0FBYUMsR0FHcEIsUUFBU0MsR0FBU0MsRUFBS0MsRUFBVUMsRUFBTUMsRUFBTUMsRUFBT0MsR0FDbEQsS0FBT0QsR0FBUyxHQUFhQyxFQUFSRCxFQUFnQkEsR0FBU04sRUFBSyxDQUNqRCxHQUFJUSxHQUFhSCxFQUFPQSxFQUFLQyxHQUFTQSxDQUN0Q0YsR0FBT0QsRUFBU0MsRUFBTUYsRUFBSU0sR0FBYUEsRUFBWU4sR0FFckQsTUFBT0UsR0FHVCxNQUFPLFVBQVNGLEVBQUtDLEVBQVVDLEVBQU1LLEdBQ25DTixFQUFXTyxFQUFXUCxFQUFVTSxFQUFTLEVBQ3pDLElBQUlKLElBQVFNLEVBQVlULElBQVFVLEVBQUVQLEtBQUtILEdBQ25DSyxHQUFVRixHQUFRSCxHQUFLSyxPQUN2QkQsRUFBUU4sRUFBTSxFQUFJLEVBQUlPLEVBQVMsQ0FNbkMsT0FKSU0sV0FBVU4sT0FBUyxJQUNyQkgsRUFBT0YsRUFBSUcsRUFBT0EsRUFBS0MsR0FBU0EsR0FDaENBLEdBQVNOLEdBRUpDLEVBQVNDLEVBQUtDLEVBQVVDLEVBQU1DLEVBQU1DLEVBQU9DLElBK1p0RCxRQUFTTyxHQUEyQmQsR0FDbEMsTUFBTyxVQUFTZSxFQUFPQyxFQUFXUCxHQUNoQ08sRUFBWUMsRUFBR0QsRUFBV1AsRUFHMUIsS0FGQSxHQUFJRixHQUFTVyxFQUFVSCxHQUNuQlQsRUFBUU4sRUFBTSxFQUFJLEVBQUlPLEVBQVMsRUFDNUJELEdBQVMsR0FBYUMsRUFBUkQsRUFBZ0JBLEdBQVNOLEVBQzVDLEdBQUlnQixFQUFVRCxFQUFNVCxHQUFRQSxFQUFPUyxHQUFRLE1BQU9ULEVBRXBELE9BQU8sSUFzQlgsUUFBU2EsR0FBa0JuQixFQUFLb0IsRUFBZUMsR0FDN0MsTUFBTyxVQUFTTixFQUFPTyxFQUFNQyxHQUMzQixHQUFJQyxHQUFJLEVBQUdqQixFQUFTVyxFQUFVSCxFQUM5QixJQUFrQixnQkFBUFEsR0FDTHZCLEVBQU0sRUFDTndCLEVBQUlELEdBQU8sRUFBSUEsRUFBTUUsS0FBS0MsSUFBSUgsRUFBTWhCLEVBQVFpQixHQUU1Q2pCLEVBQVNnQixHQUFPLEVBQUlFLEtBQUtFLElBQUlKLEVBQU0sRUFBR2hCLEdBQVVnQixFQUFNaEIsRUFBUyxNQUU5RCxJQUFJYyxHQUFlRSxHQUFPaEIsRUFFL0IsTUFEQWdCLEdBQU1GLEVBQVlOLEVBQU9PLEdBQ2xCUCxFQUFNUSxLQUFTRCxFQUFPQyxFQUFNLEVBRXJDLElBQUlELElBQVNBLEVBRVgsTUFEQUMsR0FBTUgsRUFBY1EsRUFBTUMsS0FBS2QsRUFBT1MsRUFBR2pCLEdBQVNLLEVBQUVrQixPQUM3Q1AsR0FBTyxFQUFJQSxFQUFNQyxFQUFJLEVBRTlCLEtBQUtELEVBQU12QixFQUFNLEVBQUl3QixFQUFJakIsRUFBUyxFQUFHZ0IsR0FBTyxHQUFXaEIsRUFBTmdCLEVBQWNBLEdBQU92QixFQUNwRSxHQUFJZSxFQUFNUSxLQUFTRCxFQUFNLE1BQU9DLEVBRWxDLE9BQU8sSUFxUFgsUUFBU1EsR0FBb0I3QixFQUFLRyxHQUNoQyxHQUFJMkIsR0FBYUMsRUFBbUIxQixPQUNoQzJCLEVBQWNoQyxFQUFJZ0MsWUFDbEJDLEVBQVN2QixFQUFFd0IsV0FBV0YsSUFBZ0JBLEVBQVlHLFdBQWNDLEVBR2hFQyxFQUFPLGFBR1gsS0FGSTNCLEVBQUU0QixJQUFJdEMsRUFBS3FDLEtBQVUzQixFQUFFNkIsU0FBU3BDLEVBQU1rQyxJQUFPbEMsRUFBS3FDLEtBQUtILEdBRXBEUCxLQUNMTyxFQUFPTixFQUFtQkQsR0FDdEJPLElBQVFyQyxJQUFPQSxFQUFJcUMsS0FBVUosRUFBTUksS0FBVTNCLEVBQUU2QixTQUFTcEMsRUFBTWtDLElBQ2hFbEMsRUFBS3FDLEtBQUtILEdBNzRCaEIsR0FBSUksR0FBT0MsS0FHUEMsRUFBcUJGLEVBQUsvQixFQUcxQmtDLEVBQWFDLE1BQU1WLFVBQVdDLEVBQVdVLE9BQU9YLFVBQVdZLEVBQVlDLFNBQVNiLFVBSWxGSyxFQUFtQkksRUFBV0osS0FDOUJkLEVBQW1Ca0IsRUFBV2xCLE1BQzlCdUIsRUFBbUJiLEVBQVNhLFNBQzVCQyxFQUFtQmQsRUFBU2MsZUFLNUJDLEVBQXFCTixNQUFNTyxRQUMzQkMsRUFBcUJQLE9BQU8zQyxLQUM1Qm1ELEVBQXFCUCxFQUFVUSxLQUMvQkMsRUFBcUJWLE9BQU9XLE9BRzFCQyxFQUFPLGFBR1BoRCxFQUFJLFNBQVNWLEdBQ2YsTUFBSUEsYUFBZVUsR0FBVVYsRUFDdkIwQyxlQUFnQmhDLElBQ3RCZ0MsS0FBS2lCLFNBQVczRCxFQUFoQjBDLFFBRGlDLEdBQUloQyxHQUFFVixHQU9sQixvQkFBWjRELFVBQ2EsbUJBQVhDLFNBQTBCQSxPQUFPRCxVQUMxQ0EsUUFBVUMsT0FBT0QsUUFBVWxELEdBRTdCa0QsUUFBUWxELEVBQUlBLEdBRVorQixFQUFLL0IsRUFBSUEsRUFJWEEsRUFBRW9ELFFBQVUsT0FLWixJQUFJdEQsR0FBYSxTQUFTdUQsRUFBTXhELEVBQVN5RCxHQUN2QyxHQUFnQixTQUFaekQsRUFBb0IsTUFBT3dELEVBQy9CLFFBQW9CLE1BQVpDLEVBQW1CLEVBQUlBLEdBQzdCLElBQUssR0FBRyxNQUFPLFVBQVNDLEdBQ3RCLE1BQU9GLEdBQUtwQyxLQUFLcEIsRUFBUzBELEdBRTVCLEtBQUssR0FBRyxNQUFPLFVBQVNBLEVBQU9DLEdBQzdCLE1BQU9ILEdBQUtwQyxLQUFLcEIsRUFBUzBELEVBQU9DLEdBRW5DLEtBQUssR0FBRyxNQUFPLFVBQVNELEVBQU83RCxFQUFPK0QsR0FDcEMsTUFBT0osR0FBS3BDLEtBQUtwQixFQUFTMEQsRUFBTzdELEVBQU8rRCxHQUUxQyxLQUFLLEdBQUcsTUFBTyxVQUFTQyxFQUFhSCxFQUFPN0QsRUFBTytELEdBQ2pELE1BQU9KLEdBQUtwQyxLQUFLcEIsRUFBUzZELEVBQWFILEVBQU83RCxFQUFPK0QsSUFHekQsTUFBTyxZQUNMLE1BQU9KLEdBQUtNLE1BQU05RCxFQUFTSSxhQU8zQkksRUFBSyxTQUFTa0QsRUFBTzFELEVBQVN5RCxHQUNoQyxNQUFhLE9BQVRDLEVBQXNCdkQsRUFBRTRELFNBQ3hCNUQsRUFBRXdCLFdBQVcrQixHQUFlekQsRUFBV3lELEVBQU8xRCxFQUFTeUQsR0FDdkR0RCxFQUFFNkQsU0FBU04sR0FBZXZELEVBQUU4RCxRQUFRUCxHQUNqQ3ZELEVBQUUrRCxTQUFTUixHQUVwQnZELEdBQUVULFNBQVcsU0FBU2dFLEVBQU8xRCxHQUMzQixNQUFPUSxHQUFHa0QsRUFBTzFELEVBQVNtRSxLQUk1QixJQUFJQyxHQUFpQixTQUFTQyxFQUFVQyxHQUN0QyxNQUFPLFVBQVM3RSxHQUNkLEdBQUlLLEdBQVNNLFVBQVVOLE1BQ3ZCLElBQWEsRUFBVEEsR0FBcUIsTUFBUEwsRUFBYSxNQUFPQSxFQUN0QyxLQUFLLEdBQUlJLEdBQVEsRUFBV0MsRUFBUkQsRUFBZ0JBLElBSWxDLElBQUssR0FIRDBFLEdBQVNuRSxVQUFVUCxHQUNuQkQsRUFBT3lFLEVBQVNFLEdBQ2hCQyxFQUFJNUUsRUFBS0UsT0FDSmlCLEVBQUksRUFBT3lELEVBQUp6RCxFQUFPQSxJQUFLLENBQzFCLEdBQUkwRCxHQUFNN0UsRUFBS21CLEVBQ1Z1RCxJQUE4QixTQUFiN0UsRUFBSWdGLEtBQWlCaEYsRUFBSWdGLEdBQU9GLEVBQU9FLElBR2pFLE1BQU9oRixLQUtQaUYsRUFBYSxTQUFTOUMsR0FDeEIsSUFBS3pCLEVBQUU2RCxTQUFTcEMsR0FBWSxRQUM1QixJQUFJcUIsRUFBYyxNQUFPQSxHQUFhckIsRUFDdEN1QixHQUFLdkIsVUFBWUEsQ0FDakIsSUFBSStDLEdBQVMsR0FBSXhCLEVBRWpCLE9BREFBLEdBQUt2QixVQUFZLEtBQ1YrQyxHQUdMVCxFQUFXLFNBQVNPLEdBQ3RCLE1BQU8sVUFBU2hGLEdBQ2QsTUFBYyxPQUFQQSxFQUFjLE9BQVNBLEVBQUlnRixLQVFsQ0csRUFBa0I1RCxLQUFLNkQsSUFBSSxFQUFHLElBQU0sRUFDcENwRSxFQUFZeUQsRUFBUyxVQUNyQmhFLEVBQWMsU0FBUzBELEdBQ3pCLEdBQUk5RCxHQUFTVyxFQUFVbUQsRUFDdkIsT0FBd0IsZ0JBQVY5RCxJQUFzQkEsR0FBVSxHQUFlOEUsR0FBVjlFLEVBU3JESyxHQUFFMkUsS0FBTzNFLEVBQUU0RSxRQUFVLFNBQVN0RixFQUFLQyxFQUFVTSxHQUMzQ04sRUFBV08sRUFBV1AsRUFBVU0sRUFDaEMsSUFBSWUsR0FBR2pCLENBQ1AsSUFBSUksRUFBWVQsR0FDZCxJQUFLc0IsRUFBSSxFQUFHakIsRUFBU0wsRUFBSUssT0FBWUEsRUFBSmlCLEVBQVlBLElBQzNDckIsRUFBU0QsRUFBSXNCLEdBQUlBLEVBQUd0QixPQUVqQixDQUNMLEdBQUlHLEdBQU9PLEVBQUVQLEtBQUtILEVBQ2xCLEtBQUtzQixFQUFJLEVBQUdqQixFQUFTRixFQUFLRSxPQUFZQSxFQUFKaUIsRUFBWUEsSUFDNUNyQixFQUFTRCxFQUFJRyxFQUFLbUIsSUFBS25CLEVBQUttQixHQUFJdEIsR0FHcEMsTUFBT0EsSUFJVFUsRUFBRTZFLElBQU03RSxFQUFFOEUsUUFBVSxTQUFTeEYsRUFBS0MsRUFBVU0sR0FDMUNOLEVBQVdjLEVBQUdkLEVBQVVNLEVBSXhCLEtBQUssR0FIREosSUFBUU0sRUFBWVQsSUFBUVUsRUFBRVAsS0FBS0gsR0FDbkNLLEdBQVVGLEdBQVFILEdBQUtLLE9BQ3ZCb0YsRUFBVTVDLE1BQU14QyxHQUNYRCxFQUFRLEVBQVdDLEVBQVJELEVBQWdCQSxJQUFTLENBQzNDLEdBQUlFLEdBQWFILEVBQU9BLEVBQUtDLEdBQVNBLENBQ3RDcUYsR0FBUXJGLEdBQVNILEVBQVNELEVBQUlNLEdBQWFBLEVBQVlOLEdBRXpELE1BQU95RixJQStCVC9FLEVBQUVnRixPQUFTaEYsRUFBRWlGLE1BQVFqRixFQUFFa0YsT0FBUy9GLEVBQWEsR0FHN0NhLEVBQUVtRixZQUFjbkYsRUFBRW9GLE1BQVFqRyxFQUFhLElBR3ZDYSxFQUFFcUYsS0FBT3JGLEVBQUVzRixPQUFTLFNBQVNoRyxFQUFLYyxFQUFXUCxHQUMzQyxHQUFJeUUsRUFNSixPQUpFQSxHQURFdkUsRUFBWVQsR0FDUlUsRUFBRXVGLFVBQVVqRyxFQUFLYyxFQUFXUCxHQUU1QkcsRUFBRXdGLFFBQVFsRyxFQUFLYyxFQUFXUCxHQUV0QixTQUFSeUUsR0FBMEIsS0FBUkEsRUFBbUJoRixFQUFJZ0YsR0FBN0MsUUFLRnRFLEVBQUV5RixPQUFTekYsRUFBRTBGLE9BQVMsU0FBU3BHLEVBQUtjLEVBQVdQLEdBQzdDLEdBQUlrRixLQUtKLE9BSkEzRSxHQUFZQyxFQUFHRCxFQUFXUCxHQUMxQkcsRUFBRTJFLEtBQUtyRixFQUFLLFNBQVNpRSxFQUFPN0QsRUFBT2lHLEdBQzdCdkYsRUFBVW1ELEVBQU83RCxFQUFPaUcsSUFBT1osRUFBUWpELEtBQUt5QixLQUUzQ3dCLEdBSVQvRSxFQUFFNEYsT0FBUyxTQUFTdEcsRUFBS2MsRUFBV1AsR0FDbEMsTUFBT0csR0FBRXlGLE9BQU9uRyxFQUFLVSxFQUFFNkYsT0FBT3hGLEVBQUdELElBQWFQLElBS2hERyxFQUFFOEYsTUFBUTlGLEVBQUUrRixJQUFNLFNBQVN6RyxFQUFLYyxFQUFXUCxHQUN6Q08sRUFBWUMsRUFBR0QsRUFBV1AsRUFHMUIsS0FBSyxHQUZESixJQUFRTSxFQUFZVCxJQUFRVSxFQUFFUCxLQUFLSCxHQUNuQ0ssR0FBVUYsR0FBUUgsR0FBS0ssT0FDbEJELEVBQVEsRUFBV0MsRUFBUkQsRUFBZ0JBLElBQVMsQ0FDM0MsR0FBSUUsR0FBYUgsRUFBT0EsRUFBS0MsR0FBU0EsQ0FDdEMsS0FBS1UsRUFBVWQsRUFBSU0sR0FBYUEsRUFBWU4sR0FBTSxPQUFPLEVBRTNELE9BQU8sR0FLVFUsRUFBRWdHLEtBQU9oRyxFQUFFaUcsSUFBTSxTQUFTM0csRUFBS2MsRUFBV1AsR0FDeENPLEVBQVlDLEVBQUdELEVBQVdQLEVBRzFCLEtBQUssR0FGREosSUFBUU0sRUFBWVQsSUFBUVUsRUFBRVAsS0FBS0gsR0FDbkNLLEdBQVVGLEdBQVFILEdBQUtLLE9BQ2xCRCxFQUFRLEVBQVdDLEVBQVJELEVBQWdCQSxJQUFTLENBQzNDLEdBQUlFLEdBQWFILEVBQU9BLEVBQUtDLEdBQVNBLENBQ3RDLElBQUlVLEVBQVVkLEVBQUlNLEdBQWFBLEVBQVlOLEdBQU0sT0FBTyxFQUUxRCxPQUFPLEdBS1RVLEVBQUU2QixTQUFXN0IsRUFBRWtHLFNBQVdsRyxFQUFFbUcsUUFBVSxTQUFTN0csRUFBS29CLEVBQU0wRixFQUFXQyxHQUduRSxNQUZLdEcsR0FBWVQsS0FBTUEsRUFBTVUsRUFBRXNHLE9BQU9oSCxLQUNkLGdCQUFiOEcsSUFBeUJDLEtBQU9ELEVBQVksR0FDaERwRyxFQUFFdUcsUUFBUWpILEVBQUtvQixFQUFNMEYsSUFBYyxHQUk1Q3BHLEVBQUV3RyxPQUFTLFNBQVNsSCxFQUFLbUgsR0FDdkIsR0FBSUMsR0FBTzFGLEVBQU1DLEtBQUtoQixVQUFXLEdBQzdCMEcsRUFBUzNHLEVBQUV3QixXQUFXaUYsRUFDMUIsT0FBT3pHLEdBQUU2RSxJQUFJdkYsRUFBSyxTQUFTaUUsR0FDekIsR0FBSUYsR0FBT3NELEVBQVNGLEVBQVNsRCxFQUFNa0QsRUFDbkMsT0FBZSxPQUFScEQsRUFBZUEsRUFBT0EsRUFBS00sTUFBTUosRUFBT21ELE1BS25EMUcsRUFBRTRHLE1BQVEsU0FBU3RILEVBQUtnRixHQUN0QixNQUFPdEUsR0FBRTZFLElBQUl2RixFQUFLVSxFQUFFK0QsU0FBU08sS0FLL0J0RSxFQUFFNkcsTUFBUSxTQUFTdkgsRUFBS3dILEdBQ3RCLE1BQU85RyxHQUFFeUYsT0FBT25HLEVBQUtVLEVBQUU4RCxRQUFRZ0QsS0FLakM5RyxFQUFFK0csVUFBWSxTQUFTekgsRUFBS3dILEdBQzFCLE1BQU85RyxHQUFFcUYsS0FBSy9GLEVBQUtVLEVBQUU4RCxRQUFRZ0QsS0FJL0I5RyxFQUFFYyxJQUFNLFNBQVN4QixFQUFLQyxFQUFVTSxHQUM5QixHQUNJMEQsR0FBT3lELEVBRFB4QyxHQUFVUixJQUFVaUQsR0FBZ0JqRCxHQUV4QyxJQUFnQixNQUFaekUsR0FBMkIsTUFBUEQsRUFBYSxDQUNuQ0EsRUFBTVMsRUFBWVQsR0FBT0EsRUFBTVUsRUFBRXNHLE9BQU9oSCxFQUN4QyxLQUFLLEdBQUlzQixHQUFJLEVBQUdqQixFQUFTTCxFQUFJSyxPQUFZQSxFQUFKaUIsRUFBWUEsSUFDL0MyQyxFQUFRakUsRUFBSXNCLEdBQ1IyQyxFQUFRaUIsSUFDVkEsRUFBU2pCLE9BSWJoRSxHQUFXYyxFQUFHZCxFQUFVTSxHQUN4QkcsRUFBRTJFLEtBQUtyRixFQUFLLFNBQVNpRSxFQUFPN0QsRUFBT2lHLEdBQ2pDcUIsRUFBV3pILEVBQVNnRSxFQUFPN0QsRUFBT2lHLElBQzlCcUIsRUFBV0MsR0FBZ0JELEtBQWNoRCxLQUFZUSxLQUFZUixPQUNuRVEsRUFBU2pCLEVBQ1QwRCxFQUFlRCxJQUlyQixPQUFPeEMsSUFJVHhFLEVBQUVlLElBQU0sU0FBU3pCLEVBQUtDLEVBQVVNLEdBQzlCLEdBQ0kwRCxHQUFPeUQsRUFEUHhDLEVBQVNSLElBQVVpRCxFQUFlakQsR0FFdEMsSUFBZ0IsTUFBWnpFLEdBQTJCLE1BQVBELEVBQWEsQ0FDbkNBLEVBQU1TLEVBQVlULEdBQU9BLEVBQU1VLEVBQUVzRyxPQUFPaEgsRUFDeEMsS0FBSyxHQUFJc0IsR0FBSSxFQUFHakIsRUFBU0wsRUFBSUssT0FBWUEsRUFBSmlCLEVBQVlBLElBQy9DMkMsRUFBUWpFLEVBQUlzQixHQUNBNEQsRUFBUmpCLElBQ0ZpQixFQUFTakIsT0FJYmhFLEdBQVdjLEVBQUdkLEVBQVVNLEdBQ3hCRyxFQUFFMkUsS0FBS3JGLEVBQUssU0FBU2lFLEVBQU83RCxFQUFPaUcsR0FDakNxQixFQUFXekgsRUFBU2dFLEVBQU83RCxFQUFPaUcsSUFDbkJzQixFQUFYRCxHQUF3Q2hELE1BQWJnRCxHQUFvQ2hELE1BQVhRLEtBQ3REQSxFQUFTakIsRUFDVDBELEVBQWVELElBSXJCLE9BQU94QyxJQUtUeEUsRUFBRWtILFFBQVUsU0FBUzVILEdBSW5CLElBQUssR0FBZTZILEdBSGhCQyxFQUFNckgsRUFBWVQsR0FBT0EsRUFBTVUsRUFBRXNHLE9BQU9oSCxHQUN4Q0ssRUFBU3lILEVBQUl6SCxPQUNiMEgsRUFBV2xGLE1BQU14QyxHQUNaRCxFQUFRLEVBQWlCQyxFQUFSRCxFQUFnQkEsSUFDeEN5SCxFQUFPbkgsRUFBRXNILE9BQU8sRUFBRzVILEdBQ2Z5SCxJQUFTekgsSUFBTzJILEVBQVMzSCxHQUFTMkgsRUFBU0YsSUFDL0NFLEVBQVNGLEdBQVFDLEVBQUkxSCxFQUV2QixPQUFPMkgsSUFNVHJILEVBQUV1SCxPQUFTLFNBQVNqSSxFQUFLa0ksRUFBR25CLEdBQzFCLE1BQVMsT0FBTG1CLEdBQWFuQixHQUNWdEcsRUFBWVQsS0FBTUEsRUFBTVUsRUFBRXNHLE9BQU9oSCxJQUMvQkEsRUFBSVUsRUFBRXNILE9BQU9oSSxFQUFJSyxPQUFTLEtBRTVCSyxFQUFFa0gsUUFBUTVILEdBQUswQixNQUFNLEVBQUdILEtBQUtDLElBQUksRUFBRzBHLEtBSTdDeEgsRUFBRXlILE9BQVMsU0FBU25JLEVBQUtDLEVBQVVNLEdBRWpDLE1BREFOLEdBQVdjLEVBQUdkLEVBQVVNLEdBQ2pCRyxFQUFFNEcsTUFBTTVHLEVBQUU2RSxJQUFJdkYsRUFBSyxTQUFTaUUsRUFBTzdELEVBQU9pRyxHQUMvQyxPQUNFcEMsTUFBT0EsRUFDUDdELE1BQU9BLEVBQ1BnSSxTQUFVbkksRUFBU2dFLEVBQU83RCxFQUFPaUcsTUFFbENnQyxLQUFLLFNBQVNDLEVBQU1DLEdBQ3JCLEdBQUlDLEdBQUlGLEVBQUtGLFNBQ1RLLEVBQUlGLEVBQU1ILFFBQ2QsSUFBSUksSUFBTUMsRUFBRyxDQUNYLEdBQUlELEVBQUlDLEdBQVcsU0FBTkQsRUFBYyxNQUFPLEVBQ2xDLElBQVFDLEVBQUpELEdBQWUsU0FBTkMsRUFBYyxNQUFPLEdBRXBDLE1BQU9ILEdBQUtsSSxNQUFRbUksRUFBTW5JLFFBQ3hCLFNBSU4sSUFBSXNJLEdBQVEsU0FBU0MsR0FDbkIsTUFBTyxVQUFTM0ksRUFBS0MsRUFBVU0sR0FDN0IsR0FBSTJFLEtBTUosT0FMQWpGLEdBQVdjLEVBQUdkLEVBQVVNLEdBQ3hCRyxFQUFFMkUsS0FBS3JGLEVBQUssU0FBU2lFLEVBQU83RCxHQUMxQixHQUFJNEUsR0FBTS9FLEVBQVNnRSxFQUFPN0QsRUFBT0osRUFDakMySSxHQUFTekQsRUFBUWpCLEVBQU9lLEtBRW5CRSxHQU1YeEUsR0FBRWtJLFFBQVVGLEVBQU0sU0FBU3hELEVBQVFqQixFQUFPZSxHQUNwQ3RFLEVBQUU0QixJQUFJNEMsRUFBUUYsR0FBTUUsRUFBT0YsR0FBS3hDLEtBQUt5QixHQUFhaUIsRUFBT0YsSUFBUWYsS0FLdkV2RCxFQUFFbUksUUFBVUgsRUFBTSxTQUFTeEQsRUFBUWpCLEVBQU9lLEdBQ3hDRSxFQUFPRixHQUFPZixJQU1oQnZELEVBQUVvSSxRQUFVSixFQUFNLFNBQVN4RCxFQUFRakIsRUFBT2UsR0FDcEN0RSxFQUFFNEIsSUFBSTRDLEVBQVFGLEdBQU1FLEVBQU9GLEtBQWFFLEVBQU9GLEdBQU8sSUFJNUR0RSxFQUFFcUksUUFBVSxTQUFTL0ksR0FDbkIsTUFBS0EsR0FDRFUsRUFBRTBDLFFBQVFwRCxHQUFhMEIsRUFBTUMsS0FBSzNCLEdBQ2xDUyxFQUFZVCxHQUFhVSxFQUFFNkUsSUFBSXZGLEVBQUtVLEVBQUU0RCxVQUNuQzVELEVBQUVzRyxPQUFPaEgsT0FJbEJVLEVBQUVzSSxLQUFPLFNBQVNoSixHQUNoQixNQUFXLE9BQVBBLEVBQW9CLEVBQ2pCUyxFQUFZVCxHQUFPQSxFQUFJSyxPQUFTSyxFQUFFUCxLQUFLSCxHQUFLSyxRQUtyREssRUFBRXVJLFVBQVksU0FBU2pKLEVBQUtjLEVBQVdQLEdBQ3JDTyxFQUFZQyxFQUFHRCxFQUFXUCxFQUMxQixJQUFJMkksTUFBV0MsSUFJZixPQUhBekksR0FBRTJFLEtBQUtyRixFQUFLLFNBQVNpRSxFQUFPZSxFQUFLaEYsSUFDOUJjLEVBQVVtRCxFQUFPZSxFQUFLaEYsR0FBT2tKLEVBQU9DLEdBQU0zRyxLQUFLeUIsTUFFMUNpRixFQUFNQyxJQVNoQnpJLEVBQUUwSSxNQUFRMUksRUFBRTJJLEtBQU8zSSxFQUFFNEksS0FBTyxTQUFTekksRUFBT3FILEVBQUduQixHQUM3QyxNQUFhLE9BQVRsRyxFQUFzQixPQUNqQixNQUFMcUgsR0FBYW5CLEVBQWNsRyxFQUFNLEdBQzlCSCxFQUFFNkksUUFBUTFJLEVBQU9BLEVBQU1SLE9BQVM2SCxJQU16Q3hILEVBQUU2SSxRQUFVLFNBQVMxSSxFQUFPcUgsRUFBR25CLEdBQzdCLE1BQU9yRixHQUFNQyxLQUFLZCxFQUFPLEVBQUdVLEtBQUtDLElBQUksRUFBR1gsRUFBTVIsUUFBZSxNQUFMNkgsR0FBYW5CLEVBQVEsRUFBSW1CLE1BS25GeEgsRUFBRThJLEtBQU8sU0FBUzNJLEVBQU9xSCxFQUFHbkIsR0FDMUIsTUFBYSxPQUFUbEcsRUFBc0IsT0FDakIsTUFBTHFILEdBQWFuQixFQUFjbEcsRUFBTUEsRUFBTVIsT0FBUyxHQUM3Q0ssRUFBRStJLEtBQUs1SSxFQUFPVSxLQUFLQyxJQUFJLEVBQUdYLEVBQU1SLE9BQVM2SCxLQU1sRHhILEVBQUUrSSxLQUFPL0ksRUFBRWdKLEtBQU9oSixFQUFFaUosS0FBTyxTQUFTOUksRUFBT3FILEVBQUduQixHQUM1QyxNQUFPckYsR0FBTUMsS0FBS2QsRUFBWSxNQUFMcUgsR0FBYW5CLEVBQVEsRUFBSW1CLElBSXBEeEgsRUFBRWtKLFFBQVUsU0FBUy9JLEdBQ25CLE1BQU9ILEdBQUV5RixPQUFPdEYsRUFBT0gsRUFBRTRELFVBSTNCLElBQUl1RixHQUFVLFNBQVNDLEVBQU9DLEVBQVNDLEVBQVFDLEdBRTdDLElBQUssR0FEREMsTUFBYTdJLEVBQU0sRUFDZEMsRUFBSTJJLEdBQWMsRUFBRzVKLEVBQVNXLEVBQVU4SSxHQUFZekosRUFBSmlCLEVBQVlBLElBQUssQ0FDeEUsR0FBSTJDLEdBQVE2RixFQUFNeEksRUFDbEIsSUFBSWIsRUFBWXdELEtBQVd2RCxFQUFFMEMsUUFBUWEsSUFBVXZELEVBQUV5SixZQUFZbEcsSUFBUyxDQUUvRDhGLElBQVM5RixFQUFRNEYsRUFBUTVGLEVBQU84RixFQUFTQyxHQUM5QyxJQUFJSSxHQUFJLEVBQUdDLEVBQU1wRyxFQUFNNUQsTUFFdkIsS0FEQTZKLEVBQU83SixRQUFVZ0ssRUFDTkEsRUFBSkQsR0FDTEYsRUFBTzdJLEtBQVM0QyxFQUFNbUcsU0FFZEosS0FDVkUsRUFBTzdJLEtBQVM0QyxHQUdwQixNQUFPaUcsR0FJVHhKLEdBQUVtSixRQUFVLFNBQVNoSixFQUFPa0osR0FDMUIsTUFBT0YsR0FBUWhKLEVBQU9rSixHQUFTLElBSWpDckosRUFBRTRKLFFBQVUsU0FBU3pKLEdBQ25CLE1BQU9ILEdBQUU2SixXQUFXMUosRUFBT2EsRUFBTUMsS0FBS2hCLFVBQVcsS0FNbkRELEVBQUU4SixLQUFPOUosRUFBRStKLE9BQVMsU0FBUzVKLEVBQU82SixFQUFVekssRUFBVU0sR0FDakRHLEVBQUVpSyxVQUFVRCxLQUNmbkssRUFBVU4sRUFDVkEsRUFBV3lLLEVBQ1hBLEdBQVcsR0FFRyxNQUFaekssSUFBa0JBLEVBQVdjLEVBQUdkLEVBQVVNLEdBRzlDLEtBQUssR0FGRDJFLE1BQ0EwRixLQUNLdEosRUFBSSxFQUFHakIsRUFBU1csRUFBVUgsR0FBWVIsRUFBSmlCLEVBQVlBLElBQUssQ0FDMUQsR0FBSTJDLEdBQVFwRCxFQUFNUyxHQUNkb0csRUFBV3pILEVBQVdBLEVBQVNnRSxFQUFPM0MsRUFBR1QsR0FBU29ELENBQ2xEeUcsSUFDR3BKLEdBQUtzSixJQUFTbEQsR0FBVXhDLEVBQU8xQyxLQUFLeUIsR0FDekMyRyxFQUFPbEQsR0FDRXpILEVBQ0pTLEVBQUU2QixTQUFTcUksRUFBTWxELEtBQ3BCa0QsRUFBS3BJLEtBQUtrRixHQUNWeEMsRUFBTzFDLEtBQUt5QixJQUVKdkQsRUFBRTZCLFNBQVMyQyxFQUFRakIsSUFDN0JpQixFQUFPMUMsS0FBS3lCLEdBR2hCLE1BQU9pQixJQUtUeEUsRUFBRW1LLE1BQVEsV0FDUixNQUFPbkssR0FBRThKLEtBQUtYLEVBQVFsSixXQUFXLEdBQU0sS0FLekNELEVBQUVvSyxhQUFlLFNBQVNqSyxHQUd4QixJQUFLLEdBRkRxRSxNQUNBNkYsRUFBYXBLLFVBQVVOLE9BQ2xCaUIsRUFBSSxFQUFHakIsRUFBU1csRUFBVUgsR0FBWVIsRUFBSmlCLEVBQVlBLElBQUssQ0FDMUQsR0FBSUYsR0FBT1AsRUFBTVMsRUFDakIsS0FBSVosRUFBRTZCLFNBQVMyQyxFQUFROUQsR0FBdkIsQ0FDQSxJQUFLLEdBQUlnSixHQUFJLEVBQU9XLEVBQUpYLEdBQ1QxSixFQUFFNkIsU0FBUzVCLFVBQVV5SixHQUFJaEosR0FEQWdKLEtBRzVCQSxJQUFNVyxHQUFZN0YsRUFBTzFDLEtBQUtwQixJQUVwQyxNQUFPOEQsSUFLVHhFLEVBQUU2SixXQUFhLFNBQVMxSixHQUN0QixHQUFJNEksR0FBT0ksRUFBUWxKLFdBQVcsR0FBTSxFQUFNLEVBQzFDLE9BQU9ELEdBQUV5RixPQUFPdEYsRUFBTyxTQUFTb0QsR0FDOUIsT0FBUXZELEVBQUU2QixTQUFTa0gsRUFBTXhGLE1BTTdCdkQsRUFBRXNLLElBQU0sV0FDTixNQUFPdEssR0FBRXVLLE1BQU10SyxZQUtqQkQsRUFBRXVLLE1BQVEsU0FBU3BLLEdBSWpCLElBQUssR0FIRFIsR0FBU1EsR0FBU0gsRUFBRWMsSUFBSVgsRUFBT0csR0FBV1gsUUFBVSxFQUNwRDZFLEVBQVNyQyxNQUFNeEMsR0FFVkQsRUFBUSxFQUFXQyxFQUFSRCxFQUFnQkEsSUFDbEM4RSxFQUFPOUUsR0FBU00sRUFBRTRHLE1BQU16RyxFQUFPVCxFQUVqQyxPQUFPOEUsSUFNVHhFLEVBQUV3SyxPQUFTLFNBQVM3RSxFQUFNVyxHQUV4QixJQUFLLEdBREQ5QixNQUNLNUQsRUFBSSxFQUFHakIsRUFBU1csRUFBVXFGLEdBQVdoRyxFQUFKaUIsRUFBWUEsSUFDaEQwRixFQUNGOUIsRUFBT21CLEVBQUsvRSxJQUFNMEYsRUFBTzFGLEdBRXpCNEQsRUFBT21CLEVBQUsvRSxHQUFHLElBQU0rRSxFQUFLL0UsR0FBRyxFQUdqQyxPQUFPNEQsSUFpQlR4RSxFQUFFdUYsVUFBWXJGLEVBQTJCLEdBQ3pDRixFQUFFeUssY0FBZ0J2SyxFQUEyQixJQUk3Q0YsRUFBRVMsWUFBYyxTQUFTTixFQUFPYixFQUFLQyxFQUFVTSxHQUM3Q04sRUFBV2MsRUFBR2QsRUFBVU0sRUFBUyxFQUdqQyxLQUZBLEdBQUkwRCxHQUFRaEUsRUFBU0QsR0FDakJvTCxFQUFNLEVBQUdDLEVBQU9ySyxFQUFVSCxHQUNqQndLLEVBQU5ELEdBQVksQ0FDakIsR0FBSUUsR0FBTS9KLEtBQUtnSyxPQUFPSCxFQUFNQyxHQUFRLEVBQ2hDcEwsR0FBU1ksRUFBTXlLLElBQVFySCxFQUFPbUgsRUFBTUUsRUFBTSxFQUFRRCxFQUFPQyxFQUUvRCxNQUFPRixJQWdDVDFLLEVBQUV1RyxRQUFVaEcsRUFBa0IsRUFBR1AsRUFBRXVGLFVBQVd2RixFQUFFUyxhQUNoRFQsRUFBRThLLFlBQWN2SyxFQUFrQixHQUFJUCxFQUFFeUssZUFLeEN6SyxFQUFFK0ssTUFBUSxTQUFTQyxFQUFPQyxFQUFNQyxHQUNsQixNQUFSRCxJQUNGQSxFQUFPRCxHQUFTLEVBQ2hCQSxFQUFRLEdBRVZFLEVBQU9BLEdBQVEsQ0FLZixLQUFLLEdBSER2TCxHQUFTa0IsS0FBS0MsSUFBSUQsS0FBS3NLLE1BQU1GLEVBQU9ELEdBQVNFLEdBQU8sR0FDcERILEVBQVE1SSxNQUFNeEMsR0FFVGdCLEVBQU0sRUFBU2hCLEVBQU5nQixFQUFjQSxJQUFPcUssR0FBU0UsRUFDOUNILEVBQU1wSyxHQUFPcUssQ0FHZixPQUFPRCxHQVFULElBQUlLLEdBQWUsU0FBU0MsRUFBWUMsRUFBV3pMLEVBQVMwTCxFQUFnQjdFLEdBQzFFLEtBQU02RSxZQUEwQkQsSUFBWSxNQUFPRCxHQUFXMUgsTUFBTTlELEVBQVM2RyxFQUM3RSxJQUFJOEUsR0FBT2pILEVBQVc4RyxFQUFXNUosV0FDN0IrQyxFQUFTNkcsRUFBVzFILE1BQU02SCxFQUFNOUUsRUFDcEMsT0FBSTFHLEdBQUU2RCxTQUFTVyxHQUFnQkEsRUFDeEJnSCxFQU1UeEwsR0FBRTZDLEtBQU8sU0FBU1EsRUFBTXhELEdBQ3RCLEdBQUkrQyxHQUFjUyxFQUFLUixPQUFTRCxFQUFZLE1BQU9BLEdBQVdlLE1BQU1OLEVBQU1yQyxFQUFNQyxLQUFLaEIsVUFBVyxHQUNoRyxLQUFLRCxFQUFFd0IsV0FBVzZCLEdBQU8sS0FBTSxJQUFJb0ksV0FBVSxvQ0FDN0MsSUFBSS9FLEdBQU8xRixFQUFNQyxLQUFLaEIsVUFBVyxHQUM3QnlMLEVBQVEsV0FDVixNQUFPTixHQUFhL0gsRUFBTXFJLEVBQU83TCxFQUFTbUMsS0FBTTBFLEVBQUtpRixPQUFPM0ssRUFBTUMsS0FBS2hCLGFBRXpFLE9BQU95TCxJQU1UMUwsRUFBRTRMLFFBQVUsU0FBU3ZJLEdBQ25CLEdBQUl3SSxHQUFZN0ssRUFBTUMsS0FBS2hCLFVBQVcsR0FDbEN5TCxFQUFRLFdBR1YsSUFBSyxHQUZESSxHQUFXLEVBQUduTSxFQUFTa00sRUFBVWxNLE9BQ2pDK0csRUFBT3ZFLE1BQU14QyxHQUNSaUIsRUFBSSxFQUFPakIsRUFBSmlCLEVBQVlBLElBQzFCOEYsRUFBSzlGLEdBQUtpTCxFQUFVakwsS0FBT1osRUFBSUMsVUFBVTZMLEtBQWNELEVBQVVqTCxFQUVuRSxNQUFPa0wsRUFBVzdMLFVBQVVOLFFBQVErRyxFQUFLNUUsS0FBSzdCLFVBQVU2TCxLQUN4RCxPQUFPVixHQUFhL0gsRUFBTXFJLEVBQU8xSixLQUFNQSxLQUFNMEUsR0FFL0MsT0FBT2dGLElBTVQxTCxFQUFFK0wsUUFBVSxTQUFTek0sR0FDbkIsR0FBSXNCLEdBQThCMEQsRUFBM0IzRSxFQUFTTSxVQUFVTixNQUMxQixJQUFjLEdBQVZBLEVBQWEsS0FBTSxJQUFJcU0sT0FBTSx3Q0FDakMsS0FBS3BMLEVBQUksRUFBT2pCLEVBQUppQixFQUFZQSxJQUN0QjBELEVBQU1yRSxVQUFVVyxHQUNoQnRCLEVBQUlnRixHQUFPdEUsRUFBRTZDLEtBQUt2RCxFQUFJZ0YsR0FBTWhGLEVBRTlCLE9BQU9BLElBSVRVLEVBQUVpTSxRQUFVLFNBQVM1SSxFQUFNNkksR0FDekIsR0FBSUQsR0FBVSxTQUFTM0gsR0FDckIsR0FBSTZILEdBQVFGLEVBQVFFLE1BQ2hCQyxFQUFVLElBQU1GLEVBQVNBLEVBQU92SSxNQUFNM0IsS0FBTS9CLFdBQWFxRSxFQUU3RCxPQURLdEUsR0FBRTRCLElBQUl1SyxFQUFPQyxLQUFVRCxFQUFNQyxHQUFXL0ksRUFBS00sTUFBTTNCLEtBQU0vQixZQUN2RGtNLEVBQU1DLEdBR2YsT0FEQUgsR0FBUUUsU0FDREYsR0FLVGpNLEVBQUVxTSxNQUFRLFNBQVNoSixFQUFNaUosR0FDdkIsR0FBSTVGLEdBQU8xRixFQUFNQyxLQUFLaEIsVUFBVyxFQUNqQyxPQUFPc00sWUFBVyxXQUNoQixNQUFPbEosR0FBS00sTUFBTSxLQUFNK0MsSUFDdkI0RixJQUtMdE0sRUFBRXdNLE1BQVF4TSxFQUFFNEwsUUFBUTVMLEVBQUVxTSxNQUFPck0sRUFBRyxHQU9oQ0EsRUFBRXlNLFNBQVcsU0FBU3BKLEVBQU1pSixFQUFNSSxHQUNoQyxHQUFJN00sR0FBUzZHLEVBQU1sQyxFQUNmbUksRUFBVSxLQUNWQyxFQUFXLENBQ1ZGLEtBQVNBLEtBQ2QsSUFBSUcsR0FBUSxXQUNWRCxFQUFXRixFQUFRSSxXQUFZLEVBQVEsRUFBSTlNLEVBQUUrTSxNQUM3Q0osRUFBVSxLQUNWbkksRUFBU25CLEVBQUtNLE1BQU05RCxFQUFTNkcsR0FDeEJpRyxJQUFTOU0sRUFBVTZHLEVBQU8sTUFFakMsT0FBTyxZQUNMLEdBQUlxRyxHQUFNL00sRUFBRStNLEtBQ1BILElBQVlGLEVBQVFJLFdBQVksSUFBT0YsRUFBV0csRUFDdkQsSUFBSUMsR0FBWVYsR0FBUVMsRUFBTUgsRUFjOUIsT0FiQS9NLEdBQVVtQyxLQUNWMEUsRUFBT3pHLFVBQ1UsR0FBYitNLEdBQWtCQSxFQUFZVixHQUM1QkssSUFDRk0sYUFBYU4sR0FDYkEsRUFBVSxNQUVaQyxFQUFXRyxFQUNYdkksRUFBU25CLEVBQUtNLE1BQU05RCxFQUFTNkcsR0FDeEJpRyxJQUFTOU0sRUFBVTZHLEVBQU8sT0FDckJpRyxHQUFXRCxFQUFRUSxZQUFhLElBQzFDUCxFQUFVSixXQUFXTSxFQUFPRyxJQUV2QnhJLElBUVh4RSxFQUFFbU4sU0FBVyxTQUFTOUosRUFBTWlKLEVBQU1jLEdBQ2hDLEdBQUlULEdBQVNqRyxFQUFNN0csRUFBU3dOLEVBQVc3SSxFQUVuQ3FJLEVBQVEsV0FDVixHQUFJL0QsR0FBTzlJLEVBQUUrTSxNQUFRTSxDQUVWZixHQUFQeEQsR0FBZUEsR0FBUSxFQUN6QjZELEVBQVVKLFdBQVdNLEVBQU9QLEVBQU94RCxJQUVuQzZELEVBQVUsS0FDTFMsSUFDSDVJLEVBQVNuQixFQUFLTSxNQUFNOUQsRUFBUzZHLEdBQ3hCaUcsSUFBUzlNLEVBQVU2RyxFQUFPLFFBS3JDLE9BQU8sWUFDTDdHLEVBQVVtQyxLQUNWMEUsRUFBT3pHLFVBQ1BvTixFQUFZck4sRUFBRStNLEtBQ2QsSUFBSU8sR0FBVUYsSUFBY1QsQ0FPNUIsT0FOS0EsS0FBU0EsRUFBVUosV0FBV00sRUFBT1AsSUFDdENnQixJQUNGOUksRUFBU25CLEVBQUtNLE1BQU05RCxFQUFTNkcsR0FDN0I3RyxFQUFVNkcsRUFBTyxNQUdabEMsSUFPWHhFLEVBQUV1TixLQUFPLFNBQVNsSyxFQUFNbUssR0FDdEIsTUFBT3hOLEdBQUU0TCxRQUFRNEIsRUFBU25LLElBSTVCckQsRUFBRTZGLE9BQVMsU0FBU3pGLEdBQ2xCLE1BQU8sWUFDTCxPQUFRQSxFQUFVdUQsTUFBTTNCLEtBQU0vQixhQU1sQ0QsRUFBRXlOLFFBQVUsV0FDVixHQUFJL0csR0FBT3pHLFVBQ1ArSyxFQUFRdEUsRUFBSy9HLE9BQVMsQ0FDMUIsT0FBTyxZQUdMLElBRkEsR0FBSWlCLEdBQUlvSyxFQUNKeEcsRUFBU2tDLEVBQUtzRSxHQUFPckgsTUFBTTNCLEtBQU0vQixXQUM5QlcsS0FBSzRELEVBQVNrQyxFQUFLOUYsR0FBR0ssS0FBS2UsS0FBTXdDLEVBQ3hDLE9BQU9BLEtBS1h4RSxFQUFFME4sTUFBUSxTQUFTQyxFQUFPdEssR0FDeEIsTUFBTyxZQUNMLFFBQU1zSyxFQUFRLEVBQ0x0SyxFQUFLTSxNQUFNM0IsS0FBTS9CLFdBRDFCLFNBT0pELEVBQUU0TixPQUFTLFNBQVNELEVBQU90SyxHQUN6QixHQUFJN0QsRUFDSixPQUFPLFlBS0wsUUFKTW1PLEVBQVEsSUFDWm5PLEVBQU82RCxFQUFLTSxNQUFNM0IsS0FBTS9CLFlBRWIsR0FBVDBOLElBQVl0SyxFQUFPLE1BQ2hCN0QsSUFNWFEsRUFBRTZOLEtBQU83TixFQUFFNEwsUUFBUTVMLEVBQUU0TixPQUFRLEVBTTdCLElBQUlFLEtBQWV2TCxTQUFVLE1BQU13TCxxQkFBcUIsWUFDcEQxTSxHQUFzQixVQUFXLGdCQUFpQixXQUNsQyx1QkFBd0IsaUJBQWtCLGlCQXFCOURyQixHQUFFUCxLQUFPLFNBQVNILEdBQ2hCLElBQUtVLEVBQUU2RCxTQUFTdkUsR0FBTSxRQUN0QixJQUFJcUQsRUFBWSxNQUFPQSxHQUFXckQsRUFDbEMsSUFBSUcsS0FDSixLQUFLLEdBQUk2RSxLQUFPaEYsR0FBU1UsRUFBRTRCLElBQUl0QyxFQUFLZ0YsSUFBTTdFLEVBQUtxQyxLQUFLd0MsRUFHcEQsT0FESXdKLElBQVkzTSxFQUFvQjdCLEVBQUtHLEdBQ2xDQSxHQUlUTyxFQUFFZ08sUUFBVSxTQUFTMU8sR0FDbkIsSUFBS1UsRUFBRTZELFNBQVN2RSxHQUFNLFFBQ3RCLElBQUlHLEtBQ0osS0FBSyxHQUFJNkUsS0FBT2hGLEdBQUtHLEVBQUtxQyxLQUFLd0MsRUFHL0IsT0FESXdKLElBQVkzTSxFQUFvQjdCLEVBQUtHLEdBQ2xDQSxHQUlUTyxFQUFFc0csT0FBUyxTQUFTaEgsR0FJbEIsSUFBSyxHQUhERyxHQUFPTyxFQUFFUCxLQUFLSCxHQUNkSyxFQUFTRixFQUFLRSxPQUNkMkcsRUFBU25FLE1BQU14QyxHQUNWaUIsRUFBSSxFQUFPakIsRUFBSmlCLEVBQVlBLElBQzFCMEYsRUFBTzFGLEdBQUt0QixFQUFJRyxFQUFLbUIsR0FFdkIsT0FBTzBGLElBS1R0RyxFQUFFaU8sVUFBWSxTQUFTM08sRUFBS0MsRUFBVU0sR0FDcENOLEVBQVdjLEVBQUdkLEVBQVVNLEVBS3RCLEtBQUssR0FEREQsR0FIRkgsRUFBUU8sRUFBRVAsS0FBS0gsR0FDYkssRUFBU0YsRUFBS0UsT0FDZG9GLEtBRUtyRixFQUFRLEVBQVdDLEVBQVJELEVBQWdCQSxJQUNsQ0UsRUFBYUgsRUFBS0MsR0FDbEJxRixFQUFRbkYsR0FBY0wsRUFBU0QsRUFBSU0sR0FBYUEsRUFBWU4sRUFFOUQsT0FBT3lGLElBSVgvRSxFQUFFa08sTUFBUSxTQUFTNU8sR0FJakIsSUFBSyxHQUhERyxHQUFPTyxFQUFFUCxLQUFLSCxHQUNkSyxFQUFTRixFQUFLRSxPQUNkdU8sRUFBUS9MLE1BQU14QyxHQUNUaUIsRUFBSSxFQUFPakIsRUFBSmlCLEVBQVlBLElBQzFCc04sRUFBTXROLElBQU1uQixFQUFLbUIsR0FBSXRCLEVBQUlHLEVBQUttQixJQUVoQyxPQUFPc04sSUFJVGxPLEVBQUVtTyxPQUFTLFNBQVM3TyxHQUdsQixJQUFLLEdBRkRrRixNQUNBL0UsRUFBT08sRUFBRVAsS0FBS0gsR0FDVHNCLEVBQUksRUFBR2pCLEVBQVNGLEVBQUtFLE9BQVlBLEVBQUppQixFQUFZQSxJQUNoRDRELEVBQU9sRixFQUFJRyxFQUFLbUIsS0FBT25CLEVBQUttQixFQUU5QixPQUFPNEQsSUFLVHhFLEVBQUVvTyxVQUFZcE8sRUFBRXFPLFFBQVUsU0FBUy9PLEdBQ2pDLEdBQUlnUCxLQUNKLEtBQUssR0FBSWhLLEtBQU9oRixHQUNWVSxFQUFFd0IsV0FBV2xDLEVBQUlnRixLQUFPZ0ssRUFBTXhNLEtBQUt3QyxFQUV6QyxPQUFPZ0ssR0FBTTNHLFFBSWYzSCxFQUFFdU8sT0FBU3RLLEVBQWVqRSxFQUFFZ08sU0FJNUJoTyxFQUFFd08sVUFBWXhPLEVBQUV5TyxPQUFTeEssRUFBZWpFLEVBQUVQLE1BRzFDTyxFQUFFd0YsUUFBVSxTQUFTbEcsRUFBS2MsRUFBV1AsR0FDbkNPLEVBQVlDLEVBQUdELEVBQVdQLEVBRTFCLEtBQUssR0FEbUJ5RSxHQUFwQjdFLEVBQU9PLEVBQUVQLEtBQUtILEdBQ1RzQixFQUFJLEVBQUdqQixFQUFTRixFQUFLRSxPQUFZQSxFQUFKaUIsRUFBWUEsSUFFaEQsR0FEQTBELEVBQU03RSxFQUFLbUIsR0FDUFIsRUFBVWQsRUFBSWdGLEdBQU1BLEVBQUtoRixHQUFNLE1BQU9nRixJQUs5Q3RFLEVBQUUwTyxLQUFPLFNBQVNsRSxFQUFRbUUsRUFBVzlPLEdBQ25DLEdBQStCTixHQUFVRSxFQUFyQytFLEtBQWFsRixFQUFNa0wsQ0FDdkIsSUFBVyxNQUFQbEwsRUFBYSxNQUFPa0YsRUFDcEJ4RSxHQUFFd0IsV0FBV21OLElBQ2ZsUCxFQUFPTyxFQUFFZ08sUUFBUTFPLEdBQ2pCQyxFQUFXTyxFQUFXNk8sRUFBVzlPLEtBRWpDSixFQUFPMEosRUFBUWxKLFdBQVcsR0FBTyxFQUFPLEdBQ3hDVixFQUFXLFNBQVNnRSxFQUFPZSxFQUFLaEYsR0FBTyxNQUFPZ0YsS0FBT2hGLElBQ3JEQSxFQUFNOEMsT0FBTzlDLEdBRWYsS0FBSyxHQUFJc0IsR0FBSSxFQUFHakIsRUFBU0YsRUFBS0UsT0FBWUEsRUFBSmlCLEVBQVlBLElBQUssQ0FDckQsR0FBSTBELEdBQU03RSxFQUFLbUIsR0FDWDJDLEVBQVFqRSxFQUFJZ0YsRUFDWi9FLEdBQVNnRSxFQUFPZSxFQUFLaEYsS0FBTWtGLEVBQU9GLEdBQU9mLEdBRS9DLE1BQU9pQixJQUlUeEUsRUFBRTRPLEtBQU8sU0FBU3RQLEVBQUtDLEVBQVVNLEdBQy9CLEdBQUlHLEVBQUV3QixXQUFXakMsR0FDZkEsRUFBV1MsRUFBRTZGLE9BQU90RyxPQUNmLENBQ0wsR0FBSUUsR0FBT08sRUFBRTZFLElBQUlzRSxFQUFRbEosV0FBVyxHQUFPLEVBQU8sR0FBSTRPLE9BQ3REdFAsR0FBVyxTQUFTZ0UsRUFBT2UsR0FDekIsT0FBUXRFLEVBQUU2QixTQUFTcEMsRUFBTTZFLElBRzdCLE1BQU90RSxHQUFFME8sS0FBS3BQLEVBQUtDLEVBQVVNLElBSS9CRyxFQUFFOE8sU0FBVzdLLEVBQWVqRSxFQUFFZ08sU0FBUyxHQUt2Q2hPLEVBQUUrQyxPQUFTLFNBQVN0QixFQUFXc04sR0FDN0IsR0FBSXZLLEdBQVNELEVBQVc5QyxFQUV4QixPQURJc04sSUFBTy9PLEVBQUV3TyxVQUFVaEssRUFBUXVLLEdBQ3hCdkssR0FJVHhFLEVBQUVnUCxNQUFRLFNBQVMxUCxHQUNqQixNQUFLVSxHQUFFNkQsU0FBU3ZFLEdBQ1RVLEVBQUUwQyxRQUFRcEQsR0FBT0EsRUFBSTBCLFFBQVVoQixFQUFFdU8sVUFBV2pQLEdBRHRCQSxHQU8vQlUsRUFBRWlQLElBQU0sU0FBUzNQLEVBQUs0UCxHQUVwQixNQURBQSxHQUFZNVAsR0FDTEEsR0FJVFUsRUFBRW1QLFFBQVUsU0FBUzNFLEVBQVExRCxHQUMzQixHQUFJckgsR0FBT08sRUFBRVAsS0FBS3FILEdBQVFuSCxFQUFTRixFQUFLRSxNQUN4QyxJQUFjLE1BQVY2SyxFQUFnQixPQUFRN0ssQ0FFNUIsS0FBSyxHQURETCxHQUFNOEMsT0FBT29JLEdBQ1I1SixFQUFJLEVBQU9qQixFQUFKaUIsRUFBWUEsSUFBSyxDQUMvQixHQUFJMEQsR0FBTTdFLEVBQUttQixFQUNmLElBQUlrRyxFQUFNeEMsS0FBU2hGLEVBQUlnRixNQUFVQSxJQUFPaEYsSUFBTSxPQUFPLEVBRXZELE9BQU8sRUFLVCxJQUFJOFAsR0FBSyxTQUFTdEgsRUFBR0MsRUFBR3NILEVBQVFDLEdBRzlCLEdBQUl4SCxJQUFNQyxFQUFHLE1BQWEsS0FBTkQsR0FBVyxFQUFJQSxJQUFNLEVBQUlDLENBRTdDLElBQVMsTUFBTEQsR0FBa0IsTUFBTEMsRUFBVyxNQUFPRCxLQUFNQyxDQUVyQ0QsYUFBYTlILEtBQUc4SCxFQUFJQSxFQUFFN0UsVUFDdEI4RSxZQUFhL0gsS0FBRytILEVBQUlBLEVBQUU5RSxTQUUxQixJQUFJc00sR0FBWWhOLEVBQVN0QixLQUFLNkcsRUFDOUIsSUFBSXlILElBQWNoTixFQUFTdEIsS0FBSzhHLEdBQUksT0FBTyxDQUMzQyxRQUFRd0gsR0FFTixJQUFLLGtCQUVMLElBQUssa0JBR0gsTUFBTyxHQUFLekgsR0FBTSxHQUFLQyxDQUN6QixLQUFLLGtCQUdILE9BQUtELEtBQU9BLEdBQVdDLEtBQU9BLEVBRWhCLEtBQU5ELEVBQVUsR0FBS0EsSUFBTSxFQUFJQyxHQUFLRCxLQUFPQyxDQUMvQyxLQUFLLGdCQUNMLElBQUssbUJBSUgsT0FBUUQsS0FBT0MsRUFHbkIsR0FBSXlILEdBQTBCLG1CQUFkRCxDQUNoQixLQUFLQyxFQUFXLENBQ2QsR0FBZ0IsZ0JBQUwxSCxJQUE2QixnQkFBTEMsR0FBZSxPQUFPLENBSXpELElBQUkwSCxHQUFRM0gsRUFBRXhHLFlBQWFvTyxFQUFRM0gsRUFBRXpHLFdBQ3JDLElBQUltTyxJQUFVQyxLQUFXMVAsRUFBRXdCLFdBQVdpTyxJQUFVQSxZQUFpQkEsSUFDeEN6UCxFQUFFd0IsV0FBV2tPLElBQVVBLFlBQWlCQSxLQUN6QyxlQUFpQjVILElBQUssZUFBaUJDLEdBQzdELE9BQU8sRUFRWHNILEVBQVNBLE1BQ1RDLEVBQVNBLEtBRVQsS0FEQSxHQUFJM1AsR0FBUzBQLEVBQU8xUCxPQUNiQSxLQUdMLEdBQUkwUCxFQUFPMVAsS0FBWW1JLEVBQUcsTUFBT3dILEdBQU8zUCxLQUFZb0ksQ0FRdEQsSUFKQXNILEVBQU92TixLQUFLZ0csR0FDWndILEVBQU94TixLQUFLaUcsR0FHUnlILEVBQVcsQ0FHYixHQURBN1AsRUFBU21JLEVBQUVuSSxPQUNQQSxJQUFXb0ksRUFBRXBJLE9BQVEsT0FBTyxDQUVoQyxNQUFPQSxLQUNMLElBQUt5UCxFQUFHdEgsRUFBRW5JLEdBQVNvSSxFQUFFcEksR0FBUzBQLEVBQVFDLEdBQVMsT0FBTyxNQUVuRCxDQUVMLEdBQXNCaEwsR0FBbEI3RSxFQUFPTyxFQUFFUCxLQUFLcUksRUFHbEIsSUFGQW5JLEVBQVNGLEVBQUtFLE9BRVZLLEVBQUVQLEtBQUtzSSxHQUFHcEksU0FBV0EsRUFBUSxPQUFPLENBQ3hDLE1BQU9BLEtBR0wsR0FEQTJFLEVBQU03RSxFQUFLRSxJQUNMSyxFQUFFNEIsSUFBSW1HLEVBQUd6RCxLQUFROEssRUFBR3RILEVBQUV4RCxHQUFNeUQsRUFBRXpELEdBQU0rSyxFQUFRQyxHQUFVLE9BQU8sRUFNdkUsTUFGQUQsR0FBT00sTUFDUEwsRUFBT0ssT0FDQSxFQUlUM1AsR0FBRTRQLFFBQVUsU0FBUzlILEVBQUdDLEdBQ3RCLE1BQU9xSCxHQUFHdEgsRUFBR0MsSUFLZi9ILEVBQUU2UCxRQUFVLFNBQVN2USxHQUNuQixNQUFXLE9BQVBBLEdBQW9CLEVBQ3BCUyxFQUFZVCxLQUFTVSxFQUFFMEMsUUFBUXBELElBQVFVLEVBQUU4UCxTQUFTeFEsSUFBUVUsRUFBRXlKLFlBQVluSyxJQUE2QixJQUFmQSxFQUFJSyxPQUNoRSxJQUF2QkssRUFBRVAsS0FBS0gsR0FBS0ssUUFJckJLLEVBQUUrUCxVQUFZLFNBQVN6USxHQUNyQixTQUFVQSxHQUF3QixJQUFqQkEsRUFBSTBRLFdBS3ZCaFEsRUFBRTBDLFFBQVVELEdBQWlCLFNBQVNuRCxHQUNwQyxNQUE4QixtQkFBdkJpRCxFQUFTdEIsS0FBSzNCLElBSXZCVSxFQUFFNkQsU0FBVyxTQUFTdkUsR0FDcEIsR0FBSTJRLFNBQWMzUSxFQUNsQixPQUFnQixhQUFUMlEsR0FBZ0MsV0FBVEEsS0FBdUIzUSxHQUl2RFUsRUFBRTJFLE1BQU0sWUFBYSxXQUFZLFNBQVUsU0FBVSxPQUFRLFNBQVUsU0FBVSxTQUFTdUwsR0FDeEZsUSxFQUFFLEtBQU9rUSxHQUFRLFNBQVM1USxHQUN4QixNQUFPaUQsR0FBU3RCLEtBQUszQixLQUFTLFdBQWE0USxFQUFPLE9BTWpEbFEsRUFBRXlKLFlBQVl4SixhQUNqQkQsRUFBRXlKLFlBQWMsU0FBU25LLEdBQ3ZCLE1BQU9VLEdBQUU0QixJQUFJdEMsRUFBSyxZQU1KLGtCQUFQLEtBQXlDLGdCQUFiNlEsYUFDckNuUSxFQUFFd0IsV0FBYSxTQUFTbEMsR0FDdEIsTUFBcUIsa0JBQVBBLEtBQXFCLElBS3ZDVSxFQUFFb1EsU0FBVyxTQUFTOVEsR0FDcEIsTUFBTzhRLFVBQVM5USxLQUFTNEIsTUFBTW1QLFdBQVcvUSxLQUk1Q1UsRUFBRWtCLE1BQVEsU0FBUzVCLEdBQ2pCLE1BQU9VLEdBQUVzUSxTQUFTaFIsSUFBUUEsS0FBU0EsR0FJckNVLEVBQUVpSyxVQUFZLFNBQVMzSyxHQUNyQixNQUFPQSxNQUFRLEdBQVFBLEtBQVEsR0FBZ0MscUJBQXZCaUQsRUFBU3RCLEtBQUszQixJQUl4RFUsRUFBRXVRLE9BQVMsU0FBU2pSLEdBQ2xCLE1BQWUsUUFBUkEsR0FJVFUsRUFBRXdRLFlBQWMsU0FBU2xSLEdBQ3ZCLE1BQWUsVUFBUkEsR0FLVFUsRUFBRTRCLElBQU0sU0FBU3RDLEVBQUtnRixHQUNwQixNQUFjLE9BQVBoRixHQUFla0QsRUFBZXZCLEtBQUszQixFQUFLZ0YsSUFRakR0RSxFQUFFeVEsV0FBYSxXQUViLE1BREExTyxHQUFLL0IsRUFBSWlDLEVBQ0ZELE1BSVRoQyxFQUFFNEQsU0FBVyxTQUFTTCxHQUNwQixNQUFPQSxJQUlUdkQsRUFBRTBRLFNBQVcsU0FBU25OLEdBQ3BCLE1BQU8sWUFDTCxNQUFPQSxLQUlYdkQsRUFBRTJRLEtBQU8sYUFFVDNRLEVBQUUrRCxTQUFXQSxFQUdiL0QsRUFBRTRRLFdBQWEsU0FBU3RSLEdBQ3RCLE1BQWMsT0FBUEEsRUFBYyxhQUFlLFNBQVNnRixHQUMzQyxNQUFPaEYsR0FBSWdGLEtBTWZ0RSxFQUFFOEQsUUFBVTlELEVBQUU2USxRQUFVLFNBQVMvSixHQUUvQixNQURBQSxHQUFROUcsRUFBRXdPLGFBQWMxSCxHQUNqQixTQUFTeEgsR0FDZCxNQUFPVSxHQUFFbVAsUUFBUTdQLEVBQUt3SCxLQUsxQjlHLEVBQUUyTixNQUFRLFNBQVNuRyxFQUFHakksRUFBVU0sR0FDOUIsR0FBSWlSLEdBQVEzTyxNQUFNdEIsS0FBS0MsSUFBSSxFQUFHMEcsR0FDOUJqSSxHQUFXTyxFQUFXUCxFQUFVTSxFQUFTLEVBQ3pDLEtBQUssR0FBSWUsR0FBSSxFQUFPNEcsRUFBSjVHLEVBQU9BLElBQUtrUSxFQUFNbFEsR0FBS3JCLEVBQVNxQixFQUNoRCxPQUFPa1EsSUFJVDlRLEVBQUVzSCxPQUFTLFNBQVN2RyxFQUFLRCxHQUt2QixNQUpXLE9BQVBBLElBQ0ZBLEVBQU1DLEVBQ05BLEVBQU0sR0FFREEsRUFBTUYsS0FBS2dLLE1BQU1oSyxLQUFLeUcsVUFBWXhHLEVBQU1DLEVBQU0sS0FJdkRmLEVBQUUrTSxJQUFNZ0UsS0FBS2hFLEtBQU8sV0FDbEIsT0FBTyxHQUFJZ0UsT0FBT0MsVUFJcEIsSUFBSUMsSUFDRkMsSUFBSyxRQUNMQyxJQUFLLE9BQ0xDLElBQUssT0FDTEMsSUFBSyxTQUNMQyxJQUFLLFNBQ0xDLElBQUssVUFFSEMsRUFBY3hSLEVBQUVtTyxPQUFPOEMsR0FHdkJRLEVBQWdCLFNBQVM1TSxHQUMzQixHQUFJNk0sR0FBVSxTQUFTQyxHQUNyQixNQUFPOU0sR0FBSThNLElBR1R2TixFQUFTLE1BQVFwRSxFQUFFUCxLQUFLb0YsR0FBSytNLEtBQUssS0FBTyxJQUN6Q0MsRUFBYUMsT0FBTzFOLEdBQ3BCMk4sRUFBZ0JELE9BQU8xTixFQUFRLElBQ25DLE9BQU8sVUFBUzROLEdBRWQsTUFEQUEsR0FBbUIsTUFBVkEsRUFBaUIsR0FBSyxHQUFLQSxFQUM3QkgsRUFBV0ksS0FBS0QsR0FBVUEsRUFBT0UsUUFBUUgsRUFBZUwsR0FBV00sR0FHOUVoUyxHQUFFbVMsT0FBU1YsRUFBY1IsR0FDekJqUixFQUFFb1MsU0FBV1gsRUFBY0QsR0FJM0J4UixFQUFFd0UsT0FBUyxTQUFTZ0csRUFBUXpHLEVBQVVzTyxHQUNwQyxHQUFJOU8sR0FBa0IsTUFBVmlILEVBQWlCLE9BQVNBLEVBQU96RyxFQUk3QyxPQUhjLFVBQVZSLElBQ0ZBLEVBQVE4TyxHQUVIclMsRUFBRXdCLFdBQVcrQixHQUFTQSxFQUFNdEMsS0FBS3VKLEdBQVVqSCxFQUtwRCxJQUFJK08sR0FBWSxDQUNoQnRTLEdBQUV1UyxTQUFXLFNBQVNDLEdBQ3BCLEdBQUlDLEtBQU9ILEVBQVksRUFDdkIsT0FBT0UsR0FBU0EsRUFBU0MsRUFBS0EsR0FLaEN6UyxFQUFFMFMsa0JBQ0FDLFNBQWMsa0JBQ2RDLFlBQWMsbUJBQ2RULE9BQWMsbUJBTWhCLElBQUlVLEdBQVUsT0FJVkMsR0FDRnhCLElBQVUsSUFDVnlCLEtBQVUsS0FDVkMsS0FBVSxJQUNWQyxLQUFVLElBQ1ZDLFNBQVUsUUFDVkMsU0FBVSxTQUdSekIsRUFBVSw0QkFFVjBCLEVBQWEsU0FBU3pCLEdBQ3hCLE1BQU8sS0FBT21CLEVBQVFuQixHQU94QjNSLEdBQUVxVCxTQUFXLFNBQVNDLEVBQU1DLEVBQVVDLElBQy9CRCxHQUFZQyxJQUFhRCxFQUFXQyxHQUN6Q0QsRUFBV3ZULEVBQUU4TyxZQUFheUUsRUFBVXZULEVBQUUwUyxpQkFHdEMsSUFBSTVPLEdBQVVnTyxTQUNYeUIsRUFBU3BCLFFBQVVVLEdBQVN6TyxRQUM1Qm1QLEVBQVNYLGFBQWVDLEdBQVN6TyxRQUNqQ21QLEVBQVNaLFVBQVlFLEdBQVN6TyxRQUMvQndOLEtBQUssS0FBTyxLQUFNLEtBR2hCbFMsRUFBUSxFQUNSMEUsRUFBUyxRQUNia1AsR0FBS3BCLFFBQVFwTyxFQUFTLFNBQVM2TixFQUFPUSxFQUFRUyxFQUFhRCxFQUFVYyxHQWFuRSxNQVpBclAsSUFBVWtQLEVBQUt0UyxNQUFNdEIsRUFBTytULEdBQVF2QixRQUFRUixFQUFTMEIsR0FDckQxVCxFQUFRK1QsRUFBUzlCLEVBQU1oUyxPQUVuQndTLEVBQ0YvTixHQUFVLGNBQWdCK04sRUFBUyxpQ0FDMUJTLEVBQ1R4TyxHQUFVLGNBQWdCd08sRUFBYyx1QkFDL0JELElBQ1R2TyxHQUFVLE9BQVN1TyxFQUFXLFlBSXpCaEIsSUFFVHZOLEdBQVUsT0FHTG1QLEVBQVNHLFdBQVV0UCxFQUFTLG1CQUFxQkEsRUFBUyxPQUUvREEsRUFBUyw0RkFFUEEsRUFBUyxlQUVYLEtBQ0UsR0FBSXVQLEdBQVMsR0FBSXJSLFVBQVNpUixFQUFTRyxVQUFZLE1BQU8sSUFBS3RQLEdBQzNELE1BQU93UCxHQUVQLEtBREFBLEdBQUV4UCxPQUFTQSxFQUNMd1AsRUFHUixHQUFJUCxHQUFXLFNBQVNRLEdBQ3RCLE1BQU9GLEdBQU8xUyxLQUFLZSxLQUFNNlIsRUFBTTdULElBSTdCOFQsRUFBV1AsRUFBU0csVUFBWSxLQUdwQyxPQUZBTCxHQUFTalAsT0FBUyxZQUFjMFAsRUFBVyxPQUFTMVAsRUFBUyxJQUV0RGlQLEdBSVRyVCxFQUFFK1QsTUFBUSxTQUFTelUsR0FDakIsR0FBSTBVLEdBQVdoVSxFQUFFVixFQUVqQixPQURBMFUsR0FBU0MsUUFBUyxFQUNYRCxFQVVULElBQUl4UCxHQUFTLFNBQVN3UCxFQUFVMVUsR0FDOUIsTUFBTzBVLEdBQVNDLE9BQVNqVSxFQUFFVixHQUFLeVUsUUFBVXpVLEVBSTVDVSxHQUFFa1UsTUFBUSxTQUFTNVUsR0FDakJVLEVBQUUyRSxLQUFLM0UsRUFBRW9PLFVBQVU5TyxHQUFNLFNBQVM0USxHQUNoQyxHQUFJN00sR0FBT3JELEVBQUVrUSxHQUFRNVEsRUFBSTRRLEVBQ3pCbFEsR0FBRXlCLFVBQVV5TyxHQUFRLFdBQ2xCLEdBQUl4SixJQUFRMUUsS0FBS2lCLFNBRWpCLE9BREFuQixHQUFLNkIsTUFBTStDLEVBQU16RyxXQUNWdUUsRUFBT3hDLEtBQU1xQixFQUFLTSxNQUFNM0QsRUFBRzBHLFFBTXhDMUcsRUFBRWtVLE1BQU1sVSxHQUdSQSxFQUFFMkUsTUFBTSxNQUFPLE9BQVEsVUFBVyxRQUFTLE9BQVEsU0FBVSxXQUFZLFNBQVN1TCxHQUNoRixHQUFJekosR0FBU3ZFLEVBQVdnTyxFQUN4QmxRLEdBQUV5QixVQUFVeU8sR0FBUSxXQUNsQixHQUFJNVEsR0FBTTBDLEtBQUtpQixRQUdmLE9BRkF3RCxHQUFPOUMsTUFBTXJFLEVBQUtXLFdBQ0osVUFBVGlRLEdBQTZCLFdBQVRBLEdBQXFDLElBQWY1USxFQUFJSyxjQUFxQkwsR0FBSSxHQUNyRWtGLEVBQU94QyxLQUFNMUMsTUFLeEJVLEVBQUUyRSxNQUFNLFNBQVUsT0FBUSxTQUFVLFNBQVN1TCxHQUMzQyxHQUFJekosR0FBU3ZFLEVBQVdnTyxFQUN4QmxRLEdBQUV5QixVQUFVeU8sR0FBUSxXQUNsQixNQUFPMUwsR0FBT3hDLEtBQU15RSxFQUFPOUMsTUFBTTNCLEtBQUtpQixTQUFVaEQsZUFLcERELEVBQUV5QixVQUFVOEIsTUFBUSxXQUNsQixNQUFPdkIsTUFBS2lCLFVBS2RqRCxFQUFFeUIsVUFBVTBTLFFBQVVuVSxFQUFFeUIsVUFBVTJTLE9BQVNwVSxFQUFFeUIsVUFBVThCLE1BRXZEdkQsRUFBRXlCLFVBQVVjLFNBQVcsV0FDckIsTUFBTyxHQUFLUCxLQUFLaUIsVUFVRyxrQkFBWG9SLFNBQXlCQSxPQUFPQyxLQUN6Q0QsT0FBTyxnQkFBa0IsV0FDdkIsTUFBT3JVLE9BR1hpQixLQUFLZSxLQUdQLElBQUl1Uyx1QkFDRkMsY0FBZSxpQkFDZkMsaUJBQWtCLDRFQUNsQkMscUJBQXNCLDJCQUN0QkMscUJBQXNCLHFFQUN0QkMsVUFBVyw2Q0FJVEMsV0FBYUEsY0FDakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPQyxZQUFjLFdBQzlCLFlBV0EsU0FBU0MsR0FBZUMsRUFBUTVVLEdBQzlCLEdBQUk2VSxHQUFPLElBR1BELEdBQU9FLE9BQ1RELEVBQU9ELEVBRUhDLEVBQUtFLFdBQ1BGLEVBQUtHLFlBQWNDLEVBQWNKLEVBQUtFLFdBR3hDRixFQUFLSyxXQUFhQyxFQUNsQk4sRUFBS08sV0FBYUMsRUFFZEMsSUFDRlQsRUFBS1MsUUFBVUEsR0FHakJ0VixFQUFHNlUsSUFHSDdVLEVBQUc2VSxHQUtQLFFBQVNVLEtBQ1AsR0FBSUMsR0FBTyxHQUFJOUUsTUFDYitFLEVBQU9ELEVBQUtFLGlCQUNaQyxFQUFRSCxFQUFLSSxjQUFnQixFQUM3QkMsRUFBTUwsRUFBS00sWUFVYixPQVJZLElBQVJILElBQ0ZBLEVBQVEsSUFBTUEsR0FHTixHQUFORSxJQUNGQSxFQUFNLElBQU1BLEdBR1AsR0FBS0osRUFBT0UsRUFBUUUsRUFNN0IsUUFBU1osR0FBY2MsR0FDckIsR0FDRUMsR0FERUMsRUFBWSxPQUdoQixPQUFLRixJQUFzQixnQkFBUkEsSUFJbkJDLEVBQU1ELEVBQUlHLE9BQU9ILEVBQUl0TCxZQUFZLEtBQU8sR0FHcEN3TCxFQUFVckUsS0FBS29FLEtBQ2pCQSxFQUFNQSxFQUFJRSxPQUFPLEVBQXlCLEtBQXJCRixFQUFJOVAsUUFBUSxLQUFlOFAsRUFBSTlQLFFBQVEsS0FBTzhQLEVBQUkxVyxRQUV2RTBXLEVBQU1BLEVBQUlFLE9BQU8sRUFBeUIsS0FBckJGLEVBQUk5UCxRQUFRLEtBQWU4UCxFQUFJOVAsUUFBUSxLQUFPOFAsRUFBSTFXLFFBRXZFMFcsRUFBTUEsRUFBSUUsT0FBTyxFQUF5QixLQUFyQkYsRUFBSTlQLFFBQVEsS0FBZThQLEVBQUk5UCxRQUFRLEtBQU84UCxFQUFJMVcsU0FHbEUwVyxFQUFJRyxlQWRGLEtBaUJYLFFBQVNDLEdBQWN4QixHQUNyQixHQUFJeUIsSUFDRkMsS0FBUSxxQ0FDUkMsaUJBQW1CLEVBQ25CQyxxQkFBdUIsRUFDdkJDLGVBQWtCbEIsSUFDbEJtQixPQUNFQyxTQUFZLE1BR2hCbkQsRUFBT29ELEtBQUtDLE1BQU1ELEtBQUtFLFVBQVVULEdBTWpDLE9BSkE3QyxHQUFLa0QsS0FBSyxHQUFHQyxTQUFXblcsS0FBS3lHLFNBQVMvRSxTQUFTLElBQUlnVSxPQUFPLEdBQUdhLGNBQzdEdkQsRUFBS2tELEtBQUssR0FBRzdCLEtBQU8rQixLQUFLQyxNQUFNRCxLQUFLRSxVQUFVbEMsSUFDOUNwQixFQUFLa0QsS0FBSyxHQUFHN0IsS0FBS21DLElBQUssR0FBSXRHLE9BQU91RyxjQUUzQnpELEVBR1QsUUFBUzBELEdBQVNDLEVBQU92QyxHQUN2QkQsRUFBZUMsRUFBUSxTQUFTQyxHQUNqQixPQUFUQSxHQUNGTCxXQUFXQyxPQUFPMkMsT0FBT0MsSUFBSUYsRUFBT3RDLEtBSzFDLFFBQVN5QyxHQUFpQkgsRUFBT3ZDLEdBQy9CLElBQ0UyQyxJQUFJQyxjQUNGQyxRQUFTLGFBQ1ROLE1BQU9BLEVBQ1B2QyxPQUFRZ0MsS0FBS0UsVUFBVWxDLEdBQ3ZCOEMsT0FBUW5DLE1BRVYsTUFBT29DLEdBQ1BDLFFBQVFQLElBQUksaUNBQWtDTSxJQUtsRCxRQUFTRSxHQUFPQyxFQUFTQyxHQUN2QjVDLEVBQVkyQyxFQUNaekMsRUFBWTBDLEVBR2QsUUFBU0MsR0FBVzlVLEdBQ2xCb1MsRUFBVXBTLEVBNUhYLEdBQUltUyxHQUFZLEdBQ2RGLEVBQVksR0FDWkcsRUFBVSxJQTZIYixRQUNFYyxjQUFpQkEsRUFDakJuQixjQUFpQkEsRUFDakJpQyxTQUFZQSxFQUNaSSxpQkFBb0JBLEVBQ3BCTyxPQUFVQSxFQUNWRyxXQUFjQSxNQUlsQnhELFdBQVdDLE9BQU8yQyxPQUFTLFNBQVVhLEdBQ25DLFlBaUJBLFNBQVNDLEdBQWFsWSxHQUNwQixHQUFJbVksR0FBTSxHQUFJQyxlQUVkLE9BQUksSUFBSTFILE1BQVMySCxFQUFjLE1BQ3RCclksT0FHVG1ZLEVBQUlHLEtBQUssT0FBUUMsR0FBYSxHQUM5QkosRUFBSUssVUFBWSxXQUNkLEdBQUlDLEtBQ0osS0FDRUEsRUFBTzdCLEtBQUtDLE1BQU1zQixFQUFJTyxVQUN0QixNQUFNbkYsR0FDTnFFLFFBQVFlLEtBQUssZ0NBQWlDcEYsRUFBRWtFLFNBRWxEelgsR0FBSzRZLE1BQU9ILEVBQUtJLGFBQWNDLFlBQWEsR0FBSXBJLFNBR2xEeUgsRUFBSVksT0FYSlosUUFjRixRQUFTYSxHQUFZbEUsR0FDbkIsTUFBTzFJLElBQWE2TSxJQUFjbkUsRUFNcEMsUUFBU3VDLEdBQUk2QixFQUFXdEUsR0E0QnRCLFFBQVN1RSxHQUFnQkMsR0FDdkIsR0FDRUMsR0FBWXRELEVBRFZvQyxFQUFNLEdBQUlDLGVBR2RyQyxHQUFNdUQsRUFBV3pILFFBQVEsV0FBWXFILEdBQ3JDYixFQUFjZSxFQUFZTixhQUFlVCxFQUN6Q08sRUFBUVEsRUFBWVIsT0FBU0EsRUFDN0JTLEVBQWFwQixFQUFNN0IsY0FBY3hCLEdBR2pDdUQsRUFBSUcsS0FBSyxPQUFRdkMsR0FBSyxHQUN0Qm9DLEVBQUlvQixpQkFBaUIsZUFBZ0Isb0JBQ3JDcEIsRUFBSW9CLGlCQUFpQixnQkFBaUIsVUFBWVgsR0FFOUNoRSxFQUFPNVUsSUFBMkIsa0JBQWQ0VSxHQUFPNVUsS0FDN0JtWSxFQUFJSyxVQUFZLFdBQ2Q1RCxFQUFPNVUsR0FBR21ZLEVBQUlPLFlBSWxCUCxFQUFJWSxLQUFLbkMsS0FBS0UsVUFBVXVDLElBL0MxQixNQUFLSCxJQUFjdEUsR0FBV0EsRUFBT3pTLGVBQWUsV0FBYXlTLEVBQU9FLE9BQ3JFRixFQUFPelMsZUFBZSxVQUFZNlcsRUFBWXBFLEVBQU9FLFNBS25ERixFQUFPUSxZQUFvQyxZQUF0QlIsRUFBT1EsWUFBa0QsZUFBdEJSLEVBQU9RLFlBQzVDLGNBQXRCUixFQUFPUSxXQURULENBS0EsSUFDRSxHQUFLbUMsSUFBSUMsY0FBZ0JELElBQUlpQyxvQkFFM0IsTUFBT3ZCLEdBQU1YLGlCQUFrQjRCLEVBQVd0RSxHQUU1QyxNQUFRckIsR0FDUnFFLFFBQVFQLElBQUssd0JBQXlCOUQsR0FpQ3hDLE1BOUJBbkgsSUFBVyxFQUNYNk0sRUFBWXJFLEVBQU9FLE1BRW5CNUksV0FBVyxXQUNURSxHQUFXLEdBQ1ZxTixHQXlCSXZCLEVBQWFpQixJQTlGdEIsR0FBSVosR0FBYyx3REFBMERyRSxxQkFBcUJFLGlCQUM3RixrQkFBb0JGLHFCQUFxQkcscUJBQ3pDLGtCQUFvQkgscUJBQXFCSSxxQkFDekMsNEJBRUFnRixFQUFhLHNIQUNmbE4sR0FBVyxFQUNYcU4sRUFBZ0IsSUFDaEJSLEVBQVksR0FDWlosRUFBYyxFQUNkTyxFQUFRLEVBdUZWLFFBQ0V2QixJQUFPQSxJQUVSN0MsV0FBV0MsT0FBT0MsWUFJckIsSUFBSUYsWUFBYUEsY0FFakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPaUYsVUFBWSxXQUU1QixRQUFTQyxHQUFnQnpLLEVBQVcwSyxHQUNsQyxHQUFJQyxHQUFTLGdCQUFrQkMsbUJBQW1CRixFQUFRRyxLQUFLRixRQUFRaEksUUFBUSxLQUFNLElBQU0sS0FDdkZtSSxFQUFRLFdBQWFKLEVBQVFJLE1BQVFKLEVBQVFJLE1BQVFKLEVBQVFLLFdBQWEsS0FDMUVoUyxFQUFPLGVBQWdELEtBQS9CMlIsRUFBUTNSLEtBQUsvQixRQUFRLE1BQWUwVCxFQUFRM1IsS0FBTyxPQUFTMlIsRUFBUTNSLEtBQU8sTUFDbkdpUyxFQUFTLGlCQUFtQk4sRUFBUU8sS0FBTyxPQUFTLFVBQVksS0FDaEVDLEVBQVMsZ0JBQWtCUixFQUFRUSxPQUFTLFNBQVcsVUFBWSxLQUNuRUMsRUFBWSxxQkFBdUJULEVBQVFTLFVBQVksWUFBYyxRQUFVLEtBQy9FQyxFQUFZLHNCQUF3QlYsRUFBUVcsZUFBaUJYLEVBQVFXLGVBQWlCWCxFQUFRWSxXQUFhLEdBRS9HLE9BQU8sSUFBTXRMLEVBQVksS0FBTzJLLEVBQVNHLEVBQVEvUixFQUFPaVMsRUFBU0UsRUFBU0MsRUFBWUMsRUFBWSxJQUdwRyxRQUFTRyxHQUFZQyxHQUduQixJQUFLLEdBRkRDLEdBQVFDLFNBQVNDLGNBQWMsU0FFMUJ0YSxFQUFJLEVBQUdqQixFQUFTb2IsRUFBTXBiLE9BQVlBLEVBQUppQixFQUFZQSxJQUNqRG9hLEVBQU1HLFlBQVlGLFNBQVNHLGVBQWVMLEVBQU1uYSxJQUdsRHFhLFVBQVN0UyxLQUFLd1MsWUFBWUgsR0E4QjVCLFFBQVNLLEdBQVU5SCxFQUFVbFQsR0FNM0IsUUFBU2liLEtBQ0hqYixHQUFvQixrQkFBUEEsSUFDZkEsSUFJSixRQUFTa2IsS0FDUEQsSUFaRixHQUFJRSxHQUFXLEtBQ2JDLEtBQ0FDLEtBQ0FDLElBWUYsS0FBS3BJLEdBQWdDLElBQXBCQSxFQUFTNVQsT0FFeEIsTUFEQTJiLEtBQ0EsTUFJRi9ILEdBQVMzTyxRQUFRLFNBQVNsRSxHQUNwQkEsRUFBS2tiLE9BQVNsYixFQUFLbWIsV0FDckJmLEdBQWNkLEVBQWdCdFosRUFBS2tiLE1BQU9sYixFQUFLbWIsY0FLbkQsS0FBSyxHQUFJamIsR0FBSSxFQUFHQSxFQUFJMlMsRUFBUzVULE9BQVFpQixJQUMvQjJTLEVBQVMzUyxHQUFHaWIsV0FBYXRJLEVBQVMzUyxHQUFHaWIsVUFBVXpCLEtBQUtuSyxNQUNqQixXQUFwQ3NELEVBQVMzUyxHQUFHaWIsVUFBVXpCLEtBQUtuSyxPQUU1QnVMLEVBQVdqSSxFQUFTM1MsR0FBR2liLFVBQVV6QixLQUFLRixPQUFPNEIsTUFBTSxLQUFLLEdBR3hETixFQUFXQSxFQUFTdEosUUFBUSxLQUFNLElBRWxDdUosRUFBZTNaLEtBQUswWixHQUt4QixLQUFLNWEsRUFBSSxFQUFHQSxFQUFJMlMsRUFBUzVULE9BQVFpQixJQUMzQjJTLEVBQVMzUyxHQUFHaWIsV0FBYXRJLEVBQVMzUyxHQUFHaWIsVUFBVXpCLEtBQUtuSyxNQUNqQixXQUFwQ3NELEVBQVMzUyxHQUFHaWIsVUFBVXpCLEtBQUtuSyxPQUU1QnlMLEVBQWU1WixLQUFLcVksbUJBQW1CNUcsRUFBUzNTLEdBQUdpYixVQUFVekIsS0FBS0YsUUFBUWhJLFFBQVEsS0FBTSxLQUV4RnlKLEVBQVc3WixLQUFLeVIsRUFBUzNTLEdBQUdpYixVQUFVekIsS0FBS2hFLElBQUlsRSxRQUFRLEtBQU0sUUFJakUsSUFBOEIsSUFBMUJ1SixFQUFlOWIsUUFBMEMsSUFBMUIrYixFQUFlL2IsT0FDaEQyYixRQUVHLENBRUgsSUFBSyxHQUFJNVIsR0FBSSxFQUFHQSxFQUFJZ1MsRUFBZS9iLE9BQVErSixHQUFLLEVBQzlDcVMsRUFBZUwsRUFBZWhTLEdBQUlpUyxFQUFXalMsR0FHM0MrUixHQUFlOWIsT0FBUyxFQUMxQnFjLEVBQWdCUCxFQUFnQkYsR0FHaENELEtBS04sUUFBU1MsR0FBZTdCLEVBQVE5RCxFQUFLNkYsR0FDbkMsR0FBSUMsR0FBUSxLQUNSQyxFQUFPLGdCQUFrQmpDLEVBQVMsZUFBc0I5RCxFQUFNLEtBRWxFNkYsR0FBYUEsR0FBY2hCLFNBRTNCaUIsRUFBUUQsRUFBV0csWUFBWSxHQUVqQixPQUFWRixHQUNGQSxFQUFNRyxRQUFRLGFBQWNGLEdBSWhDLFFBQVNILEdBQWdCUixFQUFVbmIsR0FDakNpYyxRQUFRQyxNQUNOQyxRQUNFaEIsU0FBVUEsR0FFWmlCLE9BQVEsV0FDRnBjLEdBQW9CLGtCQUFQQSxJQUNmQSxLQUdKcWMsU0FBVSxXQUNKcmMsR0FBb0Isa0JBQVBBLElBQ2ZBLEtBR0pzTSxRQUFTLE1BSWIsUUFBU2dRLEdBQVlDLEdBQ25CLEdBQUlDLEdBQVM1QixTQUFTQyxjQUFlLFNBRXJDMkIsR0FBT0QsSUFBTUEsRUFDYjNCLFNBQVM2QixLQUFLM0IsWUFBYTBCLEdBRzdCLFFBQVNFLEdBQWNDLEdBSXJCLElBQUssR0FIRHJkLEdBQVNxZCxFQUFLcmQsT0FDaEJzZCxLQUVPcmMsRUFBSSxFQUFPakIsRUFBSmlCLEVBQVlBLElBQzFCcWMsRUFBT3JjLEdBQUssR0FBSXNjLE9BQ2hCRCxFQUFPcmMsR0FBR2djLElBQU1JLEVBQUtwYyxHQU96QixRQUFTdWMsR0FBa0JDLEdBQ3pCLE1BQU9DLEdBQXdCRCxFQUFPRSxPQUFPQyxTQUFTQyxPQUFPQyxVQUFVLElBTXpFLFFBQVNKLEdBQXdCRCxFQUFPTSxHQUl0QyxJQUFLLEdBRkhDLEdBREVDLEVBQU9GLEVBQU01QixNQUFNLEtBR2RsYixFQUFJLEVBQUdBLEVBQUlnZCxFQUFLamUsT0FBUWlCLElBRy9CLEdBRkErYyxFQUFPQyxFQUFLaGQsR0FBR2tiLE1BQU0sS0FFakI2QixFQUFLLElBQU1QLEVBQ2IsTUFBT2pELG9CQUFtQndELEVBQUssR0FJbkMsT0FBTyxHQU1ULFFBQVNFLEdBQXFDQyxHQUM1QyxHQUFJQyxHQUFTLDhDQUNUQyxFQUFZRCxFQUFPRSxLQUFLSCxFQUM1QixPQUFJRSxHQUNLLEdBQUlqTixPQUNQaU4sRUFBVSxJQUNSQSxFQUFVLEdBQUksR0FDaEJBLEVBQVUsSUFDVkEsRUFBVSxJQUNWQSxFQUFVLElBR2QsT0FJSixRQUFTRSxHQUF5QkMsR0FDaEMsR0FBSUMsR0FBZSxFQUNuQixRQUFRRCxHQUNOLElBQUssS0FDSEMsRUFBZSxnREFDZixNQUNGLEtBQUssS0FDSEEsRUFBZSxnRUFDZixNQUNGLFNBQ0VBLEVBQWUsMkRBR25CLE1BQU9BLEdBR1QsUUFBU0MsR0FBYUMsR0FDcEIsR0FBSUMsR0FBTXRELFNBQVNDLGNBQWMsTUFJakMsT0FGQXFELEdBQUlDLFVBQVlGLEVBRVRDLEVBQUlFLFlBR2IsUUFBU0MsR0FBc0JDLEVBQVVyRCxHQUN2QyxHQUFJOUMsR0FBTSxHQUFJQyxlQUVkLElBQUtrRyxHQUFhckQsR0FBZ0Msa0JBQWJBLEdBQXJDLENBSUE5QyxFQUFJRyxLQUFLLE9BQVFnRyxFQUFXLFFBQVMsR0FBSTVOLE9BQU9DLFdBQVcsRUFFM0QsS0FDRXdILEVBQUlZLE9BRUprQyxFQUFVOUMsRUFBSW9HLFFBQVUsS0FBT3BHLEVBQUlvRyxPQUFTLEtBRTVDLE1BQU9oTCxHQUNQMEgsR0FBUyxLQU9iLFFBQVN1RCxLQUNQLEdBQUlDLEdBQWdCLEdBRWhCbk4sRUFBUW9OLFVBQVVDLFVBQVVyTixNQUFNLGlCQUNsQ2dFLEVBQVVoRSxFQUFRQSxFQUFNLEdBQUssQ0FFakMsT0FBSWdFLEtBQ0ZBLEVBQVVzSixTQUFTdEosRUFBUThILFVBQVUsRUFBRTlILEVBQVFwUCxRQUFRLE9BRXhDdVksR0FBWG5KLElBQ0ssR0FJSixFQU1ULFFBQVN1SixHQUFZOUksRUFBSytJLEdBSXhCLE1BSEssc0JBQXNCbE4sS0FBS21FLEtBQzlCQSxHQUFPLEVBQVcsV0FBYSxXQUFhQSxHQUV2Q0EsRUFHVCxPQUNFOEksWUFBMEJBLEVBQzFCL0Isa0JBQTBCQSxFQUMxQkUsd0JBQTBCQSxFQUMxQnJELGdCQUEwQkEsRUFDMUJjLFlBQTBCQSxFQUMxQk8sVUFBMEJBLEVBQzFCVSxlQUEwQkEsRUFDMUJDLGdCQUEwQkEsRUFDMUJXLFdBQTBCQSxFQUMxQkksY0FBMEJBLEVBQzFCbUIseUJBQTBCQSxFQUMxQkcsYUFBMEJBLEVBQzFCSyxzQkFBMEJBLEVBQzFCRyxTQUEwQkEsRUFDMUJoQixxQ0FBc0NBLEtBSTFDLElBQUloSixZQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9zSyxVQUFZLFdBQzVCLFlBWUEsU0FBU0MsR0FBSy9ELEdBQ1osR0FBSWdFLEdBQUksR0FBSTdHLGdCQUVWak4sRUFBT3hKLElBRUpzWixJQUFnQyxrQkFBYkEsS0FJbkJpRSxFQUlIRCxFQUFFM0csS0FBSyxNQUFPNkcsR0FBZ0IsR0FIOUJGLEVBQUUzRyxLQUFLLE1BQU82RyxFQUFpQixtQkFBbUIsR0FNcERGLEVBQUVHLG1CQUFxQixXQUNyQixJQUNFLEdBQXFCLElBQWpCSCxFQUFFSSxXQUlKLEdBRkFDLEdBQWdCLEVBRUEsTUFBYkwsRUFBRVYsT0FBZ0IsQ0FDbkJnQixHQUFrQixDQUVsQixLQUNFLEdBQUlDLEdBQWtCUCxFQUFjLGFBQUlySSxLQUFLQyxNQUFNb0ksRUFBRVEsY0FBZ0IsRUFDakVELEtBQ0ZFLEVBQWNGLEVBQWVsSyxTQUdqQyxNQUFNL0IsR0FDSnFFLFFBQVFQLElBQUk5RCxHQUdkMEgsR0FBUyxFQUFNZ0UsRUFBRVEsa0JBQ1osQ0FBQSxHQUFpQixNQUFiUixFQUFFVixPQU9YLE1BTEFXLElBQWUsRUFFZkMsRUFBaUIsMEJBR1ZoVSxFQUFLNlQsS0FBSy9ELEVBR2pCLElBQUswRSxFQU1ILE1BTEFULElBQWUsRUFDZlMsR0FBVyxFQUNYUixFQUFpQix5QkFHVmhVLEVBQUs2VCxLQUFLL0QsRUFFakJyRCxTQUFRZ0ksTUFBTSw2QkFDZFYsR0FBZSxFQUNmSyxHQUFrQixFQUVsQnRFLEdBQVMsRUFBTyxPQUt4QixNQUFPMUgsR0FDTHFFLFFBQVFnSSxNQUFNLHFCQUFzQnJNLEVBQUVzTSxlQUkxQ1osRUFBRWxHLFFBR0osUUFBUytHLEdBQVFDLEVBQVM5RSxFQUFVK0UsR0FPbEMsUUFBU0MsS0FDUCxHQUFJbEssR0FBS0MsRUFBS2tLLENBRVZYLEdBR0V4SixFQUZBbUosRUFDR2lCLEVBQXdCVCxFQUFhVSxHQUE0QixFQUM5RGpCLEVBQWlCLGFBQWVZLEVBRWhDWixFQUFpQixhQUFla0IsbUJBQW1CTixHQUlyRCxFQUFrQlosRUFBaUIsUUFBVWtCLG1CQUFtQk4sR0FDdEVaLEVBQWlCLE9BQVEsR0FBSXpPLE9BQU9DLFVBQVksUUFBVTBQLG1CQUFtQk4sR0FHM0VDLEVBQ0ZqSyxFQUFNZ0ssR0FFTi9KLEVBQU0rSixFQUFRdEUsTUFBTSxLQUNwQnlFLEVBQTRCLElBQWZsSyxFQUFJMVcsT0FBZ0IsSUFBTSxJQUN2Q3lXLEVBQU1nSyxFQUFVRyxFQUFZLE9BQVEsR0FBSXhQLE9BQU9DLFdBSW5EMlAsRUFBWSxPQUFRdkssR0FHdEIsUUFBU29LLEdBQXdCSSxFQUFJQyxHQUtuQyxRQUFTQyxHQUFtQkMsR0FDMUIsTUFBTyxRQUFROU8sS0FBTThPLEdBSXZCLFFBQVNDLEdBQWVDLEdBQ3RCLElBQU1yZ0IsRUFBSSxFQUFHQSxFQUFJcWdCLEVBQU10aEIsT0FBUWlCLElBQzdCLElBQU1rZ0IsRUFBbUJHLEVBQU9yZ0IsSUFDOUIsT0FBTyxDQUdYLFFBQU8sRUFmVCxHQUFJc2dCLEdBQVVOLEVBQUc5RSxNQUFPLEtBQ3RCcUYsRUFBVU4sRUFBRy9FLE1BQU8sS0FDcEJsYixFQUFJLENBZU4sS0FBTW9nQixFQUFlRSxLQUFjRixFQUFlRyxHQUNoRCxNQUFPQyxJQUdULEtBQU14Z0IsRUFBSSxFQUFHQSxFQUFJc2dCLEVBQVF2aEIsU0FBVWlCLEVBQUksQ0FDckMsR0FBS3VnQixFQUFReGhCLFNBQVdpQixFQUN0QixNQUFPLEVBR1QsSUFBS3NnQixFQUFTdGdCLEtBQVF1Z0IsRUFBU3ZnQixHQUcvQixNQUFLc2dCLEdBQVN0Z0IsR0FBTXVnQixFQUFTdmdCLEdBQ3BCLEVBRUYsR0FHVCxNQUFLc2dCLEdBQVF2aEIsU0FBV3doQixFQUFReGhCLE9BQ3ZCLEdBR0YsRUFHVCxRQUFTZ2hCLEdBQVlsYSxFQUFRMlAsR0FDM0IsR0FBSW9DLEdBQU0sR0FBSUMsZ0JBQ1o0SSxHQUNFN0ksSUFBS0EsRUFDTHBDLElBQUtBLEVBR0x3SixJQUNGcEgsRUFBSUcsS0FBS2xTLEVBQVEyUCxHQUFLLEdBRXRCb0MsRUFBSThJLGlCQUFpQixVQUFXLFdBQzlCLEdBQUkxQyxHQUFTcEcsRUFBSW9HLFFBQVUsQ0FDWixPQUFYQSxHQUNBMkMsSUFDeUIsRUFBckJBLEVBQ0ZoVixXQUFXLFdBQVlvVSxFQUFZbGEsRUFBUTJQLElBQVMsS0FFbERrRixFQUFTK0YsRUFBUyxHQUFJclYsT0FBTSx5QkFFekI0UyxHQUFVLEtBQWdCLElBQVRBLEVBQzFCdEQsRUFBUytGLEdBR00sU0FBWDVhLEVBQ0ZrYSxFQUFZLE1BQU92SyxHQUVuQmtGLEVBQVMrRixFQUFTLEdBQUlyVixPQUFNLHdDQUEwQzRTLE1BSzVFcEcsRUFBSVksUUFJSmtDLEVBQVMrRixHQWhIYixHQUFLakIsR0FBWTlFLEdBQWdDLGtCQUFiQSxHQUFwQyxDQUlBLEdBQUlpRyxHQUFxQixDQWlIekIsT0FBSzVCLEdBSUlXLElBRkF0ZSxLQUFLcWQsS0FBS2lCLElBT3JCLFFBQVNrQixHQUFnQnJELEdBQ3ZCLEdBQUlDLEdBQWUsRUFDbkIsUUFBUUQsR0FDTixJQUFLLEtBQ0hDLEVBQWUsMENBQ2YsTUFDRixLQUFLLEtBQ0hBLEVBQWUsNERBQ2YsTUFDRixLQUFLLEtBQ0hBLEVBQWUsZ0VBQ2YsTUFDRixLQUFLLEtBQ0hBLEVBQWUsZ0RBQ2YsTUFDRixTQUNFQSxFQUFlLEdBR25CLE1BQU9BLEdBR1QsUUFBU3FELEdBQW1CbkcsR0FDMUIsTUFBS0EsSUFBZ0Msa0JBQWJBLEdBSW5CcUUsR0FNSHJFLEVBQVNzRSxHQUFUdEUsUUFKT3RaLEtBQUtxZCxLQUFLLFdBQ2YvRCxFQUFTc0UsS0FQYixPQWNGLFFBQVM4QixHQUFZcEcsR0FDbkIsTUFBS0EsSUFBZ0Msa0JBQWJBLEdBSW5CcUUsR0FPSHJFLEVBQVNpRSxHQUFUakUsUUFMT3RaLEtBQUtxZCxLQUFLLFdBQ2YvRCxFQUFTaUUsS0FQYixPQWVGLFFBQVNvQyxHQUFhckcsR0FDcEIsTUFBS0EsSUFBZ0Msa0JBQWJBLEdBSWpCdFosS0FBSzBmLFlBQVksU0FBVUEsR0FDNUJBLEVBQ0ZwRyxFQUFTb0csR0FFVHBHLEVBQVNzRyxPQVJiLE9BYUYsUUFBU0EsS0FDUCxHQUFJQyxHQUFrQ0MsRUFBT2pFLHFDQUFxQyxvQkFFOUVrRSxFQUF5QkQsRUFBTzNFLGtCQUFrQixVQUN0RCxLQUFLNEUsRUFBd0IsQ0FFM0IsR0FBSUMsR0FBa0JGLEVBQU8zRSxrQkFBa0IsU0FDL0M0RSxHQUF5QkQsRUFBT3pFLHdCQUF3QixVQUFXMkUsR0FFckUsR0FBSUQsRUFBd0IsQ0FDMUIsR0FBSUUsR0FBc0JILEVBQU96RSx3QkFBd0IsS0FBTTBFLEdBQzNERyxFQUFvQkosRUFBT2pFLHFDQUFxQ29FLEVBQ3BFLE9BQU9DLElBQXFCTCxFQUU1QixPQUFPLEVBSVgsUUFBU00sS0FDUHhDLEdBQWdCLEVBQ2ZDLEdBQWtCLEVBQ2xCTCxHQUFlLEVBQ2ZTLEdBQVcsRUFDWlIsRUFBaUIseUJBMVNuQixHQUFJQSxHQUFpQix5QkFFakJHLEdBQWdCLEVBQ2xCQyxHQUFrQixFQUNsQkwsR0FBZSxFQUNmUyxHQUFXLEVBQ1g4QixFQUFTak4sV0FBV0MsT0FBT2lGLFVBQzNCMEcsRUFBMEIsUUFDMUJWLEVBQWMsRUFxU2hCLFFBQ0V5QixnQkFBaUJBLEVBQ2pCckIsUUFBU0EsRUFDVHNCLG1CQUFvQkEsRUFDcEJDLFlBQWFBLEVBQ2JDLGFBQWNBLEVBQ2R0QyxLQUFNQSxFQUNOOEMsTUFBT0EsS0FLWCxJQUFJdE4sWUFBYUEsY0FDakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPc04sU0FBVyxXQUUzQixRQUFTQyxHQUFpQnZLLEdBQ3hCd0ssRUFBVXhLLEdBR1osUUFBU3lLLEtBQ1AsSUFDRSxHQUFJM0ssSUFBSS9DLFdBQVcyTixPQUFPQyxlQUN4QixNQUFPN0ssS0FBSS9DLFdBQVcyTixPQUFPQyxlQUFlRixhQUU5QyxNQUFPdkssR0FDUEMsUUFBUVAsSUFBSywyQkFBNEJNLElBSTdDLFFBQVMwSyxLQUNQSixHQUFXSyxNQUFPLHdCQUdwQixRQUFTQyxHQUFnQkMsR0FDdkIsR0FBS0EsR0FBOEIsa0JBQVpBLEdBRXZCLElBQ01qTCxJQUFJL0MsV0FBVzJOLE9BQU9DLGdCQUN4QjdLLElBQUkvQyxXQUFXMk4sT0FBT0MsZUFBZUcsZ0JBQWdCQyxHQUV2RCxNQUFPN0ssR0FDUEMsUUFBUVAsSUFBSywyQkFBNEJNLElBSTdDLFFBQVNzSyxHQUFVeEssR0FDakIsSUFDTUYsSUFBSS9DLFdBQVcyTixPQUFPQyxnQkFDeEI3SyxJQUFJL0MsV0FBVzJOLE9BQU9DLGVBQWVLLE1BQU1oTCxHQUU3QyxNQUFPRSxHQUNQQyxRQUFRUCxJQUFLLDJCQUE0Qk0sSUFJN0MsT0FDRXFLLGlCQUFrQkEsRUFDbEJFLFdBQVlBLEVBQ1pHLG9CQUFxQkEsRUFDckJFLGdCQUFpQkEsS0FJckIsSUFBSWpOLFNBQVUsUUFFVm9OLFFBQ0ZDLFlBQWEsT0FDYkMsZ0JBQWlCLGNBR0ssb0JBQVpDLFVBQ1ZBLFFBQVEvZixPQUFRLG9DQUNidU4sU0FBVSxpQkFBa0Isd0JBQzVCQSxTQUFVLGdCQUFpQixRQUtoQyxJQUFJbUUsWUFBYUEsY0FFakJBLFlBQVdxSSxTQUVYckksV0FBV3FJLE1BQVEsU0FBWWlHLEdBQzdCLFlBMEJBLFNBQVNDLEtBQ1BELEVBQVFFLElBQUlwaUIsS0FBTSxHQUFJLGdCQUFpQixLQUFNcWlCLEVBQU9DLFVBQVcsT0FDN0QsR0FBTSxHQUFNLEdBQU0sR0FBTSxHQUc1QixRQUFTQyxLQUNQTCxFQUFRRSxJQUFJcGlCLEtBQU0sR0FBSSxlQUFnQixLQUFNcWlCLEVBQU9DLFVBQVcsT0FHM0MsT0FBZEUsR0FDSGxNLEVBQVVrTSxHQUFXLEdBSXZCbE0sR0FBWXBDLE1BQVMsT0FBUUMsU0FBWXNPLE1BQXFCLEdBR2hFLFFBQVNDLEtBQ1AxVyxhQUFjMlcsR0FDZEEsRUFBYyxLQUdoQixRQUFTQyxLQUNQRixJQUVBQyxFQUFjclgsV0FBWSxXQUV4QmlYLEtBQ0MsS0FHTCxRQUFTRSxLQUNQLEdBQUlJLEdBQVcsRUFFZixJQUFLQyxHQUFpQkEsRUFBY3BrQixPQUFTLEVBQUksQ0FDL0MsR0FBZSxTQUFWcWtCLEVBQ0gsTUFBT0QsR0FBZSxFQUNqQixJQUFlLFdBQVZDLEdBQXNCQyxHQUFXQSxFQUFRQyxZQUVuREosRUFBV0csRUFBUUUsa0JBRUQsS0FBYkwsR0FDSCxNQUFTQyxHQUFlRCxHQUFpQkMsRUFBZUQsR0FBYTFOLElBQU0sS0FLakYsTUFBTyxNQUdULFFBQVNnTyxLQUVEQyxHQUE2QixZQUFmQSxHQUEyQyxlQUFmQSxHQUFxRSxLQUF0Q0EsRUFBVzlkLFFBQVMsZUFJbkcrZCxFQUFnQixHQUFJelAsWUFBV3FJLE1BQU1xSCxpQkFDckNELEVBQWNFLFFBR2hCLFFBQVNBLEtBQ1AsR0FHRUMsR0FIRUMsRUFBWXpKLFNBQVMwSixlQUFnQixhQUN2Q0MsRUFBVzNKLFNBQVM0Six5QkFDcEJDLEVBQUs3SixTQUFTQyxjQUFlLE1BSS9CNkosR0FBVyxHQUFJbFEsWUFBV3FJLE1BQU04SCxRQUFTL0osU0FBUzBKLGVBQWdCLGFBQ2hFMUosU0FBUzBKLGVBQWdCLHFCQUczQkksRUFBU0UsS0FBTSwrQ0FHVkMsRUFBUUMsWUFBYy9pQixPQUFPM0MsS0FBTXlsQixFQUFRQyxZQUFheGxCLE9BQVMsSUFDcEVzYixTQUFTNkIsS0FBSzlCLE1BQU1tSyxXQUFhRCxFQUFRQyxXQUFXOUssT0FHdkMsU0FBVjJKLEdBRUhjLEVBQUtNLElBQ0xSLEVBQVN6SixZQUFhMkosR0FDdEJKLEVBQVV2SixZQUFheUosR0FFdkJTLEVBQU8sR0FBSW5JLE9BRVh1SCxFQUE0RCxJQUExQ3JpQixPQUFPM0MsS0FBTXlsQixFQUFRSSxTQUFVM2xCLE9BRTNDOGtCLEdBTUpjLEVBQXFCLGVBR3JCQyxFQUFXLEdBQUkzUSxZQUFXcUksTUFBTXVJLFlBQWFQLEVBQVNiLEdBQ3REbUIsRUFBU2hCLFNBVFRlLEVBQXFCLFNBRXJCRyxFQUFjLEdBQUk3USxZQUFXcUksTUFBTXlJLFdBQVlULEdBQy9DUSxFQUFZbEIsU0FRTSxXQUFWUixJQUVWYyxFQUFHdlYsVUFBWSxzQkFFZnFWLEVBQVN6SixZQUFhMkosR0FDdEJKLEVBQVV2SixZQUFheUosR0FFdkJXLEVBQXFCLGlCQUdyQkMsRUFBVyxHQUFJM1EsWUFBV3FJLE1BQU0wSSxjQUFlVixFQUFTYixHQUN4RG1CLEVBQVNoQixRQUdYSixJQUNBaEIsSUFHRixRQUFTZ0MsS0FDUCxHQUFJTixHQUFLN0osU0FBU0MsY0FBZSxNQU1qQyxPQUpBNEosR0FBR2UsYUFBYyxLQUFNLFNBQ3ZCZixFQUFHdlYsVUFBWTJWLEVBQVFwWixTQUN2QmdaLEVBQUd2VixVQUFZMlYsRUFBUVksV0FBYWhCLEVBQUd2VixVQUFZLGdCQUFrQnVWLEVBQUd2VixVQUVqRXVWLEVBR1QsUUFBU2lCLEdBQWdCM1AsR0FFdkJpUCxFQUFLVyxPQUFTLFdBQ1osR0FBSUMsR0FBUWhMLFNBQVNpTCxjQUFlLG9CQUVwQ0QsR0FBTWpMLE1BQU1tTCxnQkFBa0IsT0FDOUJGLEVBQU1qTCxNQUFNbUwsZ0JBQWtCLFFBQVUvUCxFQUFNLEtBQzlDZ1EsRUFBbUMsS0FBMUJoUSxFQUFJN1AsUUFBUyxTQUFrQixHQUFRLEdBRzFDOGYsR0FBaUJELElBQ3JCSCxFQUFNakwsTUFBTXNMLFdBQWEsWUFJN0JqQixFQUFLa0IsUUFBVSxXQUNiaFAsR0FDRXBDLE1BQVMsUUFDVHFSLGNBQWlCLG1CQUNqQnBSLFNBQVlnQixJQUNYLElBSUxpUCxFQUFLekksSUFBTXhHLEVBQUlsRSxRQUFTLE1BQU8sS0FNakMsUUFBU3VVLEtBQ1AsTUFBT0MsR0FHVCxRQUFTblAsR0FBVXRDLEVBQVEwUixHQUNwQkEsSUFDSGxELEVBQVl4TyxHQUdkSixXQUFXQyxPQUFPQyxZQUFZd0MsU0FBVXFQLElBQWdCM1IsR0FHMUQsUUFBUzRSLEdBQVk3SixHQUNKLFNBQVZnSCxHQUVIRCxFQUFlLEdBQU0vRyxFQUVyQjhKLEdBQW1CLEVBR25CL0IsRUFBU2dDLE9BRVRoQixFQUFnQmhDLEVBQWUsS0FFWCxXQUFWQyxJQUVWRCxFQUFnQi9HLEVBR2hCaUgsRUFBVSxHQUFJcFAsWUFBV3FJLE1BQU04SixPQUFROUIsR0FDdkNqQixFQUFRTyxLQUFNeEgsSUFJbEIsUUFBU2lLLEdBQWVqSyxHQUNQLFNBQVZnSCxHQUVIRCxFQUFlLEdBQU0vRyxFQUVoQjhKLEdBRUgvQixFQUFTZ0MsT0FHWGhCLEVBQWdCaEMsRUFBZSxLQUVYLFdBQVZDLElBRVZELEVBQWdCL0csRUFFaEJpSCxFQUFRaUQsUUFBU25ELElBSW5Cb0QsR0FBYSxFQUNiVCxHQUFvQixFQUNwQkksR0FBbUIsRUFDbkJyRCxFQUFZLEtBR2QsUUFBUzJELEdBQW1CdFAsR0FDMUJnUCxHQUFtQixFQUVuQi9CLEVBQVNFLEtBQU1uTixHQUdUdU8sR0FDSnhDLElBSUosUUFBU3dELEdBQXFCQyxFQUFrQkMsRUFBVTdSLEdBQ3hEd1AsRUFBVWxsQixFQUFFZ1AsTUFBT3NZLEdBQ25CdEQsRUFBUXVELEVBQ1JsRCxFQUFhM08sRUFFYndQLEVBQVFzQyxNQUFRbEUsRUFBT21FLE9BQVEsT0FDL0J2QyxFQUFRd0MsT0FBU3BFLEVBQU9tRSxPQUFRLE9BRWhDeE0sU0FBUzBKLGVBQWdCLGFBQWMzSixNQUFNME0sT0FBU3BFLEVBQU9tRSxPQUFRLE9BQVUsS0FDL0VqRCxJQUdGLFFBQVNtRCxLQUNQNUMsRUFBU2dDLE9BRUhWLEdBQ0pwQyxFQUFRMkQsT0FJWixRQUFTQyxLQUNQckUsSUFHRixRQUFTc0UsS0FDUCxHQUFJN0IsR0FBUWhMLFNBQVNpTCxjQUFlLG9CQUVwQ0csSUFBZ0IsRUFHaEIxQyxJQUVlLFdBQVZLLEdBQXNCQyxHQUFXQSxFQUFRQyxVQUM1Q0QsRUFBUTZELFFBQ1ksU0FBVjlELEdBQW9CaUMsR0FBU0csSUFDdkNILEVBQU1qTCxNQUFNc0wsV0FBYSxVQUk3QixRQUFTc0IsS0FDUCxHQUFJM0IsR0FBUWhMLFNBQVNpTCxjQUFlLG9CQVdwQyxPQVRBRyxJQUFnQixFQUVWMEIsSUFDSnhRLEdBQVlwQyxNQUFTLGdCQUFpQnFSLGNBQWlCakIsSUFBc0IsR0FDN0V3QyxHQUF1QixHQUd6QnhRLEdBQVlwQyxNQUFTLE9BQVFDLFNBQVlzTyxNQUFxQixHQUV6RHlELEdBQ0h0RCxJQUNBLFFBR0dpRCxHQUNZLFNBQVY5QyxHQUFvQndCLEdBQ3ZCQSxFQUFTd0MsUUFHWCxTQUdhLFdBQVZoRSxHQUFzQkMsR0FBV0EsRUFBUUMsVUFDNUNELEVBQVEyRCxPQUNZLFNBQVY1RCxHQUFvQmlDLEdBQVNHLElBQ3ZDSCxFQUFNakwsTUFBTXNMLFdBQWEsV0FIM0IsUUFPRixRQUFTTSxLQUNQLE1BQU8sZUFHVCxRQUFTcUIsR0FBV25RLEVBQVNvUSxHQUMzQmYsR0FBYSxFQUNiVCxFQUE4QyxtQkFBbkJ3QixHQUUzQm5ELEVBQVNFLEtBQU1uTixHQUdBLFdBQVZrTSxHQUFzQkMsR0FBV0EsRUFBUUMsV0FDNUNELEVBQVFrRSxVQUdKOUIsR0FDSnhDLElBSUosUUFBUzVZLEtBQ1A2YyxJQXpWRixHQUFJOUQsR0FDRkssRUFDQWYsRUFBUyxHQUFJSCxHQUFRaUYsTUFDckJyRCxFQUFXLEtBQ1hHLEVBQVUsS0FDVk0sRUFBVyxLQUNYRSxFQUFjLEtBQ2RwQixFQUFnQixLQUNoQkwsRUFBVSxLQUNWRixLQUNBTixFQUFZLEtBQ1o4QixFQUFxQixLQUNyQjNCLEVBQWMsS0FDZHVELEdBQWEsRUFDYlQsR0FBb0IsRUFDcEJxQixHQUF1QixFQUN2QmpCLEdBQW1CLEVBQ25CVCxHQUFnQixFQUNoQmhCLEVBQU8sS0FDUGUsR0FBUyxDQXlVWCxRQUNFSyxnQkFBbUJBLEVBQ25CbFAsU0FBWUEsRUFDWnNQLFdBQWNBLEVBQ2RJLGNBQWlCQSxFQUNqQkcsa0JBQXFCQSxFQUNyQlMsaUJBQW9CQSxFQUNwQkYsY0FBaUJBLEVBQ2pCRyxNQUFTQSxFQUNURixLQUFRQSxFQUNSUCxvQkFBdUJBLEVBQ3ZCVCxhQUFnQkEsRUFDaEJxQixVQUFhQSxFQUNiaGQsS0FBUUEsSUFFUGtZLFFBRUwsSUFBSXRPLFlBQWFBLGNBRWpCQSxZQUFXcUksTUFBUXJJLFdBQVdxSSxVQUU5QnJJLFdBQVdxSSxNQUFNOEgsUUFBVSxTQUFVcUQsRUFBZUMsR0FDbEQsWUFJQSxTQUFTQyxLQUNQLElBQ0VELEVBQWlCdE4sTUFBTTBNLE9BQVNXLEVBQWNyTixNQUFNME0sT0FDcEQsTUFBUTlULEdBQ1JxRSxRQUFRZSxLQUFNLDhCQUErQnBGLEVBQUVrRSxVQU9uRCxRQUFTaVAsS0FDUCxHQUFLeUIsRUFBVSxDQUViLEtBQVFGLEVBQWlCRyxZQUN2QkgsRUFBaUJJLFlBQWFKLEVBQWlCRyxXQUlqREgsR0FBaUJ0TixNQUFNNUMsUUFBVSxPQUdqQ2lRLEVBQWNyTixNQUFNc0wsV0FBYSxVQUVqQ2tDLEdBQVUsR0FJZCxRQUFTdkQsR0FBTW5OLEdBQ2IsR0FDRTZRLEdBREUvRCxFQUFXM0osU0FBUzRKLHdCQUdsQjJELElBaUJKRyxFQUFJTCxFQUFpQnBDLGNBQWUsWUFDcEN5QyxFQUFFbkssVUFBWTFHLElBaEJkdVEsRUFBY3JOLE1BQU1zTCxXQUFhLFNBRWpDZ0MsRUFBaUJ0TixNQUFNNUMsUUFBVSxRQUdqQ3VRLEVBQUkxTixTQUFTQyxjQUFlLEtBQzVCeU4sRUFBRW5LLFVBQVkxRyxFQUNkNlEsRUFBRTlDLGFBQWMsUUFBUyxXQUV6QmpCLEVBQVN6SixZQUFhd04sR0FDdEJMLEVBQWlCbk4sWUFBYXlKLEdBRTlCNEQsR0FBVSxHQWhEZCxHQUFJQSxJQUFVLENBMERkLE9BRkFELE1BR0V4QixLQUFRQSxFQUNSOUIsS0FBUUEsR0FLWixJQUFJcFEsWUFBYUEsY0FFakJBLFlBQVdxSSxNQUFRckksV0FBV3FJLFVBRTlCckksV0FBV3FJLE1BQU04SixPQUFTLFNBQVUvUixHQUNsQyxZQW1CQSxTQUFTMlQsS0FDUCxHQUFJampCLEdBQU9zVixTQUFTaUwsY0FBZSxpQkFDakN0QixFQUFXM0osU0FBUzRKLHlCQUNwQmdFLEtBQ0FDLEVBQVEsS0FDUjdDLEVBQVEsS0FDUm5hLEVBQVcsRUFFYmlkLEdBQWNDLEVBQWFycEIsT0FFM0JxcEIsRUFBYXBrQixRQUFTLFNBQVVxa0IsR0FjOUIsT0FiQUgsRUFBUTdOLFNBQVNDLGNBQWUsTUFDaEMrSyxFQUFRaEwsU0FBU0MsY0FBZSxPQUdoQzROLEVBQU1qRCxhQUFjLGtCQUFtQixRQUN2Q2lELEVBQU1qRCxhQUFjLG1CQUFvQixLQUN4Q2lELEVBQU1qRCxhQUFjLGFBQWdDLElBQWxCNVEsRUFBT2lVLFVBR3pDakQsRUFBTXJKLElBQU0sR0FDWnFKLEVBQU1KLGFBQWMsZ0JBQWlCb0QsRUFBSzdTLEtBR2pDbkIsRUFBT25KLFVBQ2hCLElBQUssV0FDSEEsRUFBVyxVQUNYLE1BQ0YsS0FBSyxhQUNIQSxFQUFXLFlBQ1gsTUFDRixLQUFLLFlBQ0hBLEVBQVcsV0FDWCxNQUNGLEtBQUssY0FDSEEsRUFBVyxhQUNYLE1BQ0YsS0FBSyxnQkFDSEEsRUFBVyxlQUNYLE1BQ0YsS0FBSyxlQUNIQSxFQUFXLGNBQ1gsTUFDRixLQUFLLGNBQ0hBLEVBQVcsYUFDWCxNQUNGLEtBQUssZ0JBQ0hBLEVBQVcsZUFDWCxNQUNGLEtBQUssZUFDSEEsRUFBVyxjQUNYLE1BQ0YsU0FDRUEsRUFBVyxXQUdibWEsRUFBTUosYUFBYyxrQkFBbUIvWixHQUdsQ21KLEVBQU82USxXQUNWRyxFQUFNSixhQUFjLGFBQWMsV0FFbENJLEVBQU1KLGFBQWMsYUFBYyxVQUdwQ2lELEVBQU0zTixZQUFhOEssR0FDbkI0QyxFQUFPL21CLEtBQU1nbkIsS0FHZkQsRUFBT2prQixRQUFTLFNBQVVra0IsR0FDeEJsRSxFQUFTekosWUFBYTJOO0dBR3hCbmpCLEVBQUt3VixZQUFheUosR0FHcEIsUUFBU3VFLEdBQWdCdFYsR0FDbEJ1VixFQUNIdEIsSUFHS3VCLElBQ0hBLEdBQWMsRUFDZHZCLElBQ0FqVCxXQUFXcUksTUFBTTJLLG1CQUVaeUIsSUFFRUMsSUFDSEMsSUFDQWhGLEVBQU1pRixJQUdSSCxHQUFnQixJQUtqQnpWLEVBQUs2VixhQUFlWCxJQUN2Qk0sR0FBYyxHQUlsQixRQUFTRyxLQUVQRyxFQUFHLFFBQVNDLElBQUssWUFDakJMLEVBQUtLLElBQUssNkJBQ1ZMLEVBQUtLLElBQUssNkJBR1ZMLEVBQUtNLFVBQ0xOLEVBQU8sS0FJVCxRQUFTTyxLQUNQVixHQUFnQixFQUNoQm5jLGFBQWM4YyxHQUdkQSxFQUFheGQsV0FBWSxXQUN2QmdkLEVBQUtTLFVBQ0xULEVBQUtVLFlBRUxiLEdBQWdCLEVBQ2hCYyxHQUFZLEdBQ0ksSUFBZmpWLEVBQU82UyxPQUVWcUMsSUFJRixRQUFTQSxLQUNGbFYsRUFBT21WLFdBQ1ZuZCxhQUFjb2QsR0FFZEEsRUFBVzlkLFdBQVksV0FDckJvZCxFQUFHLGlDQUFrQ1csU0FBVSxlQUM5Q0MsSUFJUCxRQUFTQyxLQUNQLEdBQUluZSxHQUFnQ29lLFNBQXBCeFYsRUFBT2lVLFVBQThCalUsRUFBT2lVLFNBQVcsRUFBUSxJQUEwQixJQUFsQmpVLEVBQU9pVSxRQUU5RndCLEdBQXNCbmUsV0FBWSxXQUNoQ3NJLFdBQVdxSSxNQUFNMkssb0JBQ2hCeGIsR0FPTCxRQUFTOGIsS0FDRm9CLElBQ0hGLEdBQWMsRUFDZHZCLElBQ0EwQixLQUlKLFFBQVNyRixLQUNQLE1BQUtvRixJQUFRUCxHQUFnQkEsRUFBYXJwQixPQUFTLEVBQzFDNHBCLEVBQUtvQixrQkFHUCxHQUdULFFBQVNuRyxHQUFNb0csR0FDYixHQUFJQyxHQUFvQjVQLFNBQVNpTCxjQUFlLHdCQUM5Q3RCLEVBQVczSixTQUFTNEoseUJBQ3BCaUcsRUFBVzdQLFNBQVNDLGNBQWUsT0FDbkM2UCxFQUFLOVAsU0FBU0MsY0FBZSxLQUUvQjRQLEdBQVNqRixhQUFjLFFBQVMsYUFDaENpRixFQUFTM1AsWUFBYTRQLEdBQ3RCbkcsRUFBU3pKLFlBQWEyUCxHQUN0QkQsRUFBa0IxUCxZQUFheUosR0FFL0JvRSxFQUFlaHBCLEVBQUVnUCxNQUFPNGIsR0FFeEJoQyxJQUVBb0MsR0FBWSxFQUNaekIsRUFBT0ksRUFBRyxjQUFlc0IsWUFDdkJDLFdBQWMsRUFDZEMsYUFBZ0IsS0FDaEJDLGVBQWtCLE9BQ2xCQyxZQUFlLE1BQ2ZDLFdBQWNyVyxFQUFPdVMsTUFDckIrRCxZQUFldFcsRUFBT3lTLFNBR3hCNkIsRUFBS2lDLEdBQUksNEJBQTZCLFdBRXBDMUQsSUFDQWtELEdBQVksRUFDWm5XLFdBQVdxSSxNQUFNeUssa0JBR25CNEIsRUFBS2lDLEdBQUksNEJBQTZCLFNBQVU1WCxFQUFHQyxHQUNqRHNWLEVBQWdCdFYsS0FJbEI4VixFQUFHLFFBQVM2QixHQUFJLFdBQVksYUFBYyxXQUN4QzFCLElBQ0FILEVBQUcsaUNBQWtDOEIsWUFBYSxnQkFJcEQ5QixFQUFHLFFBQVM2QixHQUFJLFdBQVksZ0NBQWlDLFdBQzNEMUIsTUFHRkssSUFHRixRQUFTakcsS0FDUCxPQUFROEcsRUFHVixRQUFTcEQsS0FDRjJCLElBRUV0VSxFQUFPelMsZUFBZ0IsWUFBZXlTLEVBQU95VyxRQUNoRG5DLEVBQUtvQyxhQUFjLEdBR2Z6QixJQUNKWCxFQUFLVSxZQUNMQyxHQUFZLEdBR2UsSUFBeEJsQixFQUFhcnBCLFFBQ2hCNnFCLEtBS04sUUFBUzFDLEtBQ0Z5QixHQUFRVyxJQUNYWCxFQUFLcUMsV0FDTDFCLEdBQVksR0FHVFEsR0FDSHpkLGFBQWN5ZCxHQUlsQixRQUFTeEQsR0FBUzBELEdBRWhCL1YsV0FBV0MsT0FBT2lGLFVBQVVnRCxjQUFlNk4sR0FFZCxJQUF4QjVCLEVBQWFycEIsT0FFWDRwQixJQUNIdGMsYUFBY3lkLEdBQ2RsQixJQUNBaEYsRUFBTW9HLEtBR1JuQixFQUFXenBCLEVBQUVnUCxNQUFPNGIsR0FDcEJ0QixHQUFnQixHQTNScEIsR0FBSVAsR0FBYyxFQUNoQlEsRUFBTyxLQUNQUCxFQUFlLEtBQ2ZTLEVBQVcsS0FDWFksRUFBVyxLQUNYTixFQUFhLEtBQ2JWLEdBQWMsRUFDZEMsR0FBZ0IsRUFDaEIwQixHQUFZLEVBQ1pkLEdBQVksRUFDWmQsR0FBZ0IsRUFDaEJtQixFQUFhLElBQ2JHLEVBQXNCLElBb1J4QixRQUNFdkcsZ0JBQW1CQSxFQUNuQmdFLFFBQVdBLEVBQ1gzRCxLQUFRQSxFQUNSTixRQUFXQSxFQUNYMEQsS0FBUUEsRUFDUkUsTUFBU0EsRUFDVFosUUFBV0EsR0FLZixJQUFJclMsWUFBYUEsY0FFakJBLFlBQVdxSSxNQUFRckksV0FBV3FJLFVBRTlCckksV0FBV3FJLE1BQU11SSxZQUFjLFNBQVV4USxFQUFRUyxHQUMvQyxZQVNBLFNBQVM4TyxLQUNQLEdBQUljLEdBQVVySyxTQUFTaUwsY0FBZSxlQUV0Q1osR0FBUWhFLGlCQUFrQix3QkFBeUIsU0FBVTFOLEdBQzNELEdBQUl3QyxFQUVDeEMsR0FBRWlZLFFBQVVqWSxFQUFFaVksT0FBT3pWLE1BRXhCQSxFQUFNeEMsRUFBRWlZLE9BQU96VixJQUFJbEUsUUFBUyxJQUFLLE9BRTVCNFosR0FDSEEsR0FBZSxFQUVmalgsV0FBV3FJLE1BQU0ySixXQUFZelEsSUFHeEJ4QyxFQUFFaVksT0FBT3JwQixlQUFnQixhQUN2Qm9SLEVBQUVpWSxPQUFPRSxRQUNabFgsV0FBV3FJLE1BQU0rSixjQUFlN1EsR0FHM0J2QixXQUFXcUksTUFBTXVKLG1CQUVwQjVSLFdBQVdxSSxNQUFNK0osY0FBZXJULEVBQUVpWSxPQUFPelYsU0FRckRrUCxFQUFRaEUsaUJBQWtCLHlCQUEwQixTQUFVMU4sR0FDNUQsR0FBSXFCLElBQ0ZFLE1BQVMsUUFDVHFSLGNBQWlCLG9CQUNqQndGLGNBQWlCLGtCQUFvQnBZLEVBQUVpWSxPQUFPSSxLQUFPLGNBQWdCclksRUFBRWlZLE9BQU8vVCxRQUdoRmpELFlBQVdxSSxNQUFNM0YsU0FBVXRDLEdBQVEsR0FDbkNKLFdBQVdxSSxNQUFNK0ssVUFBVyxpRUFHOUIzQyxFQUFRaEUsaUJBQWtCLHVCQUF3QixTQUFVMU4sR0FDMUQsR0FBSXFCLElBQ0FFLE1BQVMsUUFDVHFSLGNBQWlCLHlCQUNqQnBSLFNBQVl4QixFQUFFaVksUUFFaEJLLEVBQU1qUixTQUFTMEosZUFBZ0IsUUFHakN1SCxHQUFJbFIsTUFBTW1LLFdBQWEsR0FFdkJ0USxXQUFXcUksTUFBTTNGLFNBQVV0QyxHQUFRLEdBQ25DSixXQUFXcUksTUFBTStLLFVBQVcsbUVBRzlCM0MsRUFBUWhFLGlCQUFrQiw4QkFBK0IsU0FBVTFOLEdBQ2pFLEdBQUlxQixJQUNGRSxNQUFTLFFBQ1RxUixjQUFpQix5QkFDakJwUixTQUFZeEIsRUFBRWlZLE9BR2hCaFgsWUFBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxHQUNuQ0osV0FBV3FJLE1BQU0rSyxVQUFXLG9EQUc5QjNDLEVBQVFoRSxpQkFBa0Isa0NBQW1DLFNBQVUxTixHQUNyRSxHQUFJcUIsSUFDRkUsTUFBUyxRQUNUcVIsY0FBaUIsNkJBQ2pCd0YsY0FBaUIsd0NBQTBDcFksRUFBRWlZLE9BQU9NLE1BQU1DLGNBQWN4TixPQUcxRi9KLFlBQVdxSSxNQUFNM0YsU0FBVXRDLEdBQVEsS0FHckNxUSxFQUFRaEUsaUJBQWtCLG9DQUFxQyxXQUM3RCxHQUFJck0sSUFDRkUsTUFBUyxRQUNUcVIsY0FBaUIsK0JBR25CM1IsWUFBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxHQUNuQ0osV0FBV3FJLE1BQU0rSyxVQUFXLDhDQUc5QjNDLEVBQVFoRSxpQkFBa0IscUJBQXNCLFNBQVUxTixHQUN4RCxHQUFJd00sR0FBWXhNLEVBQUVpWSxRQUFValksRUFBRWlZLE9BQU94SyxTQUFXek4sRUFBRWlZLE9BQU94SyxRQUFRakwsSUFBUXhDLEVBQUVpWSxPQUFPeEssUUFBUWpMLElBQU0sS0FDOUZuQixHQUNFRSxNQUFTLFFBQ1RxUixjQUFpQixxQkFDakJ3RixjQUFpQix3Q0FBMENwWSxFQUFFaVksT0FBT00sTUFBTUMsY0FBY3hOLE9BQ3hGeEosU0FBWWdMLEVBR2hCdkwsWUFBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxHQUNuQ0osV0FBV3FJLE1BQU0rSyxVQUFXLCtEQUErRCxLQUc3RjNDLEVBQVFoRSxpQkFBa0IsbUJBQW9CLFNBQVUxTixHQUN0RCxHQVFFd0ssR0FSRWdDLEVBQVl4TSxFQUFFaVksUUFBVWpZLEVBQUVpWSxPQUFPeEssU0FBV3pOLEVBQUVpWSxPQUFPeEssUUFBUWpMLElBQVF4QyxFQUFFaVksT0FBT3hLLFFBQVFqTCxJQUFNLEtBQzlGbkIsR0FDRUUsTUFBUyxRQUNUcVIsY0FBaUIsbUJBQ2pCd0YsY0FBaUJwWSxFQUFFaVksT0FBT00sTUFBTXJVLFFBQ2hDMUMsU0FBWWdMLEdBRWRqQyxFQUFhLENBSWZ0SixZQUFXcUksTUFBTTNGLFNBQVV0QyxHQUFRLEdBRTlCb1gsRUFBVTNLLGNBQ2J0RCxFQUFlaU8sRUFBVTdLLGdCQUFpQnJELElBR3JDdkssRUFBRWlZLE9BQU9NLE1BQU1yVSxVQUNsQnFHLEdBQWN2SyxFQUFFaVksT0FBT00sTUFBTXJVLFFBQVEyRixVQUFXN0osRUFBRWlZLE9BQU9NLE1BQU1yVSxRQUFRdlIsUUFBUyxLQUFRLElBRzFGNlgsRUFBZTlGLEVBQU00Rix5QkFBMEJDLElBSWpEdEosV0FBV3FJLE1BQU0rSyxVQUFXN0osS0FHOUJrSCxFQUFRaEUsaUJBQWtCLHlCQUEwQixTQUFVMU4sR0FFNUQsR0FBSXFCLElBQ0ZFLE1BQVMsUUFDVHFSLGNBQWlCLHlCQUNqQndGLGNBQWlCLEdBR2RwWSxHQUFFaVksU0FDQWpZLEVBQUVpWSxPQUFPTSxNQUVabFgsRUFBTytXLGNBQWdCcFksRUFBRWlZLE9BQU9NLE1BQU1yVSxRQUM1QmxFLEVBQUVpWSxPQUFPL1MsTUFBUWxGLEVBQUVpWSxPQUFPL1MsS0FBS3FULFFBRXpDbFgsRUFBTytXLGNBQWdCcFksRUFBRWlZLE9BQU8vUyxLQUFLcVQsTUFBTXJVLFVBSS9DakQsV0FBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxHQUU5QnJCLEVBQUVpWSxRQUFValksRUFBRWlZLE9BQU9TLGlCQUN4QnpYLFdBQVdxSSxNQUFNK0ssVUFBVywwQkFBMEIsS0FJMUQzQyxFQUFRaEUsaUJBQWtCLDhCQUErQixXQUN2RHpNLFdBQVdxSSxNQUFNa0ssa0JBQW1CLHlCQUd0QzlCLEVBQVFPLGFBQWMsU0FBVTVRLEVBQU9xUSxRQUFRaUgsUUFDL0NqSCxFQUFRTyxhQUFjLFdBQVk1USxFQUFPcVEsUUFBUWtILFVBQ2pEbEgsRUFBUU8sYUFBYyxZQUFhNVEsRUFBT3FRLFFBQVE5UCxXQUNsRDhQLEVBQVFPLGFBQWMsWUFBYW5RLEdBQ25DNFAsRUFBUU8sYUFBYyxNQUFPOUMsT0FBT0MsYUFDcENzQyxFQUFRbUgsS0FHVixRQUFTekUsS0FDUCxHQUFJMUMsR0FBVXJLLFNBQVNpTCxjQUFlLGVBRWhDWixJQUlOQSxFQUFRbUgsS0FyTFYsR0FBSW5VLEdBQVF6RCxXQUFXQyxPQUFPaUYsVUFDNUJzUyxFQUFZeFgsV0FBV0MsT0FBT3NLLFVBQzlCME0sR0FBZSxDQXNMakIsUUFDRXRILEtBQVFBLEVBQ1J3RCxNQUFTQSxHQU1iLElBQUluVCxZQUFhQSxjQUVqQkEsWUFBV3FJLE1BQVFySSxXQUFXcUksVUFFOUJySSxXQUFXcUksTUFBTTBJLGNBQWdCLFNBQVUvUixFQUFNNkIsR0FDL0MsWUFRQSxTQUFTZ1gsR0FBWTlZLEdBQ25CLEdBQUlxVixFQUVDclYsR0FBRWlZLFNBR0FqWSxFQUFFaVksT0FBT2MsT0FDWkMsRUFBTzlxQixNQUNMb08sS0FBUTBELEVBQUVpWSxPQUFPM2IsS0FDakJrRyxJQUFPeEMsRUFBRWlZLE9BQU96VixNQUtmeEMsRUFBRWlZLE9BQU9FLFVBQ1o5QyxFQUFPanBCLEVBQUVxRixLQUFNdW5CLEVBQVEsU0FBVTNELEdBQy9CLE1BQU9BLEdBQUsvWSxPQUFTMEQsRUFBRWlZLE9BQU8zYixPQUdoQytZLEVBQUs3UyxJQUFNeEMsRUFBRWlZLE9BQU96VixLQUlqQnhDLEVBQUVpWSxPQUFPZ0IsVUFDWkQsRUFBUzVzQixFQUFFNEYsT0FBUWduQixFQUFRLFNBQVUzRCxHQUNuQyxNQUFPQSxHQUFLL1ksT0FBUzBELEVBQUVpWSxPQUFPM2IsU0FLcEMwYyxFQUFTNXNCLEVBQUV5SCxPQUFRbWxCLEVBQVEsU0FBVTNELEdBQ25DLE1BQU9BLEdBQUsvWSxLQUFLc0csZ0JBSXJCLFFBQVNzVyxHQUFnQmxaLEdBSXZCLE1BSEE4WSxHQUFZOVksR0FHUEEsRUFBRWlZLE9BQU9jLE9BQ1BJLEdBSUVILEVBQU9qdEIsT0FBUyxHQUNuQm90QixHQUFhLEVBRWI5ZixhQUFjK2YsR0FDZG5ZLFdBQVdxSSxNQUFNMkosV0FBWStGLElBRzdCSSxFQUFTemdCLFdBQVksV0FDbkJ3Z0IsR0FBYSxFQUNibFksV0FBV3FJLE1BQU0ySixXQUFZK0YsSUFDNUIsS0FHTCxXQUtDaFosRUFBRWlZLE9BQU9ycEIsZUFBZ0IsWUFBZ0JvUixFQUFFaVksT0FBT0UsU0FFL0NsWCxXQUFXcUksTUFBTXVKLG9CQU96QjVSLFdBQVdxSSxNQUFNK0osY0FBZTJGLEdBVGhDLFFBZUYsUUFBU3BJLEtBQ1AsR0FBSWMsR0FBVXJLLFNBQVNpTCxjQUFlLGVBRXRDWixHQUFRaEUsaUJBQWtCLHdCQUF5QndMLEdBRW5EeEgsRUFBUWhFLGlCQUFrQix5QkFBMEIsU0FBVTFOLEdBQzVELEdBQUlxQixJQUNGRSxNQUFTLFFBQ1RxUixjQUFpQixvQkFDakJ3RixjQUFpQixrQkFBb0JwWSxFQUFFaVksT0FBT0ksS0FBTyxjQUFnQnJZLEVBQUVpWSxPQUFPL1QsUUFHaEZqRCxZQUFXcUksTUFBTTNGLFNBQVV0QyxHQUFRLEdBQ25DSixXQUFXcUksTUFBTStLLFVBQVcsaUVBRzlCM0MsRUFBUWhFLGlCQUFrQiw0QkFBNkIsV0FDckQsR0FBSXJNLElBQ0ZFLE1BQVMsUUFDVHFSLGNBQWlCLHVCQUduQjNSLFlBQVdxSSxNQUFNM0YsU0FBVXRDLEdBQVEsR0FDbkNKLFdBQVdxSSxNQUFNK0ssVUFBVyxzREFHOUIzQyxFQUFRaEUsaUJBQWtCLHlCQUEwQixTQUFVMU4sR0FDNUQsR0FBSXFCLElBQ0ZFLE1BQVMsUUFDVHFSLGNBQWlCLCtCQUNqQndGLGNBQWlCcFksRUFBRWlZLE9BR3JCaFgsWUFBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxHQUNuQ0osV0FBV3FJLE1BQU0rSyxVQUFXLG9FQUk5QjNDLEVBQVFoRSxpQkFBa0IsOEJBQStCLFdBQ3ZELEdBQUlyTSxJQUNGRSxNQUFTLFFBQ1RxUixjQUFpQixtQ0FHbkIzUixZQUFXcUksTUFBTTNGLFNBQVV0QyxHQUFRLEdBQ25DSixXQUFXcUksTUFBTStLLFVBQVcsdUVBRzlCM0MsRUFBUWhFLGlCQUFrQixrQ0FBbUMsU0FBVTFOLEdBQ3JFLEdBQUlxQixJQUNGRSxNQUFTLFFBQ1RxUixjQUFpQiw2QkFDakJ3RixjQUFpQix3Q0FBMENwWSxFQUFFaVksT0FBT00sTUFBTUMsY0FBY3hOLE9BRzFGL0osWUFBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxLQUdyQ3FRLEVBQVFoRSxpQkFBa0Isb0NBQXFDLFdBQzdELEdBQUlyTSxJQUNGRSxNQUFTLFFBQ1RxUixjQUFpQiwrQkFHbkIzUixZQUFXcUksTUFBTTNGLFNBQVV0QyxHQUFRLEdBQ25DSixXQUFXcUksTUFBTStLLFVBQVcsOENBRzlCM0MsRUFBUWhFLGlCQUFrQixxQkFBc0IsU0FBVTFOLEdBQ3hELEdBQUlxQixJQUNGRSxNQUFTLHFCQUNUcVIsY0FBaUIsd0NBQTBDNVMsRUFBRWlZLE9BQU9NLE1BQU1DLGNBQWN4TixPQUcxRi9KLFlBQVdxSSxNQUFNM0YsU0FBVXRDLEdBQVEsR0FDbkNKLFdBQVdxSSxNQUFNK0ssVUFBVywrREFBK0QsS0FHN0YzQyxFQUFRaEUsaUJBQWtCLG1CQUFvQixTQUFVMU4sR0FDdEQsR0FLRXdLLEdBTEVuSixHQUNBRSxNQUFTLG1CQUNUcVIsY0FBaUI1UyxFQUFFaVksT0FBT00sTUFBTXJVLFNBRWxDcUcsRUFBYSxDQUdmdEosWUFBV3FJLE1BQU0zRixTQUFVdEMsR0FBUSxHQUU5Qm9YLEVBQVUzSyxjQUNidEQsRUFBZWlPLEVBQVU3SyxnQkFBaUJyRCxJQUdyQ3ZLLEVBQUVpWSxPQUFPTSxNQUFNclUsVUFDbEJxRyxHQUFjdkssRUFBRWlZLE9BQU9NLE1BQU1yVSxRQUFRMkYsVUFBVzdKLEVBQUVpWSxPQUFPTSxNQUFNclUsUUFBUXZSLFFBQVMsS0FBUSxJQUcxRjZYLEVBQWU5RixFQUFNNEYseUJBQTBCQyxJQUdqRHRKLFdBQVdxSSxNQUFNK0ssVUFBVzdKLEtBRzlCa0gsRUFBUWhFLGlCQUFrQix5QkFBMEIsU0FBVTFOLEdBRTVELEdBQUlxQixJQUNGRSxNQUFTLFFBQ1RxUixjQUFpQix5QkFDakJ3RixjQUFpQixHQUdkcFksR0FBRWlZLFNBQ0FqWSxFQUFFaVksT0FBT00sTUFFWmxYLEVBQU8rVyxjQUFnQnBZLEVBQUVpWSxPQUFPTSxNQUFNclUsUUFDNUJsRSxFQUFFaVksT0FBTy9TLE1BQVFsRixFQUFFaVksT0FBTy9TLEtBQUtxVCxRQUV6Q2xYLEVBQU8rVyxjQUFnQnBZLEVBQUVpWSxPQUFPL1MsS0FBS3FULE1BQU1yVSxVQUkvQ2pELFdBQVdxSSxNQUFNM0YsU0FBVXRDLEdBQVEsR0FFOUJyQixFQUFFaVksUUFBVWpZLEVBQUVpWSxPQUFPUyxpQkFDeEJ6WCxXQUFXcUksTUFBTStLLFVBQVcsMEJBQTBCLEtBSTFEM0MsRUFBUU8sYUFBYyxXQUFZLFNBQ2xDUCxFQUFRTyxhQUFjLFlBQWFoUyxFQUFLeVIsUUFBUTlQLFdBQ2hEOFAsRUFBUU8sYUFBYyxZQUFhblEsR0FDbkM0UCxFQUFRTyxhQUFjLFNBQVVoUyxFQUFLeVIsUUFBUWlILFFBQzdDakgsRUFBUU8sYUFBYyxNQUFPOUMsT0FBT0MsYUFFcENzQyxFQUFRbUgsS0F4TlYsR0FBSW5VLEdBQVF6RCxXQUFXQyxPQUFPaUYsVUFDNUJzUyxFQUFZeFgsV0FBV0MsT0FBT3NLLFVBQzlCMk4sR0FBYSxFQUNiSCxLQUNBSSxFQUFTLElBdU5YLFFBQ0V4SSxLQUFRQSxHQUlaLElBQUkzUCxZQUFhQSxjQUVqQkEsWUFBV3FJLE1BQVFySSxXQUFXcUksVUFFOUJySSxXQUFXcUksTUFBTXlJLFdBQWEsU0FBVTlSLEdBQ3RDLFlBVUEsU0FBU29aLEdBQVVDLEdBQ2pCLEdBQUlqWSxFQUVKb1gsR0FBVWxNLFFBQVNnTixFQUFNLFNBQVVwVSxFQUFVb1QsR0FDM0MsR0FDRS9OLEdBREVELEVBQWEsQ0FHWGdPLEdBZ0JDQSxFQUFNclUsU0FBNkIsd0JBQWxCcVUsRUFBTXJVLFFBQzFCakQsV0FBV3FJLE1BQU1rSyxrQkFBbUIrRSxFQUFNclUsVUFJMUM3QyxHQUNFRSxNQUFTLFFBQ1RxUixjQUFpQixvQkFDakJ3RixjQUFpQkcsRUFBTXJVLFFBQ3ZCMUMsU0FBWTJELEVBQVMzQyxLQUd2QnZCLFdBQVdxSSxNQUFNM0YsU0FBVXRDLEdBQVEsR0FFOUJvWCxFQUFVM0ssY0FDYnRELEVBQWVpTyxFQUFVN0ssZ0JBQWlCckQsSUFHckNnTyxFQUFNclUsVUFDVHFHLEdBQWNnTyxFQUFNclUsUUFBUTJGLFVBQVcwTyxFQUFNclUsUUFBUXZSLFFBQVMsS0FBUSxJQUd4RTZYLEVBQWU5RixFQUFNNEYseUJBQTBCQyxJQUdqRHRKLFdBQVdxSSxNQUFNK0ssVUFBVzdKLElBdkN6QjJPLEdBQ0hBLEdBQWEsRUFFYmxZLFdBQVdxSSxNQUFNMkosV0FBWTlOLEVBQVMzQyxLQUd0Q2dYLEtBR0F2WSxXQUFXcUksTUFBTStKLGNBQWVsTyxFQUFTM0MsTUFpQzVDOFcsR0FHTCxRQUFTRSxLQUNxQixPQUF2QkMsSUFDSEEsRUFBcUJDLFlBQWEsV0FDaENMLEdBQVUsSUFDVE0sSUFPUCxRQUFTL0ksS0FFUDJJLEVBQVN0WixFQUFLdUMsS0FBb0IsS0FBYnZDLEVBQUt1QyxJQUFldkMsRUFBS3VDLElBQU12QyxFQUFLMlosU0FBU3BYLElBRWxFK1csRUFBTzdVLEVBQU00RyxZQUFhaU8sR0FFMUJGLEdBQVUsR0EvRVosR0FBSVosR0FBWXhYLFdBQVdDLE9BQU9zSyxVQUNoQzlHLEVBQVF6RCxXQUFXQyxPQUFPaUYsVUFFMUJ3VCxFQUFtQixJQUNuQkYsRUFBcUIsS0FDckJOLEdBQWEsRUFDYkksRUFBTyxFQTRFVCxRQUNFM0ksS0FBUUEsR0FJWixJQUFJM1AsWUFBYUEsY0FFakJBLFlBQVdxSSxNQUFRckksV0FBV3FJLFVBRTlCckksV0FBV3FJLE1BQU1xSCxpQkFBbUIsV0FDbEMsWUFPQSxTQUFTa0osR0FBb0IzVixHQUMzQixHQUFJNFYsR0FBVTVWLEVBQVE0VixPQUVoQkMsS0FDQ0QsRUFBUXhuQixTQUFVLGtCQUVyQjJPLFdBQVdxSSxNQUFNM0YsVUFDZnBDLE1BQVMsZ0JBQ1RDLFNBQVl3WSxJQUlkQyxFQUFTeEwsa0JBQ1BNLE1BQVMsUUFDVGhFLFNBQVlpUCxJQUdkRCxHQUEwQixHQUcxQjlZLFdBQVdxSSxNQUFNM0YsVUFDZnBDLE1BQVMsb0JBQ1RDLFNBQVl3WSxLQU1wQixRQUFTRSxHQUFvQmhXLEdBQzNCLEdBQUlpVyxHQUFVLElBRVJqVyxHQUFRNkcsVUFBWTdHLEVBQVE2RyxXQUFhaVAsSUFLL0MvWSxXQUFXcUksTUFBTTNGLFVBQ2ZwQyxNQUFTLHlCQUNUcVIsY0FBaUJ2UCxLQUFLRSxVQUFXVyxHQUNqQzFDLFNBQVkwQyxFQUFRNkcsWUFJaEJxUCxHQUEwQmxXLEVBQVE4RyxRQUE2QixZQUFuQjlHLEVBQVE4RyxTQUN4RG1QLEVBQVUsR0FBSTdRLE9BRWQ2USxFQUFRL0gsT0FBUyxXQUNmblIsV0FBV3FJLE1BQU0zRixVQUNmcEMsTUFBUyxvQkFDVEMsU0FBWTBDLEVBQVFtVyxVQUl4QkYsRUFBUXhILFFBQVUsU0FBVXZPLEdBQzFCbkQsV0FBV3FJLE1BQU0zRixVQUNmcEMsTUFBUyx5QkFDVHFSLGNBQWlCdlAsS0FBS0UsVUFBV2EsR0FDakM1QyxTQUFZMEMsRUFBUW1XLFVBSXhCcFosV0FBV3FJLE1BQU0zRixVQUNmcEMsTUFBUywwQkFDVEMsU0FBWTBDLEVBQVFtVyxTQUd0QkYsRUFBUW5SLElBQU0sVUFBWTlFLEVBQVFtVyxPQUNsQ0QsR0FBeUIsSUFJN0IsUUFBU0UsR0FBbUJwVyxHQUMxQmpELFdBQVdxSSxNQUFNM0YsVUFDZnBDLE1BQVMsd0JBQ1RxUixjQUFpQnZQLEtBQUtFLFVBQVdXLEdBQ2pDMUMsU0FBWTBDLEVBQVE2RyxXQUl4QixRQUFTNkYsS0FDRnFKLEVBQVN0TCxlQUVac0wsRUFBU2pMLGdCQUFpQixTQUFVOUssR0FDbEMsSUFBTUEsSUFBWUEsRUFBUTZLLE1BT3hCLE1BTkE5TixZQUFXcUksTUFBTTNGLFVBQ2ZwQyxNQUFTLCtCQUNUcVIsY0FBaUJ2UCxLQUFLRSxVQUFXVyxHQUNqQzFDLFNBQVl3WSxJQUdkLE1BR0YsUUFBUzlWLEVBQVE2SyxNQUFNdkwsZUFDdkIsSUFBSyxjQUNILE1BQU9xVyxHQUFvQjNWLEVBQzdCLEtBQUssY0FDSCxNQUFPZ1csR0FBb0JoVyxFQUM3QixLQUFLLGFBQ0gsTUFBT29XLEdBQW1CcFcsTUFJOUIrVixFQUFTbkwsdUJBNUdiLEdBQUltTCxHQUFXaFosV0FBV0MsT0FBT3NOLFNBQy9Cd0wsRUFBZSxrQ0FDZkQsR0FBMEIsRUFDMUJLLEdBQXlCLENBNkczQixRQUNFeEosS0FBUUEsSUFLWixTQUFZbEgsRUFBUXJDLEVBQVVrSSxHQUM1QixZQVlBLFNBQVNnTCxHQUFXN2YsRUFBT2hJLEdBQ3pCLEdBQUlnaEIsR0FDRjhHLEVBQ0E1WSxFQUFZLEdBQ1pFLEVBQVksRUFFVHZULE9BQU1PLFFBQVM0TCxJQUFXQSxFQUFNM08sT0FBUyxHQUFLd0MsTUFBTU8sUUFBUzRELElBQVlBLEVBQU8zRyxPQUFTLElBRXhFLGNBQWYyTyxFQUFPLEtBQ1ZrSCxFQUFZbFAsRUFBUSxJQUlGLGNBQWZnSSxFQUFPLEtBRVJvSCxFQURHcFAsRUFBUSxHQUNDQSxFQUFRLEdBRVIsV0FLaEJ1TyxXQUFXQyxPQUFPQyxZQUFZbUQsT0FBUTFDLEVBQVdFLEdBQ2pEYixXQUFXQyxPQUFPQyxZQUFZc0QsV0FBWTFDLFNBR3RCLHFCQUFmckgsRUFBTyxLQUNWZ1osRUFBbUJyUSxLQUFLQyxNQUFPNVEsRUFBUSxJQVNuQzhuQixFQVBvRCxJQUFuRGhzQixPQUFPM0MsS0FBTTZuQixFQUFpQmhDLFNBQVUzbEIsT0FFckMybkIsRUFBaUJoQyxRQUFRa0gsU0FLdEIsT0FIQSxTQU9GLE9BR1QzWCxXQUFXcUksTUFBTW1LLG9CQUFxQkMsRUFBa0I4RyxFQUFNMVksS0FLcEUsUUFBU29TLEtBQ1BqVCxXQUFXcUksTUFBTTRLLFFBR25CLFFBQVNGLEtBQ1AvUyxXQUFXcUksTUFBTTBLLE9BR25CLFFBQVMzYyxLQUNQNEosV0FBV3FJLE1BQU1qUyxPQUduQixRQUFTdVosS0FDRi9SLEdBQWEsS0FBUEEsSUFDVDBRLEVBQVFFLElBQUlnTCxTQUFVLGNBQWdCNWIsRUFBSW1WLEdBQzFDekUsRUFBUUUsSUFBSWdMLFNBQVUsZUFBaUI1YixFQUFJcVYsR0FDM0MzRSxFQUFRRSxJQUFJZ0wsU0FBVSxjQUFnQjViLEVBQUl4SCxHQUMxQ2tZLEVBQVFFLElBQUlnTCxTQUFVLGVBQWlCNWIsRUFBSTBiLEdBQzNDaEwsRUFBUUUsSUFBSXBpQixLQUFNLEdBQUksY0FBZSxLQUFNd1IsR0FBTSxZQUFhLFlBQWEsc0JBNUUvRSxHQUFJQSxJQUFLLEdBQUkwUSxHQUFRaUYsT0FBUTdFLFVBQVcsS0FFeENqRyxHQUFPZ1IsY0FBZ0IsV0FDckIsT0FBTyxHQUdUclQsRUFBUzZCLEtBQUt5UixZQUFjLFdBQzFCLE9BQU8sR0EwRVQxWixXQUFXQyxPQUFPc0ssVUFBVXVDLGFBQWMsU0FBVTZNLEdBU2xELFFBQVNDLEtBQ1BuUixFQUFPb1Isb0JBQXFCLHFCQUFzQkQsR0FDbERFLEdBQWUsRUFFVkMsR0FBZ0JELEdBQ25CbkssSUFJSixRQUFTcUssS0FDUHZKLEVBQVFvSixvQkFBcUIscUJBQXNCRyxHQUNuREQsR0FBZSxFQUVWQSxHQUFnQkQsR0FDbkJuSyxJQXRCSixHQUFJSSxHQUFXM0osRUFBUzRKLHlCQUN0QmlLLEVBQU83VCxFQUFTQyxjQUFlLFFBQy9CNlQsRUFBZ0I5VCxFQUFTQyxjQUFlLFVBQ3hDOFQsRUFBT2pNLE9BQU9FLGlCQUFvQixFQUFXLGtCQUFvQixnQkFBbUIscUJBQ3BGcUMsRUFBVXJLLEVBQVNDLGNBQWUsZ0JBQ2xDMFQsR0FBZSxFQUNmRCxHQUFlLENBb0JqQkksR0FBY25TLElBQU1tRyxPQUFPRSxnQkFBa0IsNENBQzdDM0YsRUFBT2dFLGlCQUFrQixxQkFBc0JtTixHQUcvQ3hULEVBQVNnVSxxQkFBc0IsUUFBVSxHQUFJOVQsWUFBYTRULEdBRTFERCxFQUFLakosYUFBYyxNQUFPLFVBQzFCaUosRUFBS2pKLGFBQWMsT0FBUW1KLEdBRzNCL1QsRUFBU2dVLHFCQUFzQixRQUFVLEdBQUk5VCxZQUFhMlQsR0FFMUR4SixFQUFRTyxhQUFjLFVBQVcsR0FFNUIySSxHQUNIbEosRUFBUU8sYUFBYyxRQUFTLFVBR2pDUCxFQUFRaEUsaUJBQWtCLHFCQUFzQnVOLEdBQ2hEakssRUFBU3pKLFlBQWFtSyxHQUd0QnJLLEVBQVM2QixLQUFLM0IsWUFBYXlKLE1BRzFCdEgsT0FBUXJDLFNBQVVrSSxRQUd2QixJQUFJK0wsTUFBT0EsUUFFWEEsTUFBS3B0QixNQUFNLGNBQWUsa0JBQzFCb3RCLEtBQUtwdEIsTUFBTSxtQkFFWCxXQUNFLEdBQUlxdEIsR0FBS2xVLFNBQVNDLGNBQWMsU0FBV2lVLEdBQUdsZixLQUFPLGtCQUFtQmtmLEVBQUdDLE9BQVEsRUFDbkZELEVBQUd2UyxLQUFPLFVBQVkzQixTQUFTc0MsU0FBUzhSLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUlyVSxTQUFTZ1UscUJBQXFCLFVBQVUsRUFBSUssR0FBRUMsV0FBV0MsYUFBYUwsRUFBSUciLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vICAgICBVbmRlcnNjb3JlLmpzIDEuOC4zXG4vLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmdcbi8vICAgICAoYykgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4vLyAgICAgVW5kZXJzY29yZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuKGZ1bmN0aW9uKCkge1xuXG4gIC8vIEJhc2VsaW5lIHNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgaW4gdGhlIGJyb3dzZXIsIG9yIGBleHBvcnRzYCBvbiB0aGUgc2VydmVyLlxuICB2YXIgcm9vdCA9IHRoaXM7XG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS5cbiAgdmFyIHByZXZpb3VzVW5kZXJzY29yZSA9IHJvb3QuXztcblxuICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5cbiAgLy8gQ3JlYXRlIHF1aWNrIHJlZmVyZW5jZSB2YXJpYWJsZXMgZm9yIHNwZWVkIGFjY2VzcyB0byBjb3JlIHByb3RvdHlwZXMuXG4gIHZhclxuICAgIHB1c2ggICAgICAgICAgICAgPSBBcnJheVByb3RvLnB1c2gsXG4gICAgc2xpY2UgICAgICAgICAgICA9IEFycmF5UHJvdG8uc2xpY2UsXG4gICAgdG9TdHJpbmcgICAgICAgICA9IE9ialByb3RvLnRvU3RyaW5nLFxuICAgIGhhc093blByb3BlcnR5ICAgPSBPYmpQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuICAvLyBBbGwgKipFQ01BU2NyaXB0IDUqKiBuYXRpdmUgZnVuY3Rpb24gaW1wbGVtZW50YXRpb25zIHRoYXQgd2UgaG9wZSB0byB1c2VcbiAgLy8gYXJlIGRlY2xhcmVkIGhlcmUuXG4gIHZhclxuICAgIG5hdGl2ZUlzQXJyYXkgICAgICA9IEFycmF5LmlzQXJyYXksXG4gICAgbmF0aXZlS2V5cyAgICAgICAgID0gT2JqZWN0LmtleXMsXG4gICAgbmF0aXZlQmluZCAgICAgICAgID0gRnVuY1Byb3RvLmJpbmQsXG4gICAgbmF0aXZlQ3JlYXRlICAgICAgID0gT2JqZWN0LmNyZWF0ZTtcblxuICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuXG4gIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBfKSByZXR1cm4gb2JqO1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBfKSkgcmV0dXJuIG5ldyBfKG9iaik7XG4gICAgdGhpcy5fd3JhcHBlZCA9IG9iajtcbiAgfTtcblxuICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlIG9sZCBgcmVxdWlyZSgpYCBBUEkuIElmIHdlJ3JlIGluXG4gIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdC5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gXztcbiAgICB9XG4gICAgZXhwb3J0cy5fID0gXztcbiAgfSBlbHNlIHtcbiAgICByb290Ll8gPSBfO1xuICB9XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uLlxuICBfLlZFUlNJT04gPSAnMS44LjMnO1xuXG4gIC8vIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBlZmZpY2llbnQgKGZvciBjdXJyZW50IGVuZ2luZXMpIHZlcnNpb25cbiAgLy8gb2YgdGhlIHBhc3NlZC1pbiBjYWxsYmFjaywgdG8gYmUgcmVwZWF0ZWRseSBhcHBsaWVkIGluIG90aGVyIFVuZGVyc2NvcmVcbiAgLy8gZnVuY3Rpb25zLlxuICB2YXIgb3B0aW1pemVDYiA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgcmV0dXJuIGZ1bmM7XG4gICAgc3dpdGNoIChhcmdDb3VudCA9PSBudWxsID8gMyA6IGFyZ0NvdW50KSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgb3RoZXIpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9O1xuICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEEgbW9zdGx5LWludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkXG4gIC8vIHRvIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlclxuICAvLyBpZGVudGl0eSwgYW4gYXJiaXRyYXJ5IGNhbGxiYWNrLCBhIHByb3BlcnR5IG1hdGNoZXIsIG9yIGEgcHJvcGVydHkgYWNjZXNzb3IuXG4gIHZhciBjYiA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuIG9wdGltaXplQ2IodmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KTtcbiAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkpIHJldHVybiBfLm1hdGNoZXIodmFsdWUpO1xuICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTtcbiAgfTtcbiAgXy5pdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGNiKHZhbHVlLCBjb250ZXh0LCBJbmZpbml0eSk7XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFzc2lnbmVyIGZ1bmN0aW9ucy5cbiAgdmFyIGNyZWF0ZUFzc2lnbmVyID0gZnVuY3Rpb24oa2V5c0Z1bmMsIHVuZGVmaW5lZE9ubHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggPCAyIHx8IG9iaiA9PSBudWxsKSByZXR1cm4gb2JqO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSxcbiAgICAgICAgICAgIGtleXMgPSBrZXlzRnVuYyhzb3VyY2UpLFxuICAgICAgICAgICAgbCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmICghdW5kZWZpbmVkT25seSB8fCBvYmpba2V5XSA9PT0gdm9pZCAwKSBvYmpba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci5cbiAgdmFyIGJhc2VDcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9O1xuICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtcbiAgICBDdG9yLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIHByb3BlcnR5ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW2tleV07XG4gICAgfTtcbiAgfTtcblxuICAvLyBIZWxwZXIgZm9yIGNvbGxlY3Rpb24gbWV0aG9kcyB0byBkZXRlcm1pbmUgd2hldGhlciBhIGNvbGxlY3Rpb25cbiAgLy8gc2hvdWxkIGJlIGl0ZXJhdGVkIGFzIGFuIGFycmF5IG9yIGFzIGFuIG9iamVjdFxuICAvLyBSZWxhdGVkOiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aFxuICAvLyBBdm9pZHMgYSB2ZXJ5IG5hc3R5IGlPUyA4IEpJVCBidWcgb24gQVJNLTY0LiAjMjA5NFxuICB2YXIgTUFYX0FSUkFZX0lOREVYID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcbiAgdmFyIGdldExlbmd0aCA9IHByb3BlcnR5KCdsZW5ndGgnKTtcbiAgdmFyIGlzQXJyYXlMaWtlID0gZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoY29sbGVjdGlvbik7XG4gICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID49IDAgJiYgbGVuZ3RoIDw9IE1BWF9BUlJBWV9JTkRFWDtcbiAgfTtcblxuICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuICAvLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsXG4gIC8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuXG4gIF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBpLCBsZW5ndGg7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpbaV0sIGksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtrZXlzW2ldXSwga2V5c1tpXSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudC5cbiAgXy5tYXAgPSBfLmNvbGxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdHMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICByZXN1bHRzW2luZGV4XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpIHtcbiAgICAvLyBPcHRpbWl6ZWQgaXRlcmF0b3IgZnVuY3Rpb24gYXMgdXNpbmcgYXJndW1lbnRzLmxlbmd0aFxuICAgIC8vIGluIHRoZSBtYWluIGZ1bmN0aW9uIHdpbGwgZGVvcHRpbWl6ZSB0aGUsIHNlZSAjMTk5MS5cbiAgICBmdW5jdGlvbiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKSB7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICAgIG1lbW8gPSBpdGVyYXRlZShtZW1vLCBvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgY29udGV4dCkge1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCA0KTtcbiAgICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgICAgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIGluaXRpYWwgdmFsdWUgaWYgbm9uZSBpcyBwcm92aWRlZC5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykge1xuICAgICAgICBtZW1vID0gb2JqW2tleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4XTtcbiAgICAgICAgaW5kZXggKz0gZGlyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpO1xuICAgIH07XG4gIH1cblxuICAvLyAqKlJlZHVjZSoqIGJ1aWxkcyB1cCBhIHNpbmdsZSByZXN1bHQgZnJvbSBhIGxpc3Qgb2YgdmFsdWVzLCBha2EgYGluamVjdGAsXG4gIC8vIG9yIGBmb2xkbGAuXG4gIF8ucmVkdWNlID0gXy5mb2xkbCA9IF8uaW5qZWN0ID0gY3JlYXRlUmVkdWNlKDEpO1xuXG4gIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLlxuICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGNyZWF0ZVJlZHVjZSgtMSk7XG5cbiAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLlxuICBfLmZpbmQgPSBfLmRldGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIGtleTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAga2V5ID0gXy5maW5kSW5kZXgob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXkgPSBfLmZpbmRLZXkob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpZiAoa2V5ICE9PSB2b2lkIDAgJiYga2V5ICE9PSAtMSkgcmV0dXJuIG9ialtrZXldO1xuICB9O1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIHRoYXQgcGFzcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYHNlbGVjdGAuXG4gIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBsaXN0KSkgcmVzdWx0cy5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggYSB0cnV0aCB0ZXN0IGZhaWxzLlxuICBfLnJlamVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5uZWdhdGUoY2IocHJlZGljYXRlKSksIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBhbGxgLlxuICBfLmV2ZXJ5ID0gXy5hbGwgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIGlmICghcHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIG9iamVjdCBtYXRjaGVzIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYW55YC5cbiAgXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiB0aGUgYXJyYXkgb3Igb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gaXRlbSAodXNpbmcgYD09PWApLlxuICAvLyBBbGlhc2VkIGFzIGBpbmNsdWRlc2AgYW5kIGBpbmNsdWRlYC5cbiAgXy5jb250YWlucyA9IF8uaW5jbHVkZXMgPSBfLmluY2x1ZGUgPSBmdW5jdGlvbihvYmosIGl0ZW0sIGZyb21JbmRleCwgZ3VhcmQpIHtcbiAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggIT0gJ251bWJlcicgfHwgZ3VhcmQpIGZyb21JbmRleCA9IDA7XG4gICAgcmV0dXJuIF8uaW5kZXhPZihvYmosIGl0ZW0sIGZyb21JbmRleCkgPj0gMDtcbiAgfTtcblxuICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi5cbiAgXy5pbnZva2UgPSBmdW5jdGlvbihvYmosIG1ldGhvZCkge1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBpc0Z1bmMgPSBfLmlzRnVuY3Rpb24obWV0aG9kKTtcbiAgICByZXR1cm4gXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGZ1bmMgPSBpc0Z1bmMgPyBtZXRob2QgOiB2YWx1ZVttZXRob2RdO1xuICAgICAgcmV0dXJuIGZ1bmMgPT0gbnVsbCA/IGZ1bmMgOiBmdW5jLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBtYXBgOiBmZXRjaGluZyBhIHByb3BlcnR5LlxuICBfLnBsdWNrID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gXy5tYXAob2JqLCBfLnByb3BlcnR5KGtleSkpO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbHRlcmA6IHNlbGVjdGluZyBvbmx5IG9iamVjdHNcbiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy53aGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaW5kYDogZ2V0dGluZyB0aGUgZmlyc3Qgb2JqZWN0XG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uZmluZFdoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuICAgIHJldHVybiBfLmZpbmQob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1heGltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWF4ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSAtSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IC1JbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA+IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkID4gbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSAtSW5maW5pdHkgJiYgcmVzdWx0ID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlIDwgcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gU2h1ZmZsZSBhIGNvbGxlY3Rpb24sIHVzaW5nIHRoZSBtb2Rlcm4gdmVyc2lvbiBvZiB0aGVcbiAgLy8gW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlcuKAk1lhdGVzX3NodWZmbGUpLlxuICBfLnNodWZmbGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgc2V0ID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IHNldC5sZW5ndGg7XG4gICAgdmFyIHNodWZmbGVkID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDAsIHJhbmQ7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICByYW5kID0gXy5yYW5kb20oMCwgaW5kZXgpO1xuICAgICAgaWYgKHJhbmQgIT09IGluZGV4KSBzaHVmZmxlZFtpbmRleF0gPSBzaHVmZmxlZFtyYW5kXTtcbiAgICAgIHNodWZmbGVkW3JhbmRdID0gc2V0W2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIHNodWZmbGVkO1xuICB9O1xuXG4gIC8vIFNhbXBsZSAqKm4qKiByYW5kb20gdmFsdWVzIGZyb20gYSBjb2xsZWN0aW9uLlxuICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LlxuICAvLyBUaGUgaW50ZXJuYWwgYGd1YXJkYCBhcmd1bWVudCBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBtYXBgLlxuICBfLnNhbXBsZSA9IGZ1bmN0aW9uKG9iaiwgbiwgZ3VhcmQpIHtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG4gICAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgICByZXR1cm4gb2JqW18ucmFuZG9tKG9iai5sZW5ndGggLSAxKV07XG4gICAgfVxuICAgIHJldHVybiBfLnNodWZmbGUob2JqKS5zbGljZSgwLCBNYXRoLm1heCgwLCBuKSk7XG4gIH07XG5cbiAgLy8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdGVlLlxuICBfLnNvcnRCeSA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIGNyaXRlcmlhOiBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpXG4gICAgICB9O1xuICAgIH0pLnNvcnQoZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICAgIHZhciBhID0gbGVmdC5jcml0ZXJpYTtcbiAgICAgIHZhciBiID0gcmlnaHQuY3JpdGVyaWE7XG4gICAgICBpZiAoYSAhPT0gYikge1xuICAgICAgICBpZiAoYSA+IGIgfHwgYSA9PT0gdm9pZCAwKSByZXR1cm4gMTtcbiAgICAgICAgaWYgKGEgPCBiIHx8IGIgPT09IHZvaWQgMCkgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxlZnQuaW5kZXggLSByaWdodC5pbmRleDtcbiAgICB9KSwgJ3ZhbHVlJyk7XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gdXNlZCBmb3IgYWdncmVnYXRlIFwiZ3JvdXAgYnlcIiBvcGVyYXRpb25zLlxuICB2YXIgZ3JvdXAgPSBmdW5jdGlvbihiZWhhdmlvcikge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopO1xuICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi5cbiAgXy5ncm91cEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7IGVsc2UgcmVzdWx0W2tleV0gPSBbdmFsdWVdO1xuICB9KTtcblxuICAvLyBJbmRleGVzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24sIHNpbWlsYXIgdG8gYGdyb3VwQnlgLCBidXQgZm9yXG4gIC8vIHdoZW4geW91IGtub3cgdGhhdCB5b3VyIGluZGV4IHZhbHVlcyB3aWxsIGJlIHVuaXF1ZS5cbiAgXy5pbmRleEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfSk7XG5cbiAgLy8gQ291bnRzIGluc3RhbmNlcyBvZiBhbiBvYmplY3QgdGhhdCBncm91cCBieSBhIGNlcnRhaW4gY3JpdGVyaW9uLiBQYXNzXG4gIC8vIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUgdG8gY291bnQgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAvLyBjcml0ZXJpb24uXG4gIF8uY291bnRCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldKys7IGVsc2UgcmVzdWx0W2tleV0gPSAxO1xuICB9KTtcblxuICAvLyBTYWZlbHkgY3JlYXRlIGEgcmVhbCwgbGl2ZSBhcnJheSBmcm9tIGFueXRoaW5nIGl0ZXJhYmxlLlxuICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIW9iaikgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSkgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7XG4gICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwO1xuICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDtcbiAgfTtcblxuICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuXG4gIC8vIHByZWRpY2F0ZSwgYW5kIG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgZG8gbm90IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAgXy5wYXJ0aXRpb24gPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIHBhc3MgPSBbXSwgZmFpbCA9IFtdO1xuICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikge1xuICAgICAgKHByZWRpY2F0ZSh2YWx1ZSwga2V5LCBvYmopID8gcGFzcyA6IGZhaWwpLnB1c2godmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBbcGFzcywgZmFpbF07XG4gIH07XG5cbiAgLy8gQXJyYXkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgZmlyc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrXG4gIC8vIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC5cbiAgXy5maXJzdCA9IF8uaGVhZCA9IF8udGFrZSA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVswXTtcbiAgICByZXR1cm4gXy5pbml0aWFsKGFycmF5LCBhcnJheS5sZW5ndGggLSBuKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS4gRXNwZWNpYWxseSB1c2VmdWwgb25cbiAgLy8gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gYWxsIHRoZSB2YWx1ZXMgaW5cbiAgLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi5cbiAgXy5pbml0aWFsID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIDAsIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIChuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbikpKTtcbiAgfTtcblxuICAvLyBHZXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgbGFzdCBOXG4gIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ubGFzdCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLlxuICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVyblxuICAvLyB0aGUgcmVzdCBOIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7XG4gIH07XG5cbiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuICBfLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgXy5pZGVudGl0eSk7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLlxuICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBzdHJpY3QsIHN0YXJ0SW5kZXgpIHtcbiAgICB2YXIgb3V0cHV0ID0gW10sIGlkeCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXggfHwgMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGlucHV0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpbnB1dFtpXTtcbiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgIC8vZmxhdHRlbiBjdXJyZW50IGxldmVsIG9mIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3RcbiAgICAgICAgaWYgKCFzaGFsbG93KSB2YWx1ZSA9IGZsYXR0ZW4odmFsdWUsIHNoYWxsb3csIHN0cmljdCk7XG4gICAgICAgIHZhciBqID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICBvdXRwdXQubGVuZ3RoICs9IGxlbjtcbiAgICAgICAgd2hpbGUgKGogPCBsZW4pIHtcbiAgICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWVbaisrXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7XG4gICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBGbGF0dGVuIG91dCBhbiBhcnJheSwgZWl0aGVyIHJlY3Vyc2l2ZWx5IChieSBkZWZhdWx0KSwgb3IganVzdCBvbmUgbGV2ZWwuXG4gIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cbiAgXy53aXRob3V0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG4gIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cbiAgLy8gQWxpYXNlZCBhcyBgdW5pcXVlYC5cbiAgXy51bmlxID0gXy51bmlxdWUgPSBmdW5jdGlvbihhcnJheSwgaXNTb3J0ZWQsIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKCFfLmlzQm9vbGVhbihpc1NvcnRlZCkpIHtcbiAgICAgIGNvbnRleHQgPSBpdGVyYXRlZTtcbiAgICAgIGl0ZXJhdGVlID0gaXNTb3J0ZWQ7XG4gICAgICBpc1NvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaXRlcmF0ZWUgIT0gbnVsbCkgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBzZWVuID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaV0sXG4gICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSA/IGl0ZXJhdGVlKHZhbHVlLCBpLCBhcnJheSkgOiB2YWx1ZTtcbiAgICAgIGlmIChpc1NvcnRlZCkge1xuICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgfSBlbHNlIGlmIChpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7XG4gICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIV8uY29udGFpbnMocmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cbiAgXy51bmlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuaXEoZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlXG4gIC8vIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gYXJyYXlbaV07XG4gICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTtcbiAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgYXJnc0xlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhhcmd1bWVudHNbal0sIGl0ZW0pKSBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChqID09PSBhcmdzTGVuZ3RoKSByZXN1bHQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBUYWtlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gb25lIGFycmF5IGFuZCBhIG51bWJlciBvZiBvdGhlciBhcnJheXMuXG4gIC8vIE9ubHkgdGhlIGVsZW1lbnRzIHByZXNlbnQgaW4ganVzdCB0aGUgZmlyc3QgYXJyYXkgd2lsbCByZW1haW4uXG4gIF8uZGlmZmVyZW5jZSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3QgPSBmbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSwgMSk7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmVcbiAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuXG4gIF8uemlwID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIF8udW56aXAoYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDb21wbGVtZW50IG9mIF8uemlwLiBVbnppcCBhY2NlcHRzIGFuIGFycmF5IG9mIGFycmF5cyBhbmQgZ3JvdXBzXG4gIC8vIGVhY2ggYXJyYXkncyBlbGVtZW50cyBvbiBzaGFyZWQgaW5kaWNlc1xuICBfLnVuemlwID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgJiYgXy5tYXgoYXJyYXksIGdldExlbmd0aCkubGVuZ3RoIHx8IDA7XG4gICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICByZXN1bHRbaW5kZXhdID0gXy5wbHVjayhhcnJheSwgaW5kZXgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENvbnZlcnRzIGxpc3RzIGludG8gb2JqZWN0cy4gUGFzcyBlaXRoZXIgYSBzaW5nbGUgYXJyYXkgb2YgYFtrZXksIHZhbHVlXWBcbiAgLy8gcGFpcnMsIG9yIHR3byBwYXJhbGxlbCBhcnJheXMgb2YgdGhlIHNhbWUgbGVuZ3RoIC0tIG9uZSBvZiBrZXlzLCBhbmQgb25lIG9mXG4gIC8vIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlcy5cbiAgXy5vYmplY3QgPSBmdW5jdGlvbihsaXN0LCB2YWx1ZXMpIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChsaXN0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgIHJlc3VsdFtsaXN0W2ldXSA9IHZhbHVlc1tpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtsaXN0W2ldWzBdXSA9IGxpc3RbaV1bMV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZmluZEluZGV4IGFuZCBmaW5kTGFzdEluZGV4IGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcihkaXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgdmFyIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBvbiBhbiBhcnJheS1saWtlIHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kSW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigxKTtcbiAgXy5maW5kTGFzdEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoLTEpO1xuXG4gIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2hcbiAgLy8gYW4gb2JqZWN0IHNob3VsZCBiZSBpbnNlcnRlZCBzbyBhcyB0byBtYWludGFpbiBvcmRlci4gVXNlcyBiaW5hcnkgc2VhcmNoLlxuICBfLnNvcnRlZEluZGV4ID0gZnVuY3Rpb24oYXJyYXksIG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICB2YXIgdmFsdWUgPSBpdGVyYXRlZShvYmopO1xuICAgIHZhciBsb3cgPSAwLCBoaWdoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgdmFyIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMik7XG4gICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbbWlkXSkgPCB2YWx1ZSkgbG93ID0gbWlkICsgMTsgZWxzZSBoaWdoID0gbWlkO1xuICAgIH1cbiAgICByZXR1cm4gbG93O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGluZGV4T2YgYW5kIGxhc3RJbmRleE9mIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBjcmVhdGVJbmRleEZpbmRlcihkaXIsIHByZWRpY2F0ZUZpbmQsIHNvcnRlZEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBpZHgpIHtcbiAgICAgIHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIGlmICh0eXBlb2YgaWR4ID09ICdudW1iZXInKSB7XG4gICAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICBpID0gaWR4ID49IDAgPyBpZHggOiBNYXRoLm1heChpZHggKyBsZW5ndGgsIGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGVuZ3RoID0gaWR4ID49IDAgPyBNYXRoLm1pbihpZHggKyAxLCBsZW5ndGgpIDogaWR4ICsgbGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzb3J0ZWRJbmRleCAmJiBpZHggJiYgbGVuZ3RoKSB7XG4gICAgICAgIGlkeCA9IHNvcnRlZEluZGV4KGFycmF5LCBpdGVtKTtcbiAgICAgICAgcmV0dXJuIGFycmF5W2lkeF0gPT09IGl0ZW0gPyBpZHggOiAtMTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtICE9PSBpdGVtKSB7XG4gICAgICAgIGlkeCA9IHByZWRpY2F0ZUZpbmQoc2xpY2UuY2FsbChhcnJheSwgaSwgbGVuZ3RoKSwgXy5pc05hTik7XG4gICAgICAgIHJldHVybiBpZHggPj0gMCA/IGlkeCArIGkgOiAtMTtcbiAgICAgIH1cbiAgICAgIGZvciAoaWR4ID0gZGlyID4gMCA/IGkgOiBsZW5ndGggLSAxOyBpZHggPj0gMCAmJiBpZHggPCBsZW5ndGg7IGlkeCArPSBkaXIpIHtcbiAgICAgICAgaWYgKGFycmF5W2lkeF0gPT09IGl0ZW0pIHJldHVybiBpZHg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFJldHVybiB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gaXRlbSBpbiBhbiBhcnJheSxcbiAgLy8gb3IgLTEgaWYgdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS5cbiAgLy8gSWYgdGhlIGFycmF5IGlzIGxhcmdlIGFuZCBhbHJlYWR5IGluIHNvcnQgb3JkZXIsIHBhc3MgYHRydWVgXG4gIC8vIGZvciAqKmlzU29ydGVkKiogdG8gdXNlIGJpbmFyeSBzZWFyY2guXG4gIF8uaW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKDEsIF8uZmluZEluZGV4LCBfLnNvcnRlZEluZGV4KTtcbiAgXy5sYXN0SW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKC0xLCBfLmZpbmRMYXN0SW5kZXgpO1xuXG4gIC8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2ZcbiAgLy8gdGhlIG5hdGl2ZSBQeXRob24gYHJhbmdlKClgIGZ1bmN0aW9uLiBTZWVcbiAgLy8gW3RoZSBQeXRob24gZG9jdW1lbnRhdGlvbl0oaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L2Z1bmN0aW9ucy5odG1sI3JhbmdlKS5cbiAgXy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7XG4gICAgaWYgKHN0b3AgPT0gbnVsbCkge1xuICAgICAgc3RvcCA9IHN0YXJ0IHx8IDA7XG4gICAgICBzdGFydCA9IDA7XG4gICAgfVxuICAgIHN0ZXAgPSBzdGVwIHx8IDE7XG5cbiAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5jZWlsKChzdG9wIC0gc3RhcnQpIC8gc3RlcCksIDApO1xuICAgIHZhciByYW5nZSA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrLCBzdGFydCArPSBzdGVwKSB7XG4gICAgICByYW5nZVtpZHhdID0gc3RhcnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIChhaGVtKSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGV4ZWN1dGUgYSBmdW5jdGlvbiBhcyBhIGNvbnN0cnVjdG9yXG4gIC8vIG9yIGEgbm9ybWFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3ZpZGVkIGFyZ3VtZW50c1xuICB2YXIgZXhlY3V0ZUJvdW5kID0gZnVuY3Rpb24oc291cmNlRnVuYywgYm91bmRGdW5jLCBjb250ZXh0LCBjYWxsaW5nQ29udGV4dCwgYXJncykge1xuICAgIGlmICghKGNhbGxpbmdDb250ZXh0IGluc3RhbmNlb2YgYm91bmRGdW5jKSkgcmV0dXJuIHNvdXJjZUZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gc291cmNlRnVuYy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICBpZiAoXy5pc09iamVjdChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLFxuICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmXG4gIC8vIGF2YWlsYWJsZS5cbiAgXy5iaW5kID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCkge1xuICAgIGlmIChuYXRpdmVCaW5kICYmIGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCkgcmV0dXJuIG5hdGl2ZUJpbmQuYXBwbHkoZnVuYywgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICBpZiAoIV8uaXNGdW5jdGlvbihmdW5jKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCBjb250ZXh0LCB0aGlzLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzXG4gIC8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHNcbiAgLy8gYXMgYSBwbGFjZWhvbGRlciwgYWxsb3dpbmcgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cyB0byBiZSBwcmUtZmlsbGVkLlxuICBfLnBhcnRpYWwgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgdmFyIGJvdW5kQXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IDAsIGxlbmd0aCA9IGJvdW5kQXJncy5sZW5ndGg7XG4gICAgICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyZ3NbaV0gPSBib3VuZEFyZ3NbaV0gPT09IF8gPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07XG4gICAgICB9XG4gICAgICB3aGlsZSAocG9zaXRpb24gPCBhcmd1bWVudHMubGVuZ3RoKSBhcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9O1xuXG4gIC8vIEJpbmQgYSBudW1iZXIgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gUmVtYWluaW5nIGFyZ3VtZW50c1xuICAvLyBhcmUgdGhlIG1ldGhvZCBuYW1lcyB0byBiZSBib3VuZC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGFsbCBjYWxsYmFja3NcbiAgLy8gZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LlxuICBfLmJpbmRBbGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaSwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCwga2V5O1xuICAgIGlmIChsZW5ndGggPD0gMSkgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7XG4gICAgZm9yIChpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBhcmd1bWVudHNbaV07XG4gICAgICBvYmpba2V5XSA9IF8uYmluZChvYmpba2V5XSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBNZW1vaXplIGFuIGV4cGVuc2l2ZSBmdW5jdGlvbiBieSBzdG9yaW5nIGl0cyByZXN1bHRzLlxuICBfLm1lbW9pemUgPSBmdW5jdGlvbihmdW5jLCBoYXNoZXIpIHtcbiAgICB2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZS5jYWNoZTtcbiAgICAgIHZhciBhZGRyZXNzID0gJycgKyAoaGFzaGVyID8gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBrZXkpO1xuICAgICAgaWYgKCFfLmhhcyhjYWNoZSwgYWRkcmVzcykpIGNhY2hlW2FkZHJlc3NdID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIGNhY2hlW2FkZHJlc3NdO1xuICAgIH07XG4gICAgbWVtb2l6ZS5jYWNoZSA9IHt9O1xuICAgIHJldHVybiBtZW1vaXplO1xuICB9O1xuXG4gIC8vIERlbGF5cyBhIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gY2FsbHNcbiAgLy8gaXQgd2l0aCB0aGUgYXJndW1lbnRzIHN1cHBsaWVkLlxuICBfLmRlbGF5ID0gZnVuY3Rpb24oZnVuYywgd2FpdCkge1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9LCB3YWl0KTtcbiAgfTtcblxuICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXNcbiAgLy8gY2xlYXJlZC5cbiAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4gIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjtcbiAgLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3NcbiAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG4gIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgdGltZW91dCA9IG51bGw7XG4gICAgdmFyIHByZXZpb3VzID0gMDtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBfLm5vdygpO1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm93ID0gXy5ub3coKTtcbiAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG4gICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICAvLyBOIG1pbGxpc2Vjb25kcy4gSWYgYGltbWVkaWF0ZWAgaXMgcGFzc2VkLCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGVcbiAgLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblxuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxhc3QgPSBfLm5vdygpIC0gdGltZXN0YW1wO1xuXG4gICAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHRpbWVzdGFtcCA9IF8ubm93KCk7XG4gICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgZnVuY3Rpb24gcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBzZWNvbmQsXG4gIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmRcbiAgLy8gY29uZGl0aW9uYWxseSBleGVjdXRlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cbiAgXy53cmFwID0gZnVuY3Rpb24oZnVuYywgd3JhcHBlcikge1xuICAgIHJldHVybiBfLnBhcnRpYWwod3JhcHBlciwgZnVuYyk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIG5lZ2F0ZWQgdmVyc2lvbiBvZiB0aGUgcGFzc2VkLWluIHByZWRpY2F0ZS5cbiAgXy5uZWdhdGUgPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgdGhlIGNvbXBvc2l0aW9uIG9mIGEgbGlzdCBvZiBmdW5jdGlvbnMsIGVhY2hcbiAgLy8gY29uc3VtaW5nIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cbiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIHN0YXJ0ID0gYXJncy5sZW5ndGggLSAxO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpID0gc3RhcnQ7XG4gICAgICB2YXIgcmVzdWx0ID0gYXJnc1tzdGFydF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCBvbiBhbmQgYWZ0ZXIgdGhlIE50aCBjYWxsLlxuICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCB1cCB0byAoYnV0IG5vdCBpbmNsdWRpbmcpIHRoZSBOdGggY2FsbC5cbiAgXy5iZWZvcmUgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIHZhciBtZW1vO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzID4gMCkge1xuICAgICAgICBtZW1vID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKHRpbWVzIDw9IDEpIGZ1bmMgPSBudWxsO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGF0IG1vc3Qgb25lIHRpbWUsIG5vIG1hdHRlciBob3dcbiAgLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi5cbiAgXy5vbmNlID0gXy5wYXJ0aWFsKF8uYmVmb3JlLCAyKTtcblxuICAvLyBPYmplY3QgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLlxuICB2YXIgaGFzRW51bUJ1ZyA9ICF7dG9TdHJpbmc6IG51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpO1xuICB2YXIgbm9uRW51bWVyYWJsZVByb3BzID0gWyd2YWx1ZU9mJywgJ2lzUHJvdG90eXBlT2YnLCAndG9TdHJpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddO1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKSB7XG4gICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgcHJvdG8gPSAoXy5pc0Z1bmN0aW9uKGNvbnN0cnVjdG9yKSAmJiBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpIHx8IE9ialByb3RvO1xuXG4gICAgLy8gQ29uc3RydWN0b3IgaXMgYSBzcGVjaWFsIGNhc2UuXG4gICAgdmFyIHByb3AgPSAnY29uc3RydWN0b3InO1xuICAgIGlmIChfLmhhcyhvYmosIHByb3ApICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSBrZXlzLnB1c2gocHJvcCk7XG5cbiAgICB3aGlsZSAobm9uRW51bUlkeC0tKSB7XG4gICAgICBwcm9wID0gbm9uRW51bWVyYWJsZVByb3BzW25vbkVudW1JZHhdO1xuICAgICAgaWYgKHByb3AgaW4gb2JqICYmIG9ialtwcm9wXSAhPT0gcHJvdG9bcHJvcF0gJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIHtcbiAgICAgICAga2V5cy5wdXNoKHByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFJldHJpZXZlIHRoZSBuYW1lcyBvZiBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYFxuICBfLmtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIGlmIChuYXRpdmVLZXlzKSByZXR1cm4gbmF0aXZlS2V5cyhvYmopO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKF8uaGFzKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgYWxsIHRoZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QuXG4gIF8uYWxsS2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuXG4gIF8udmFsdWVzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHZhbHVlcyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWVzW2ldID0gb2JqW2tleXNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudCBvZiB0aGUgb2JqZWN0XG4gIC8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0XG4gIF8ubWFwT2JqZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdHMgPSB7fSxcbiAgICAgICAgICBjdXJyZW50S2V5O1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjdXJyZW50S2V5ID0ga2V5c1tpbmRleF07XG4gICAgICAgIHJlc3VsdHNbY3VycmVudEtleV0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy5cbiAgXy5wYWlycyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciBwYWlycyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcGFpcnNbaV0gPSBba2V5c1tpXSwgb2JqW2tleXNbaV1dXTtcbiAgICB9XG4gICAgcmV0dXJuIHBhaXJzO1xuICB9O1xuXG4gIC8vIEludmVydCB0aGUga2V5cyBhbmQgdmFsdWVzIG9mIGFuIG9iamVjdC4gVGhlIHZhbHVlcyBtdXN0IGJlIHNlcmlhbGl6YWJsZS5cbiAgXy5pbnZlcnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcmVzdWx0W29ialtrZXlzW2ldXV0gPSBrZXlzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHNvcnRlZCBsaXN0IG9mIHRoZSBmdW5jdGlvbiBuYW1lcyBhdmFpbGFibGUgb24gdGhlIG9iamVjdC5cbiAgLy8gQWxpYXNlZCBhcyBgbWV0aG9kc2BcbiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuICB9O1xuXG4gIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7XG5cbiAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3QocylcbiAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24pXG4gIF8uZXh0ZW5kT3duID0gXy5hc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihfLmtleXMpO1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGtleSBvbiBhbiBvYmplY3QgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuICBfLmZpbmRLZXkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKSwga2V5O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKHByZWRpY2F0ZShvYmpba2V5XSwga2V5LCBvYmopKSByZXR1cm4ga2V5O1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLnBpY2sgPSBmdW5jdGlvbihvYmplY3QsIG9pdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSB7fSwgb2JqID0gb2JqZWN0LCBpdGVyYXRlZSwga2V5cztcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHQ7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihvaXRlcmF0ZWUpKSB7XG4gICAgICBrZXlzID0gXy5hbGxLZXlzKG9iaik7XG4gICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2Iob2l0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5cyA9IGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHsgcmV0dXJuIGtleSBpbiBvYmo7IH07XG4gICAgICBvYmogPSBPYmplY3Qob2JqKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBpZiAoaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqKSkgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ub21pdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaXRlcmF0ZWUgPSBfLm5lZ2F0ZShpdGVyYXRlZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5tYXAoZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSksIFN0cmluZyk7XG4gICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKGtleXMsIGtleSk7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gXy5waWNrKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIF8uZGVmYXVsdHMgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsIHRydWUpO1xuXG4gIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC5cbiAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgLy8gY3JlYXRlZCBvYmplY3QuXG4gIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykge1xuICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC5cbiAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7XG4gIH07XG5cbiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLlxuICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cbiAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gIF8udGFwID0gZnVuY3Rpb24ob2JqLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZiBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5pc01hdGNoID0gZnVuY3Rpb24ob2JqZWN0LCBhdHRycykge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gIWxlbmd0aDtcbiAgICB2YXIgb2JqID0gT2JqZWN0KG9iamVjdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoYXR0cnNba2V5XSAhPT0gb2JqW2tleV0gfHwgIShrZXkgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuXG4gIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuXG4gIHZhciBlcSA9IGZ1bmN0aW9uKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG4gICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuICAgIC8vIFNlZSB0aGUgW0hhcm1vbnkgYGVnYWxgIHByb3Bvc2FsXShodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwpLlxuICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGI7XG4gICAgLy8gQSBzdHJpY3QgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkgYmVjYXVzZSBgbnVsbCA9PSB1bmRlZmluZWRgLlxuICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSByZXR1cm4gYSA9PT0gYjtcbiAgICAvLyBVbndyYXAgYW55IHdyYXBwZWQgb2JqZWN0cy5cbiAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkO1xuICAgIGlmIChiIGluc3RhbmNlb2YgXykgYiA9IGIuX3dyYXBwZWQ7XG4gICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cbiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBpZiAoY2xhc3NOYW1lICE9PSB0b1N0cmluZy5jYWxsKGIpKSByZXR1cm4gZmFsc2U7XG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvZXJjZWQgdG8gc3RyaW5ncyBmb3IgY29tcGFyaXNvbiAoTm90ZTogJycgKyAvYS9pID09PSAnL2EvaScpXG4gICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAvLyBQcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCB3cmFwcGVycyBhcmUgZXF1aXZhbGVudDsgdGh1cywgYFwiNVwiYCBpc1xuICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG4gICAgICAgIHJldHVybiAnJyArIGEgPT09ICcnICsgYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG4gICAgICAgIC8vIE9iamVjdChOYU4pIGlzIGVxdWl2YWxlbnQgdG8gTmFOXG4gICAgICAgIGlmICgrYSAhPT0gK2EpIHJldHVybiArYiAhPT0gK2I7XG4gICAgICAgIC8vIEFuIGBlZ2FsYCBjb21wYXJpc29uIGlzIHBlcmZvcm1lZCBmb3Igb3RoZXIgbnVtZXJpYyB2YWx1ZXMuXG4gICAgICAgIHJldHVybiArYSA9PT0gMCA/IDEgLyArYSA9PT0gMSAvIGIgOiArYSA9PT0gK2I7XG4gICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWVyaWMgcHJpbWl0aXZlIHZhbHVlcy4gRGF0ZXMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyXG4gICAgICAgIC8vIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucy4gTm90ZSB0aGF0IGludmFsaWQgZGF0ZXMgd2l0aCBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnNcbiAgICAgICAgLy8gb2YgYE5hTmAgYXJlIG5vdCBlcXVpdmFsZW50LlxuICAgICAgICByZXR1cm4gK2EgPT09ICtiO1xuICAgIH1cblxuICAgIHZhciBhcmVBcnJheXMgPSBjbGFzc05hbWUgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgaWYgKCFhcmVBcnJheXMpIHtcbiAgICAgIGlmICh0eXBlb2YgYSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBPYmplY3RzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWl2YWxlbnQsIGJ1dCBgT2JqZWN0YHMgb3IgYEFycmF5YHNcbiAgICAgIC8vIGZyb20gZGlmZmVyZW50IGZyYW1lcyBhcmUuXG4gICAgICB2YXIgYUN0b3IgPSBhLmNvbnN0cnVjdG9yLCBiQ3RvciA9IGIuY29uc3RydWN0b3I7XG4gICAgICBpZiAoYUN0b3IgIT09IGJDdG9yICYmICEoXy5pc0Z1bmN0aW9uKGFDdG9yKSAmJiBhQ3RvciBpbnN0YW5jZW9mIGFDdG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5pc0Z1bmN0aW9uKGJDdG9yKSAmJiBiQ3RvciBpbnN0YW5jZW9mIGJDdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJ2NvbnN0cnVjdG9yJyBpbiBhICYmICdjb25zdHJ1Y3RvcicgaW4gYikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljXG4gICAgLy8gc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AuXG5cbiAgICAvLyBJbml0aWFsaXppbmcgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgLy8gSXQncyBkb25lIGhlcmUgc2luY2Ugd2Ugb25seSBuZWVkIHRoZW0gZm9yIG9iamVjdHMgYW5kIGFycmF5cyBjb21wYXJpc29uLlxuICAgIGFTdGFjayA9IGFTdGFjayB8fCBbXTtcbiAgICBiU3RhY2sgPSBiU3RhY2sgfHwgW107XG4gICAgdmFyIGxlbmd0aCA9IGFTdGFjay5sZW5ndGg7XG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAvLyBMaW5lYXIgc2VhcmNoLiBQZXJmb3JtYW5jZSBpcyBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2ZcbiAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy5cbiAgICAgIGlmIChhU3RhY2tbbGVuZ3RoXSA9PT0gYSkgcmV0dXJuIGJTdGFja1tsZW5ndGhdID09PSBiO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBhU3RhY2sucHVzaChhKTtcbiAgICBiU3RhY2sucHVzaChiKTtcblxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgIGlmIChhcmVBcnJheXMpIHtcbiAgICAgIC8vIENvbXBhcmUgYXJyYXkgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5LlxuICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gRGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcy5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoIWVxKGFbbGVuZ3RoXSwgYltsZW5ndGhdLCBhU3RhY2ssIGJTdGFjaykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVlcCBjb21wYXJlIG9iamVjdHMuXG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhhKSwga2V5O1xuICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAvLyBFbnN1cmUgdGhhdCBib3RoIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllcyBiZWZvcmUgY29tcGFyaW5nIGRlZXAgZXF1YWxpdHkuXG4gICAgICBpZiAoXy5rZXlzKGIpLmxlbmd0aCAhPT0gbGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgLy8gRGVlcCBjb21wYXJlIGVhY2ggbWVtYmVyXG4gICAgICAgIGtleSA9IGtleXNbbGVuZ3RoXTtcbiAgICAgICAgaWYgKCEoXy5oYXMoYiwga2V5KSAmJiBlcShhW2tleV0sIGJba2V5XSwgYVN0YWNrLCBiU3RhY2spKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IG9iamVjdCBmcm9tIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBhU3RhY2sucG9wKCk7XG4gICAgYlN0YWNrLnBvcCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIFBlcmZvcm0gYSBkZWVwIGNvbXBhcmlzb24gdG8gY2hlY2sgaWYgdHdvIG9iamVjdHMgYXJlIGVxdWFsLlxuICBfLmlzRXF1YWwgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGVxKGEsIGIpO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gYXJyYXksIHN0cmluZywgb3Igb2JqZWN0IGVtcHR5P1xuICAvLyBBbiBcImVtcHR5XCIgb2JqZWN0IGhhcyBubyBlbnVtZXJhYmxlIG93bi1wcm9wZXJ0aWVzLlxuICBfLmlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopICYmIChfLmlzQXJyYXkob2JqKSB8fCBfLmlzU3RyaW5nKG9iaikgfHwgXy5pc0FyZ3VtZW50cyhvYmopKSkgcmV0dXJuIG9iai5sZW5ndGggPT09IDA7XG4gICAgcmV0dXJuIF8ua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgRE9NIGVsZW1lbnQ/XG4gIF8uaXNFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT09IDEpO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYW4gYXJyYXk/XG4gIC8vIERlbGVnYXRlcyB0byBFQ01BNSdzIG5hdGl2ZSBBcnJheS5pc0FycmF5XG4gIF8uaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIGFuIG9iamVjdD9cbiAgXy5pc09iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlID09PSAnb2JqZWN0JyAmJiAhIW9iajtcbiAgfTtcblxuICAvLyBBZGQgc29tZSBpc1R5cGUgbWV0aG9kczogaXNBcmd1bWVudHMsIGlzRnVuY3Rpb24sIGlzU3RyaW5nLCBpc051bWJlciwgaXNEYXRlLCBpc1JlZ0V4cCwgaXNFcnJvci5cbiAgXy5lYWNoKFsnQXJndW1lbnRzJywgJ0Z1bmN0aW9uJywgJ1N0cmluZycsICdOdW1iZXInLCAnRGF0ZScsICdSZWdFeHAnLCAnRXJyb3InXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJztcbiAgICB9O1xuICB9KTtcblxuICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFIDwgOSksIHdoZXJlXG4gIC8vIHRoZXJlIGlzbid0IGFueSBpbnNwZWN0YWJsZSBcIkFyZ3VtZW50c1wiIHR5cGUuXG4gIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7XG4gICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaGFzKG9iaiwgJ2NhbGxlZScpO1xuICAgIH07XG4gIH1cblxuICAvLyBPcHRpbWl6ZSBgaXNGdW5jdGlvbmAgaWYgYXBwcm9wcmlhdGUuIFdvcmsgYXJvdW5kIHNvbWUgdHlwZW9mIGJ1Z3MgaW4gb2xkIHY4LFxuICAvLyBJRSAxMSAoIzE2MjEpLCBhbmQgaW4gU2FmYXJpIDggKCMxOTI5KS5cbiAgaWYgKHR5cGVvZiAvLi8gIT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnKSB7XG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICAgIH07XG4gIH1cblxuICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG4gIF8uaXNGaW5pdGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gaXNGaW5pdGUob2JqKSAmJiAhaXNOYU4ocGFyc2VGbG9hdChvYmopKTtcbiAgfTtcblxuICAvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/IChOYU4gaXMgdGhlIG9ubHkgbnVtYmVyIHdoaWNoIGRvZXMgbm90IGVxdWFsIGl0c2VsZikuXG4gIF8uaXNOYU4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gXy5pc051bWJlcihvYmopICYmIG9iaiAhPT0gK29iajtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj9cbiAgXy5pc0Jvb2xlYW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuICBfLmlzTnVsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IG51bGw7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG4gIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBwcm9wZXJ0eSBkaXJlY3RseVxuICAvLyBvbiBpdHNlbGYgKGluIG90aGVyIHdvcmRzLCBub3Qgb24gYSBwcm90b3R5cGUpLlxuICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuICB9O1xuXG4gIC8vIFV0aWxpdHkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUnVuIFVuZGVyc2NvcmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYF9gIHZhcmlhYmxlIHRvIGl0c1xuICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuXyA9IHByZXZpb3VzVW5kZXJzY29yZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBLZWVwIHRoZSBpZGVudGl0eSBmdW5jdGlvbiBhcm91bmQgZm9yIGRlZmF1bHQgaXRlcmF0ZWVzLlxuICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLy8gUHJlZGljYXRlLWdlbmVyYXRpbmcgZnVuY3Rpb25zLiBPZnRlbiB1c2VmdWwgb3V0c2lkZSBvZiBVbmRlcnNjb3JlLlxuICBfLmNvbnN0YW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfTtcblxuICBfLm5vb3AgPSBmdW5jdGlvbigpe307XG5cbiAgXy5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuXG4gIC8vIEdlbmVyYXRlcyBhIGZ1bmN0aW9uIGZvciBhIGdpdmVuIG9iamVjdCB0aGF0IHJldHVybnMgYSBnaXZlbiBwcm9wZXJ0eS5cbiAgXy5wcm9wZXJ0eU9mID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PSBudWxsID8gZnVuY3Rpb24oKXt9IDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgcHJlZGljYXRlIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2ZcbiAgLy8gYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ubWF0Y2hlciA9IF8ubWF0Y2hlcyA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgYXR0cnMgPSBfLmV4dGVuZE93bih7fSwgYXR0cnMpO1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmlzTWF0Y2gob2JqLCBhdHRycyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSdW4gYSBmdW5jdGlvbiAqKm4qKiB0aW1lcy5cbiAgXy50aW1lcyA9IGZ1bmN0aW9uKG4sIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIGFjY3VtID0gQXJyYXkoTWF0aC5tYXgoMCwgbikpO1xuICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIGFjY3VtW2ldID0gaXRlcmF0ZWUoaSk7XG4gICAgcmV0dXJuIGFjY3VtO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSkuXG4gIF8ucmFuZG9tID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICBpZiAobWF4ID09IG51bGwpIHtcbiAgICAgIG1heCA9IG1pbjtcbiAgICAgIG1pbiA9IDA7XG4gICAgfVxuICAgIHJldHVybiBtaW4gKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xuICB9O1xuXG4gIC8vIEEgKHBvc3NpYmx5IGZhc3Rlcikgd2F5IHRvIGdldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYXMgYW4gaW50ZWdlci5cbiAgXy5ub3cgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH07XG5cbiAgIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuXG4gIHZhciBlc2NhcGVNYXAgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgICAnYCc6ICcmI3g2MDsnXG4gIH07XG4gIHZhciB1bmVzY2FwZU1hcCA9IF8uaW52ZXJ0KGVzY2FwZU1hcCk7XG5cbiAgLy8gRnVuY3Rpb25zIGZvciBlc2NhcGluZyBhbmQgdW5lc2NhcGluZyBzdHJpbmdzIHRvL2Zyb20gSFRNTCBpbnRlcnBvbGF0aW9uLlxuICB2YXIgY3JlYXRlRXNjYXBlciA9IGZ1bmN0aW9uKG1hcCkge1xuICAgIHZhciBlc2NhcGVyID0gZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXBbbWF0Y2hdO1xuICAgIH07XG4gICAgLy8gUmVnZXhlcyBmb3IgaWRlbnRpZnlpbmcgYSBrZXkgdGhhdCBuZWVkcyB0byBiZSBlc2NhcGVkXG4gICAgdmFyIHNvdXJjZSA9ICcoPzonICsgXy5rZXlzKG1hcCkuam9pbignfCcpICsgJyknO1xuICAgIHZhciB0ZXN0UmVnZXhwID0gUmVnRXhwKHNvdXJjZSk7XG4gICAgdmFyIHJlcGxhY2VSZWdleHAgPSBSZWdFeHAoc291cmNlLCAnZycpO1xuICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBudWxsID8gJycgOiAnJyArIHN0cmluZztcbiAgICAgIHJldHVybiB0ZXN0UmVnZXhwLnRlc3Qoc3RyaW5nKSA/IHN0cmluZy5yZXBsYWNlKHJlcGxhY2VSZWdleHAsIGVzY2FwZXIpIDogc3RyaW5nO1xuICAgIH07XG4gIH07XG4gIF8uZXNjYXBlID0gY3JlYXRlRXNjYXBlcihlc2NhcGVNYXApO1xuICBfLnVuZXNjYXBlID0gY3JlYXRlRXNjYXBlcih1bmVzY2FwZU1hcCk7XG5cbiAgLy8gSWYgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZCBgcHJvcGVydHlgIGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQgd2l0aCB0aGVcbiAgLy8gYG9iamVjdGAgYXMgY29udGV4dDsgb3RoZXJ3aXNlLCByZXR1cm4gaXQuXG4gIF8ucmVzdWx0ID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgZmFsbGJhY2spIHtcbiAgICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHZvaWQgMCA6IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIHZhbHVlID0gZmFsbGJhY2s7XG4gICAgfVxuICAgIHJldHVybiBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS5cbiAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbiAgdmFyIGlkQ291bnRlciA9IDA7XG4gIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgaWQgPSArK2lkQ291bnRlciArICcnO1xuICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuICAvLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICBldmFsdWF0ZSAgICA6IC88JShbXFxzXFxTXSs/KSU+L2csXG4gICAgaW50ZXJwb2xhdGUgOiAvPCU9KFtcXHNcXFNdKz8pJT4vZyxcbiAgICBlc2NhcGUgICAgICA6IC88JS0oW1xcc1xcU10rPyklPi9nXG4gIH07XG5cbiAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhblxuICAvLyBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uIG9yIGVzY2FwaW5nIHJlZ2V4LCB3ZSBuZWVkIG9uZSB0aGF0IGlzXG4gIC8vIGd1YXJhbnRlZWQgbm90IHRvIG1hdGNoLlxuICB2YXIgbm9NYXRjaCA9IC8oLileLztcblxuICAvLyBDZXJ0YWluIGNoYXJhY3RlcnMgbmVlZCB0byBiZSBlc2NhcGVkIHNvIHRoYXQgdGhleSBjYW4gYmUgcHV0IGludG8gYVxuICAvLyBzdHJpbmcgbGl0ZXJhbC5cbiAgdmFyIGVzY2FwZXMgPSB7XG4gICAgXCInXCI6ICAgICAgXCInXCIsXG4gICAgJ1xcXFwnOiAgICAgJ1xcXFwnLFxuICAgICdcXHInOiAgICAgJ3InLFxuICAgICdcXG4nOiAgICAgJ24nLFxuICAgICdcXHUyMDI4JzogJ3UyMDI4JyxcbiAgICAnXFx1MjAyOSc6ICd1MjAyOSdcbiAgfTtcblxuICB2YXIgZXNjYXBlciA9IC9cXFxcfCd8XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvZztcblxuICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgcmV0dXJuICdcXFxcJyArIGVzY2FwZXNbbWF0Y2hdO1xuICB9O1xuXG4gIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uXG4gIC8vIFVuZGVyc2NvcmUgdGVtcGxhdGluZyBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXMgd2hpdGVzcGFjZSxcbiAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuXG4gIC8vIE5COiBgb2xkU2V0dGluZ3NgIG9ubHkgZXhpc3RzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgXy50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHRleHQsIHNldHRpbmdzLCBvbGRTZXR0aW5ncykge1xuICAgIGlmICghc2V0dGluZ3MgJiYgb2xkU2V0dGluZ3MpIHNldHRpbmdzID0gb2xkU2V0dGluZ3M7XG4gICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHt9LCBzZXR0aW5ncywgXy50ZW1wbGF0ZVNldHRpbmdzKTtcblxuICAgIC8vIENvbWJpbmUgZGVsaW1pdGVycyBpbnRvIG9uZSByZWd1bGFyIGV4cHJlc3Npb24gdmlhIGFsdGVybmF0aW9uLlxuICAgIHZhciBtYXRjaGVyID0gUmVnRXhwKFtcbiAgICAgIChzZXR0aW5ncy5lc2NhcGUgfHwgbm9NYXRjaCkuc291cmNlLFxuICAgICAgKHNldHRpbmdzLmludGVycG9sYXRlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoKS5zb3VyY2VcbiAgICBdLmpvaW4oJ3wnKSArICd8JCcsICdnJyk7XG5cbiAgICAvLyBDb21waWxlIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGVzY2FwaW5nIHN0cmluZyBsaXRlcmFscyBhcHByb3ByaWF0ZWx5LlxuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHNvdXJjZSA9IFwiX19wKz0nXCI7XG4gICAgdGV4dC5yZXBsYWNlKG1hdGNoZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUsIGludGVycG9sYXRlLCBldmFsdWF0ZSwgb2Zmc2V0KSB7XG4gICAgICBzb3VyY2UgKz0gdGV4dC5zbGljZShpbmRleCwgb2Zmc2V0KS5yZXBsYWNlKGVzY2FwZXIsIGVzY2FwZUNoYXIpO1xuICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBlc2NhcGUgKyBcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBpbnRlcnBvbGF0ZSArIFwiKSk9PW51bGw/Jyc6X190KStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZSArIFwiXFxuX19wKz0nXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZmVzdC5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcbiAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cbiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXG4gICAgc291cmNlID0gXCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIgK1xuICAgICAgXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiICtcbiAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xcbic7XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHJlbmRlciA9IG5ldyBGdW5jdGlvbihzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJywgJ18nLCBzb3VyY2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGUuc291cmNlID0gc291cmNlO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgZGF0YSwgXyk7XG4gICAgfTtcblxuICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIHNvdXJjZSBhcyBhIGNvbnZlbmllbmNlIGZvciBwcmVjb21waWxhdGlvbi5cbiAgICB2YXIgYXJndW1lbnQgPSBzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJztcbiAgICB0ZW1wbGF0ZS5zb3VyY2UgPSAnZnVuY3Rpb24oJyArIGFyZ3VtZW50ICsgJyl7XFxuJyArIHNvdXJjZSArICd9JztcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfTtcblxuICAvLyBBZGQgYSBcImNoYWluXCIgZnVuY3Rpb24uIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBpbnN0YW5jZSA9IF8ob2JqKTtcbiAgICBpbnN0YW5jZS5fY2hhaW4gPSB0cnVlO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcblxuICAvLyBPT1BcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gIC8vIElmIFVuZGVyc2NvcmUgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0XG4gIC8vIGNhbiBiZSB1c2VkIE9PLXN0eWxlLiBUaGlzIHdyYXBwZXIgaG9sZHMgYWx0ZXJlZCB2ZXJzaW9ucyBvZiBhbGwgdGhlXG4gIC8vIHVuZGVyc2NvcmUgZnVuY3Rpb25zLiBXcmFwcGVkIG9iamVjdHMgbWF5IGJlIGNoYWluZWQuXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnRpbnVlIGNoYWluaW5nIGludGVybWVkaWF0ZSByZXN1bHRzLlxuICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikge1xuICAgIHJldHVybiBpbnN0YW5jZS5fY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajtcbiAgfTtcblxuICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubWl4aW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdO1xuICAgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07XG4gICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBmdW5jLmFwcGx5KF8sIGFyZ3MpKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQWRkIGFsbCBvZiB0aGUgVW5kZXJzY29yZSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIgb2JqZWN0LlxuICBfLm1peGluKF8pO1xuXG4gIC8vIEFkZCBhbGwgbXV0YXRvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ3BvcCcsICdwdXNoJywgJ3JldmVyc2UnLCAnc2hpZnQnLCAnc29ydCcsICdzcGxpY2UnLCAndW5zaGlmdCddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG4gICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvYmogPSB0aGlzLl93cmFwcGVkO1xuICAgICAgbWV0aG9kLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcbiAgICAgIGlmICgobmFtZSA9PT0gJ3NoaWZ0JyB8fCBuYW1lID09PSAnc3BsaWNlJykgJiYgb2JqLmxlbmd0aCA9PT0gMCkgZGVsZXRlIG9ialswXTtcbiAgICAgIHJldHVybiByZXN1bHQodGhpcywgb2JqKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBFeHRyYWN0cyB0aGUgcmVzdWx0IGZyb20gYSB3cmFwcGVkIGFuZCBjaGFpbmVkIG9iamVjdC5cbiAgXy5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBQcm92aWRlIHVud3JhcHBpbmcgcHJveHkgZm9yIHNvbWUgbWV0aG9kcyB1c2VkIGluIGVuZ2luZSBvcGVyYXRpb25zXG4gIC8vIHN1Y2ggYXMgYXJpdGhtZXRpYyBhbmQgSlNPTiBzdHJpbmdpZmljYXRpb24uXG4gIF8ucHJvdG90eXBlLnZhbHVlT2YgPSBfLnByb3RvdHlwZS50b0pTT04gPSBfLnByb3RvdHlwZS52YWx1ZTtcblxuICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAnJyArIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gQU1EIHJlZ2lzdHJhdGlvbiBoYXBwZW5zIGF0IHRoZSBlbmQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQgbG9hZGVyc1xuICAvLyB0aGF0IG1heSBub3QgZW5mb3JjZSBuZXh0LXR1cm4gc2VtYW50aWNzIG9uIG1vZHVsZXMuIEV2ZW4gdGhvdWdoIGdlbmVyYWxcbiAgLy8gcHJhY3RpY2UgZm9yIEFNRCByZWdpc3RyYXRpb24gaXMgdG8gYmUgYW5vbnltb3VzLCB1bmRlcnNjb3JlIHJlZ2lzdGVyc1xuICAvLyBhcyBhIG5hbWVkIG1vZHVsZSBiZWNhdXNlLCBsaWtlIGpRdWVyeSwgaXQgaXMgYSBiYXNlIGxpYnJhcnkgdGhhdCBpc1xuICAvLyBwb3B1bGFyIGVub3VnaCB0byBiZSBidW5kbGVkIGluIGEgdGhpcmQgcGFydHkgbGliLCBidXQgbm90IGJlIHBhcnQgb2ZcbiAgLy8gYW4gQU1EIGxvYWQgcmVxdWVzdC4gVGhvc2UgY2FzZXMgY291bGQgZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhblxuICAvLyBhbm9ueW1vdXMgZGVmaW5lKCkgaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBsb2FkZXIgcmVxdWVzdC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZSgndW5kZXJzY29yZScsIFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfO1xuICAgIH0pO1xuICB9XG59LmNhbGwodGhpcykpO1xuXG4vKiBleHBvcnRlZCBXSURHRVRfQ09NTU9OX0NPTkZJRyAqL1xudmFyIFdJREdFVF9DT01NT05fQ09ORklHID0ge1xuICBBVVRIX1BBVEhfVVJMOiBcInYxL3dpZGdldC9hdXRoXCIsXG4gIExPR0dFUl9DTElFTlRfSUQ6IFwiMTA4ODUyNzE0NzEwOS02cTFvMnZ0aWhuMzQyOTJwanQ0Y2tobWhjazByazBvNy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbVwiLFxuICBMT0dHRVJfQ0xJRU5UX1NFQ1JFVDogXCJubFp5cmNQTGc2b0V3TzlmOVdmbjI5V2hcIixcbiAgTE9HR0VSX1JFRlJFU0hfVE9LRU46IFwiMS94enQ0a3d6RTFIN1c5Vm5LQjhjQWFDeDZ6YjRFczRuS0VvcWFZSGRURDE1SWdPckpEdGR1bjZ6SzZYaUFUQ0tUXCIsXG4gIFNUT1JFX1VSTDogXCJodHRwczovL3N0b3JlLWRvdC1ydmFzZXJ2ZXIyLmFwcHNwb3QuY29tL1wiXG59O1xuLyogZ2xvYmFsIFdJREdFVF9DT01NT05fQ09ORklHICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzID0gKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAgdmFyIGRpc3BsYXlJZCA9IFwiXCIsXG4gICAgIGNvbXBhbnlJZCA9IFwiXCIsXG4gICAgIHZlcnNpb24gPSBudWxsO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogUmV0cmlldmUgcGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSBldmVudCBsb2dnZXIuICovXG4gIGZ1bmN0aW9uIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgY2IpIHtcbiAgICB2YXIganNvbiA9IG51bGw7XG5cbiAgICAvLyBldmVudCBpcyByZXF1aXJlZC5cbiAgICBpZiAocGFyYW1zLmV2ZW50KSB7XG4gICAgICBqc29uID0gcGFyYW1zO1xuXG4gICAgICBpZiAoanNvbi5maWxlX3VybCkge1xuICAgICAgICBqc29uLmZpbGVfZm9ybWF0ID0gZ2V0RmlsZUZvcm1hdChqc29uLmZpbGVfdXJsKTtcbiAgICAgIH1cblxuICAgICAganNvbi5jb21wYW55X2lkID0gY29tcGFueUlkO1xuICAgICAganNvbi5kaXNwbGF5X2lkID0gZGlzcGxheUlkO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBqc29uLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgc3VmZml4IGZvciBCUSB0YWJsZSBuYW1lLlxuICBmdW5jdGlvbiBnZXRTdWZmaXgoKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiBcIlwiICsgeWVhciArIG1vbnRoICsgZGF5O1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRGaWxlRm9ybWF0KHVybCkge1xuICAgIHZhciBoYXNQYXJhbXMgPSAvWz8jJl0vLFxuICAgICAgc3RyO1xuXG4gICAgaWYgKCF1cmwgfHwgdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3RyID0gdXJsLnN1YnN0cih1cmwubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG5cbiAgICAvLyBkb24ndCBpbmNsdWRlIGFueSBwYXJhbXMgYWZ0ZXIgdGhlIGZpbGVuYW1lXG4gICAgaWYgKGhhc1BhcmFtcy50ZXN0KHN0cikpIHtcbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCAsKHN0ci5pbmRleE9mKFwiP1wiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCI/XCIpIDogc3RyLmxlbmd0aCk7XG5cbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCwgKHN0ci5pbmRleE9mKFwiI1wiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCIjXCIpIDogc3RyLmxlbmd0aCk7XG5cbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCwgKHN0ci5pbmRleE9mKFwiJlwiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCImXCIpIDogc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW5zZXJ0RGF0YShwYXJhbXMpIHtcbiAgICB2YXIgQkFTRV9JTlNFUlRfU0NIRU1BID0ge1xuICAgICAgXCJraW5kXCI6IFwiYmlncXVlcnkjdGFibGVEYXRhSW5zZXJ0QWxsUmVxdWVzdFwiLFxuICAgICAgXCJza2lwSW52YWxpZFJvd3NcIjogZmFsc2UsXG4gICAgICBcImlnbm9yZVVua25vd25WYWx1ZXNcIjogZmFsc2UsXG4gICAgICBcInRlbXBsYXRlU3VmZml4XCI6IGdldFN1ZmZpeCgpLFxuICAgICAgXCJyb3dzXCI6IFt7XG4gICAgICAgIFwiaW5zZXJ0SWRcIjogXCJcIlxuICAgICAgfV1cbiAgICB9LFxuICAgIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEJBU0VfSU5TRVJUX1NDSEVNQSkpO1xuXG4gICAgZGF0YS5yb3dzWzBdLmluc2VydElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLnRvVXBwZXJDYXNlKCk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGRhdGEucm93c1swXS5qc29uLnRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudCh0YWJsZSwgcGFyYW1zKSB7XG4gICAgZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBmdW5jdGlvbihqc29uKSB7XG4gICAgICBpZiAoanNvbiAhPT0gbnVsbCkge1xuICAgICAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIubG9nKHRhYmxlLCBqc29uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50VG9QbGF5ZXIodGFibGUsIHBhcmFtcykge1xuICAgIHRyeSB7XG4gICAgICB0b3AucG9zdFRvUGxheWVyKCB7XG4gICAgICAgIG1lc3NhZ2U6IFwid2lkZ2V0LWxvZ1wiLFxuICAgICAgICB0YWJsZTogdGFibGUsXG4gICAgICAgIHBhcmFtczogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSxcbiAgICAgICAgc3VmZml4OiBnZXRTdWZmaXgoKVxuICAgICAgfSApO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coXCJ3aWRnZXQtY29tbW9uLmxvZ0V2ZW50VG9QbGF5ZXJcIiwgZXJyKTtcbiAgICB9XG4gIH1cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMoY29tcGFueSwgZGlzcGxheSkge1xuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnk7XG4gICAgZGlzcGxheUlkID0gZGlzcGxheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFZlcnNpb24odmFsdWUpIHtcbiAgICB2ZXJzaW9uID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SW5zZXJ0RGF0YVwiOiBnZXRJbnNlcnREYXRhLFxuICAgIFwiZ2V0RmlsZUZvcm1hdFwiOiBnZXRGaWxlRm9ybWF0LFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJsb2dFdmVudFRvUGxheWVyXCI6IGxvZ0V2ZW50VG9QbGF5ZXIsXG4gICAgXCJzZXRJZHNcIjogc2V0SWRzLFxuICAgIFwic2V0VmVyc2lvblwiOiBzZXRWZXJzaW9uXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IHt9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJDYW4ndCByZWZyZXNoIGxvZ2dlciB0b2tlbiAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZG9uJ3QgbG9nIGlmIGRpc3BsYXkgaWQgaXMgaW52YWxpZCBvciBwcmV2aWV3L2xvY2FsXG4gICAgaWYgKCFwYXJhbXMuZGlzcGxheV9pZCB8fCBwYXJhbXMuZGlzcGxheV9pZCA9PT0gXCJwcmV2aWV3XCIgfHwgcGFyYW1zLmRpc3BsYXlfaWQgPT09IFwiZGlzcGxheV9pZFwiIHx8XG4gICAgICBwYXJhbXMuZGlzcGxheV9pZCA9PT0gXCJkaXNwbGF5SWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAoIHRvcC5wb3N0VG9QbGF5ZXIgJiYgdG9wLmVuYWJsZVdpZGdldExvZ2dpbmcgKSB7XG4gICAgICAgIC8vIHNlbmQgbG9nIGRhdGEgdG8gcGxheWVyIGluc3RlYWQgb2YgQlFcbiAgICAgICAgcmV0dXJuIHV0aWxzLmxvZ0V2ZW50VG9QbGF5ZXIoIHRhYmxlTmFtZSwgcGFyYW1zICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoIGUgKSB7XG4gICAgICBjb25zb2xlLmxvZyggXCJ3aWRnZXQtY29tbW9uOiBsb2dnZXJcIiwgZSApO1xuICAgIH1cblxuICAgIHRocm90dGxlID0gdHJ1ZTtcbiAgICBsYXN0RXZlbnQgPSBwYXJhbXMuZXZlbnQ7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm90dGxlID0gZmFsc2U7XG4gICAgfSwgdGhyb3R0bGVEZWxheSk7XG5cbiAgICBmdW5jdGlvbiBpbnNlcnRXaXRoVG9rZW4ocmVmcmVzaERhdGEpIHtcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgaW5zZXJ0RGF0YSwgdXJsO1xuXG4gICAgICB1cmwgPSBzZXJ2aWNlVXJsLnJlcGxhY2UoXCJUQUJMRV9JRFwiLCB0YWJsZU5hbWUpO1xuICAgICAgcmVmcmVzaERhdGUgPSByZWZyZXNoRGF0YS5yZWZyZXNoZWRBdCB8fCByZWZyZXNoRGF0ZTtcbiAgICAgIHRva2VuID0gcmVmcmVzaERhdGEudG9rZW4gfHwgdG9rZW47XG4gICAgICBpbnNlcnREYXRhID0gdXRpbHMuZ2V0SW5zZXJ0RGF0YShwYXJhbXMpO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGRhdGEuXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHRva2VuKTtcblxuICAgICAgaWYgKHBhcmFtcy5jYiAmJiB0eXBlb2YgcGFyYW1zLmNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBhcmFtcy5jYih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShpbnNlcnREYXRhKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZnJlc2hUb2tlbihpbnNlcnRXaXRoVG9rZW4pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ1wiOiBsb2dcbiAgfTtcbn0pKFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzKTtcblxuLyogZ2xvYmFsIFdlYkZvbnQgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OiBcIiArIGRlY29kZVVSSUNvbXBvbmVudChmb250T2JqLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpICsgXCI7IFwiO1xuICAgIHZhciBjb2xvciA9IFwiY29sb3I6IFwiICsgKGZvbnRPYmouY29sb3IgPyBmb250T2JqLmNvbG9yIDogZm9udE9iai5mb3JlY29sb3IpICsgXCI7IFwiO1xuICAgIHZhciBzaXplID0gXCJmb250LXNpemU6IFwiICsgKGZvbnRPYmouc2l6ZS5pbmRleE9mKFwicHhcIikgPT09IC0xID8gZm9udE9iai5zaXplICsgXCJweDsgXCIgOiBmb250T2JqLnNpemUgKyBcIjsgXCIpO1xuICAgIHZhciB3ZWlnaHQgPSBcImZvbnQtd2VpZ2h0OiBcIiArIChmb250T2JqLmJvbGQgPyBcImJvbGRcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciBpdGFsaWMgPSBcImZvbnQtc3R5bGU6IFwiICsgKGZvbnRPYmouaXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciB1bmRlcmxpbmUgPSBcInRleHQtZGVjb3JhdGlvbjogXCIgKyAoZm9udE9iai51bmRlcmxpbmUgPyBcInVuZGVybGluZVwiIDogXCJub25lXCIpICsgXCI7IFwiO1xuICAgIHZhciBoaWdobGlnaHQgPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgKGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgPyBmb250T2JqLmhpZ2hsaWdodENvbG9yIDogZm9udE9iai5iYWNrY29sb3IpICsgXCI7XCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjYikge1xuICAgIHZhciBmYW1pbGllcyA9IG51bGwsXG4gICAgICBnb29nbGVGYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tRmFtaWxpZXMgPSBbXSxcbiAgICAgIGN1c3RvbVVybHMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Hb29nbGVGb250c0xvYWRlZCgpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncyB8fCBzZXR0aW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGN1c3RvbSBjc3MgY2xhc3MgbmFtZXMgYW5kIGFkZCBydWxlcyBpZiBzb1xuICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0uY2xhc3MgJiYgaXRlbS5mb250U3R5bGUpIHtcbiAgICAgICAgYWRkQ1NTUnVsZXMoWyBnZXRGb250Q3NzU3R5bGUoaXRlbS5jbGFzcywgaXRlbS5mb250U3R5bGUpIF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR29vZ2xlIGZvbnRzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImdvb2dsZVwiKSkge1xuICAgICAgICAvLyBSZW1vdmUgZmFsbGJhY2sgZm9udC5cbiAgICAgICAgZmFtaWxpZXMgPSBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkuc3BsaXQoXCIsXCIpWzBdO1xuXG4gICAgICAgIC8vIHN0cmlwIHBvc3NpYmxlIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgZmFtaWxpZXMgPSBmYW1pbGllcy5yZXBsYWNlKC8nL2csIFwiXCIpO1xuXG4gICAgICAgIGdvb2dsZUZhbWlsaWVzLnB1c2goZmFtaWxpZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN1c3RvbSBmb250c1xuICAgIGZvciAoaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImN1c3RvbVwiKSkge1xuICAgICAgICAvLyBkZWNvZGUgdmFsdWUgYW5kIHN0cmlwIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgY3VzdG9tRmFtaWxpZXMucHVzaChkZWNvZGVVUklDb21wb25lbnQoc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpKTtcbiAgICAgICAgLy8gc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21VcmxzLnB1c2goc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQudXJsLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdvb2dsZUZhbWlsaWVzLmxlbmd0aCA9PT0gMCAmJiBjdXN0b21GYW1pbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgZm9udHNcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3VzdG9tRmFtaWxpZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgbG9hZEN1c3RvbUZvbnQoY3VzdG9tRmFtaWxpZXNbal0sIGN1c3RvbVVybHNbal0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2FkR29vZ2xlRm9udHMoZ29vZ2xlRmFtaWxpZXMsIG9uR29vZ2xlRm9udHNMb2FkZWQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnRzKGZhbWlsaWVzLCBjYikge1xuICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICBnb29nbGU6IHtcbiAgICAgICAgZmFtaWxpZXM6IGZhbWlsaWVzXG4gICAgICB9LFxuICAgICAgYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRpbWVvdXQ6IDUwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRTY3JpcHQoIHNyYyApIHtcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApO1xuXG4gICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JpcHQgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXModXJscykge1xuICAgIHZhciBsZW5ndGggPSB1cmxzLmxlbmd0aCxcbiAgICAgIGltYWdlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaW1hZ2VzW2ldID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaV0uc3JjID0gdXJsc1tpXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IFVSSSBxdWVyeSBwYXJhbVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbWV0ZXIocGFyYW0pIHtcbiAgICByZXR1cm4gZ2V0UXVlcnlTdHJpbmdQYXJhbWV0ZXIocGFyYW0sIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHF1ZXJ5IHBhcmFtZXRlciBmcm9tIGEgcXVlcnkgc3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiBnZXRRdWVyeVN0cmluZ1BhcmFtZXRlcihwYXJhbSwgcXVlcnkpIHtcbiAgICB2YXIgdmFycyA9IHF1ZXJ5LnNwbGl0KFwiJlwiKSxcbiAgICAgIHBhaXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgaWYgKHBhaXJbMF0gPT0gcGFyYW0pIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRhdGUgb2JqZWN0IGZyb20gcGxheWVyIHZlcnNpb24gc3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiBnZXREYXRlT2JqZWN0RnJvbVBsYXllclZlcnNpb25TdHJpbmcocGxheWVyVmVyc2lvbikge1xuICAgIHZhciByZWdnaWUgPSAvKFxcZHs0fSlcXC4oXFxkezJ9KVxcLihcXGR7Mn0pXFwuKFxcZHsyfSlcXC4oXFxkezJ9KS87XG4gICAgdmFyIGRhdGVBcnJheSA9IHJlZ2dpZS5leGVjKHBsYXllclZlcnNpb24pO1xuICAgIGlmIChkYXRlQXJyYXkpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShcbiAgICAgICAgKCtkYXRlQXJyYXlbMV0pLFxuICAgICAgICAgICgrZGF0ZUFycmF5WzJdKS0xLCAvLyBDYXJlZnVsLCBtb250aCBzdGFydHMgYXQgMCFcbiAgICAgICAgKCtkYXRlQXJyYXlbM10pLFxuICAgICAgICAoK2RhdGVBcnJheVs0XSksXG4gICAgICAgICgrZGF0ZUFycmF5WzVdKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgc3dpdGNoIChzdGF0dXNDb2RlKSB7XG4gICAgICBjYXNlIDQwNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgZmlsZSBkb2VzIG5vdCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1MDc6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgaXMgbm90IGVub3VnaCBkaXNrIHNwYWNlIHRvIHNhdmUgdGhlIGZpbGUgb24gUmlzZSBDYWNoZS5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIHdhcyBhIHByb2JsZW0gcmV0cmlldmluZyB0aGUgZmlsZSBmcm9tIFJpc2UgQ2FjaGUuXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZXNjYXBlSFRNTChodG1sKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgIHJldHVybiBkaXYudGV4dENvbnRlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNJbnRlcm5ldENvbm5lY3Rpb24oZmlsZVBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKCFmaWxlUGF0aCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIkhFQURcIiwgZmlsZVBhdGggKyBcIj9jYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBmYWxzZSk7XG5cbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgY2FsbGJhY2soKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDQpKTtcblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY2hyb21lIHZlcnNpb24gaXMgdW5kZXIgYSBjZXJ0YWluIHZlcnNpb25cbiAgICovXG4gIGZ1bmN0aW9uIGlzTGVnYWN5KCkge1xuICAgIHZhciBsZWdhY3lWZXJzaW9uID0gMjU7XG5cbiAgICB2YXIgbWF0Y2ggPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxTKykvKTtcbiAgICB2YXIgdmVyc2lvbiA9IG1hdGNoID8gbWF0Y2hbMV0gOiAwO1xuXG4gICAgaWYgKHZlcnNpb24pIHtcbiAgICAgIHZlcnNpb24gPSBwYXJzZUludCh2ZXJzaW9uLnN1YnN0cmluZygwLHZlcnNpb24uaW5kZXhPZihcIi5cIikpKTtcblxuICAgICAgaWYgKHZlcnNpb24gPD0gbGVnYWN5VmVyc2lvbikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBodHRwOi8vIG9yIGh0dHBzOi8vIHByb3RvY29sIHRvIHVybCBpZiB0aGUgcHJvdG9jb2wgaXMgbWlzc2luZ1xuICAgKi9cbiAgZnVuY3Rpb24gYWRkUHJvdG9jb2wodXJsLCBzZWN1cmUpIHtcbiAgICBpZiAoIS9eKD86ZnxodCl0cHM/XFw6XFwvXFwvLy50ZXN0KHVybCkpIHtcbiAgICAgIHVybCA9ICgoc2VjdXJlKSA/IFwiaHR0cHM6Ly9cIiA6IFwiaHR0cDovL1wiKSArIHVybDtcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWRkUHJvdG9jb2w6ICAgICAgICAgICAgICBhZGRQcm90b2NvbCxcbiAgICBnZXRRdWVyeVBhcmFtZXRlcjogICAgICAgIGdldFF1ZXJ5UGFyYW1ldGVyLFxuICAgIGdldFF1ZXJ5U3RyaW5nUGFyYW1ldGVyOiAgZ2V0UXVlcnlTdHJpbmdQYXJhbWV0ZXIsXG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgICAgICAgICBnZXRGb250Q3NzU3R5bGUsXG4gICAgYWRkQ1NTUnVsZXM6ICAgICAgICAgICAgICBhZGRDU1NSdWxlcyxcbiAgICBsb2FkRm9udHM6ICAgICAgICAgICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICAgICAgICAgIGxvYWRDdXN0b21Gb250LFxuICAgIGxvYWRHb29nbGVGb250czogICAgICAgICAgbG9hZEdvb2dsZUZvbnRzLFxuICAgIGxvYWRTY3JpcHQ6ICAgICAgICAgICAgICAgbG9hZFNjcmlwdCxcbiAgICBwcmVsb2FkSW1hZ2VzOiAgICAgICAgICAgIHByZWxvYWRJbWFnZXMsXG4gICAgZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlOiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UsXG4gICAgdW5lc2NhcGVIVE1MOiAgICAgICAgICAgICB1bmVzY2FwZUhUTUwsXG4gICAgaGFzSW50ZXJuZXRDb25uZWN0aW9uOiAgICBoYXNJbnRlcm5ldENvbm5lY3Rpb24sXG4gICAgaXNMZWdhY3k6ICAgICAgICAgICAgICAgICBpc0xlZ2FjeSxcbiAgICBnZXREYXRlT2JqZWN0RnJvbVBsYXllclZlcnNpb25TdHJpbmc6IGdldERhdGVPYmplY3RGcm9tUGxheWVyVmVyc2lvblN0cmluZ1xuICB9O1xufSkoKTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlID0gKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIEJBU0VfQ0FDSEVfVVJMID0gXCJodHRwOi8vbG9jYWxob3N0Ojk0OTQvXCI7XG5cbiAgdmFyIF9waW5nUmVjZWl2ZWQgPSBmYWxzZSxcbiAgICBfaXNDYWNoZVJ1bm5pbmcgPSBmYWxzZSxcbiAgICBfaXNWMlJ1bm5pbmcgPSBmYWxzZSxcbiAgICBfaXNIdHRwcyA9IHRydWUsXG4gICAgX3V0aWxzID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLFxuICAgIF9SQ19WRVJTSU9OX1dJVEhfRU5DT0RFID0gXCIxLjcuM1wiLFxuICAgIF9SQ19WRVJTSU9OID0gXCJcIjtcblxuICBmdW5jdGlvbiBwaW5nKGNhbGxiYWNrKSB7XG4gICAgdmFyIHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghX2lzVjJSdW5uaW5nKSB7XG4gICAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwgKyBcInBpbmc/Y2FsbGJhY2s9X1wiLCB0cnVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwsIHRydWUpO1xuICAgIH1cblxuICAgIHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcbiAgICAgICAgICAvLyBzYXZlIHRoaXMgcmVzdWx0IGZvciB1c2UgaW4gZ2V0RmlsZSgpXG4gICAgICAgICAgX3BpbmdSZWNlaXZlZCA9IHRydWU7XG5cbiAgICAgICAgICBpZihyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICBfaXNDYWNoZVJ1bm5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VPYmplY3QgPSAoci5yZXNwb25zZVRleHQpID8gSlNPTi5wYXJzZShyLnJlc3BvbnNlVGV4dCkgOiBcIlwiO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2VPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBfUkNfVkVSU0lPTiA9IHJlc3BvbnNlT2JqZWN0LnZlcnNpb247XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKHRydWUsIHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHIuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIC8vIFJpc2UgQ2FjaGUgVjIgaXMgcnVubmluZ1xuICAgICAgICAgICAgX2lzVjJSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgQkFTRV9DQUNIRV9VUkwgPSBcImh0dHBzOi8vbG9jYWxob3N0Ojk0OTUvXCI7XG5cbiAgICAgICAgICAgIC8vIGNhbGwgcGluZyBhZ2FpbiBzbyBjb3JyZWN0IHBpbmcgVVJMIGlzIHVzZWQgZm9yIFJpc2UgQ2FjaGUgVjJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnBpbmcoY2FsbGJhY2spO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmICggX2lzSHR0cHMgKSB7XG4gICAgICAgICAgICAgIF9pc1YyUnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgIF9pc0h0dHBzID0gZmFsc2U7XG4gICAgICAgICAgICAgIEJBU0VfQ0FDSEVfVVJMID0gXCJodHRwOi8vbG9jYWxob3N0Ojk0OTQvXCI7XG5cbiAgICAgICAgICAgICAgLy8gY2FsbCBwaW5nIGFnYWluIHNvIGNvcnJlY3QgcGluZyBVUkwgaXMgdXNlZCBmb3IgUmlzZSBDYWNoZSBWMiBIVFRQc1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZi5waW5nKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJSaXNlIENhY2hlIGlzIG5vdCBydW5uaW5nXCIpO1xuICAgICAgICAgICAgICBfaXNWMlJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIkNhdWdodCBleGNlcHRpb246IFwiLCBlLmRlc2NyaXB0aW9uKTtcbiAgICAgIH1cblxuICAgIH07XG4gICAgci5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGaWxlKGZpbGVVcmwsIGNhbGxiYWNrLCBub2NhY2hlYnVzdGVyKSB7XG4gICAgaWYgKCFmaWxlVXJsIHx8ICFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB0b3RhbENhY2hlUmVxdWVzdHMgPSAwO1xuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoKSB7XG4gICAgICB2YXIgdXJsLCBzdHIsIHNlcGFyYXRvcjtcblxuICAgICAgaWYgKF9pc0NhY2hlUnVubmluZykge1xuICAgICAgICBpZiAoX2lzVjJSdW5uaW5nKSB7XG4gICAgICAgICAgaWYgKCBfY29tcGFyZVZlcnNpb25OdW1iZXJzKCBfUkNfVkVSU0lPTiwgX1JDX1ZFUlNJT05fV0lUSF9FTkNPREUgKSA+IDAgKSB7XG4gICAgICAgICAgICB1cmwgPSBCQVNFX0NBQ0hFX1VSTCArIFwiZmlsZXM/dXJsPVwiICsgZmlsZVVybDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXJsID0gQkFTRV9DQUNIRV9VUkwgKyBcImZpbGVzP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY29uZmlndXJlIHVybCB3aXRoIGNhY2hlYnVzdGVyIG9yIG5vdFxuICAgICAgICAgIHVybCA9IChub2NhY2hlYnVzdGVyKSA/IEJBU0VfQ0FDSEVfVVJMICsgXCI/dXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVVcmwpIDpcbiAgICAgICAgICBCQVNFX0NBQ0hFX1VSTCArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5vY2FjaGVidXN0ZXIpIHtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9IGZpbGVVcmwuc3BsaXQoXCI/XCIpO1xuICAgICAgICAgIHNlcGFyYXRvciA9IChzdHIubGVuZ3RoID09PSAxKSA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgICAgdXJsID0gZmlsZVVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtYWtlUmVxdWVzdChcIkhFQURcIiwgdXJsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfY29tcGFyZVZlcnNpb25OdW1iZXJzKCB2MSwgdjIgKSB7XG4gICAgICB2YXIgdjFwYXJ0cyA9IHYxLnNwbGl0KCBcIi5cIiApLFxuICAgICAgICB2MnBhcnRzID0gdjIuc3BsaXQoIFwiLlwiICksXG4gICAgICAgIGkgPSAwO1xuXG4gICAgICBmdW5jdGlvbiBpc1Bvc2l0aXZlSW50ZWdlciggeCApIHtcbiAgICAgICAgcmV0dXJuIC9eXFxkKyQvLnRlc3QoIHggKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmlyc3QsIHZhbGlkYXRlIGJvdGggbnVtYmVycyBhcmUgdHJ1ZSB2ZXJzaW9uIG51bWJlcnNcbiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUGFydHMoIHBhcnRzICkge1xuICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgIGlmICggIWlzUG9zaXRpdmVJbnRlZ2VyKCBwYXJ0c1sgaSBdICkgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCAhdmFsaWRhdGVQYXJ0cyggdjFwYXJ0cyApIHx8ICF2YWxpZGF0ZVBhcnRzKCB2MnBhcnRzICkgKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgICB9XG5cbiAgICAgIGZvciAoIGkgPSAwOyBpIDwgdjFwYXJ0cy5sZW5ndGg7ICsraSApIHtcbiAgICAgICAgaWYgKCB2MnBhcnRzLmxlbmd0aCA9PT0gaSApIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggdjFwYXJ0c1sgaSBdID09PSB2MnBhcnRzWyBpIF0gKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCB2MXBhcnRzWyBpIF0gPiB2MnBhcnRzWyBpIF0gKSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuXG4gICAgICBpZiAoIHYxcGFydHMubGVuZ3RoICE9PSB2MnBhcnRzLmxlbmd0aCApIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlUmVxdWVzdChtZXRob2QsIHVybCkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICByZXF1ZXN0ID0ge1xuICAgICAgICAgIHhocjogeGhyLFxuICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH07XG5cbiAgICAgIGlmIChfaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHN0YXR1cyA9IHhoci5zdGF0dXMgfHwgMDtcbiAgICAgICAgICBpZiAoc3RhdHVzID09PSAyMDIpIHtcbiAgICAgICAgICAgICAgdG90YWxDYWNoZVJlcXVlc3RzKys7XG4gICAgICAgICAgICAgIGlmICh0b3RhbENhY2hlUmVxdWVzdHMgPCAzKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBtYWtlUmVxdWVzdChtZXRob2QsIHVybCk7IH0sIDMwMDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCwgbmV3IEVycm9yKFwiRmlsZSBpcyBkb3dubG9hZGluZ1wiKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2VydmVyIG1heSBub3Qgc3VwcG9ydCBIRUFEIHJlcXVlc3QuIEZhbGxiYWNrIHRvIGEgR0VUIHJlcXVlc3QuXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkhFQURcIikge1xuICAgICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCwgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgc3RhdHVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFJpc2UgQ2FjaGUgaXMgbm90IHJ1bm5pbmcgKHByZXZpZXcpLCBza2lwIEhFQUQgcmVxdWVzdCBhbmQgZXhlY3V0ZSBjYWxsYmFjayBpbW1lZGlhdGVseVxuICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmICghX3BpbmdSZWNlaXZlZCkge1xuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgcmV0dXJuIHRoaXMucGluZyhmaWxlUmVxdWVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaWxlUmVxdWVzdCgpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgICBzd2l0Y2ggKHN0YXR1c0NvZGUpIHtcbiAgICAgIGNhc2UgNTAyOlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIHdhcyBhIHByb2JsZW0gcmV0cmlldmluZyB0aGUgZmlsZS5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDUwNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJVbmFibGUgdG8gZG93bmxvYWQgdGhlIGZpbGUuIFRoZSBzZXJ2ZXIgaXMgbm90IHJlc3BvbmRpbmcuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1MDc6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgaXMgbm90IGVub3VnaCBkaXNrIHNwYWNlIHRvIHNhdmUgdGhlIGZpbGUgb24gUmlzZSBDYWNoZS5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDUzNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgZmlsZSBkb2VzIG5vdCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNSaXNlQ2FjaGVSdW5uaW5nKGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghX3BpbmdSZWNlaXZlZCkge1xuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgcmV0dXJuIHRoaXMucGluZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKF9pc0NhY2hlUnVubmluZyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc1YyUnVubmluZyhjYWxsYmFjaykge1xuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIV9waW5nUmVjZWl2ZWQpIHtcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHJldHVybiB0aGlzLnBpbmcoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhfaXNWMlJ1bm5pbmcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2FsbGJhY2soX2lzVjJSdW5uaW5nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc1JDVjJQbGF5ZXIoY2FsbGJhY2spIHtcbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICByZXR1cm4gdGhpcy5pc1YyUnVubmluZyhmdW5jdGlvbiAoaXNWMlJ1bm5pbmcpIHtcbiAgICAgIGlmIChpc1YyUnVubmluZykge1xuICAgICAgICBjYWxsYmFjayhpc1YyUnVubmluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayhpc1YzUGxheWVyVmVyc2lvbldpdGhSQ1YyKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNWM1BsYXllclZlcnNpb25XaXRoUkNWMigpIHtcbiAgICB2YXIgUkNfVjJfRklSU1RfUExBWUVSX1ZFUlNJT05fREFURSA9IF91dGlscy5nZXREYXRlT2JqZWN0RnJvbVBsYXllclZlcnNpb25TdHJpbmcoXCIyMDE2LjEwLjEwLjAwLjAwXCIpO1xuXG4gICAgdmFyIHN5c0luZm9WaWV3ZXJQYXJhbWV0ZXIgPSBfdXRpbHMuZ2V0UXVlcnlQYXJhbWV0ZXIoXCJzeXNJbmZvXCIpO1xuICAgIGlmICghc3lzSW5mb1ZpZXdlclBhcmFtZXRlcikge1xuICAgICAgLy8gd2hlbiB0aGUgd2lkZ2V0IGlzIGxvYWRlZCBpbnRvIGFuIGlmcmFtZSB0aGUgc2VhcmNoIGhhcyBhIHBhcmFtZXRlciBjYWxsZWQgcGFyZW50IHdoaWNoIHJlcHJlc2VudHMgdGhlIHBhcmVudCB1cmxcbiAgICAgIHZhciBwYXJlbnRQYXJhbWV0ZXIgPSBfdXRpbHMuZ2V0UXVlcnlQYXJhbWV0ZXIoXCJwYXJlbnRcIik7XG4gICAgICBzeXNJbmZvVmlld2VyUGFyYW1ldGVyID0gX3V0aWxzLmdldFF1ZXJ5U3RyaW5nUGFyYW1ldGVyKFwic3lzSW5mb1wiLCBwYXJlbnRQYXJhbWV0ZXIpO1xuICAgIH1cbiAgICBpZiAoc3lzSW5mb1ZpZXdlclBhcmFtZXRlcikge1xuICAgICAgdmFyIHBsYXllclZlcnNpb25TdHJpbmcgPSBfdXRpbHMuZ2V0UXVlcnlTdHJpbmdQYXJhbWV0ZXIoXCJwdlwiLCBzeXNJbmZvVmlld2VyUGFyYW1ldGVyKTtcbiAgICAgIHZhciBwbGF5ZXJWZXJzaW9uRGF0ZSA9IF91dGlscy5nZXREYXRlT2JqZWN0RnJvbVBsYXllclZlcnNpb25TdHJpbmcocGxheWVyVmVyc2lvblN0cmluZyk7XG4gICAgICByZXR1cm4gcGxheWVyVmVyc2lvbkRhdGUgPj0gUkNfVjJfRklSU1RfUExBWUVSX1ZFUlNJT05fREFURTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIF9waW5nUmVjZWl2ZWQgPSBmYWxzZTtcbiAgICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG4gICAgIF9pc1YyUnVubmluZyA9IGZhbHNlO1xuICAgICBfaXNIdHRwcyA9IHRydWU7XG4gICAgQkFTRV9DQUNIRV9VUkwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6OTQ5NC9cIjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RXJyb3JNZXNzYWdlOiBnZXRFcnJvck1lc3NhZ2UsXG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBpc1Jpc2VDYWNoZVJ1bm5pbmc6IGlzUmlzZUNhY2hlUnVubmluZyxcbiAgICBpc1YyUnVubmluZzogaXNWMlJ1bm5pbmcsXG4gICAgaXNSQ1YyUGxheWVyOiBpc1JDVjJQbGF5ZXIsXG4gICAgcGluZzogcGluZyxcbiAgICByZXNldDogcmVzZXRcbiAgfTtcblxufSkoKTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uV1NDbGllbnQgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gYnJvYWRjYXN0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgc2FmZVdyaXRlKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuQ29ubmVjdCgpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRvcC5SaXNlVmlzaW9uLlZpZXdlci5Mb2NhbE1lc3NhZ2luZykge1xuICAgICAgICByZXR1cm4gdG9wLlJpc2VWaXNpb24uVmlld2VyLkxvY2FsTWVzc2FnaW5nLmNhbkNvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCBcIndpZGdldC1jb21tb246IHdzLWNsaWVudFwiLCBlcnIgKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNb2R1bGVDbGllbnRMaXN0KCkge1xuICAgIHNhZmVXcml0ZSh7dG9waWM6IFwiY2xpZW50LWxpc3QtcmVxdWVzdFwifSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWNlaXZlTWVzc2FnZXMoaGFuZGxlcikge1xuICAgIGlmICghaGFuZGxlciB8fCB0eXBlb2YgaGFuZGxlciAhPT0gXCJmdW5jdGlvblwiKSB7cmV0dXJuO31cblxuICAgIHRyeSB7XG4gICAgICBpZiAodG9wLlJpc2VWaXNpb24uVmlld2VyLkxvY2FsTWVzc2FnaW5nKSB7XG4gICAgICAgIHRvcC5SaXNlVmlzaW9uLlZpZXdlci5Mb2NhbE1lc3NhZ2luZy5yZWNlaXZlTWVzc2FnZXMoaGFuZGxlcik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyggXCJ3aWRnZXQtY29tbW9uOiB3cy1jbGllbnRcIiwgZXJyICk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2FmZVdyaXRlKG1lc3NhZ2UpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRvcC5SaXNlVmlzaW9uLlZpZXdlci5Mb2NhbE1lc3NhZ2luZykge1xuICAgICAgICB0b3AuUmlzZVZpc2lvbi5WaWV3ZXIuTG9jYWxNZXNzYWdpbmcud3JpdGUobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyggXCJ3aWRnZXQtY29tbW9uOiB3cy1jbGllbnRcIiwgZXJyICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBicm9hZGNhc3RNZXNzYWdlOiBicm9hZGNhc3RNZXNzYWdlLFxuICAgIGNhbkNvbm5lY3Q6IGNhbkNvbm5lY3QsXG4gICAgZ2V0TW9kdWxlQ2xpZW50TGlzdDogZ2V0TW9kdWxlQ2xpZW50TGlzdCxcbiAgICByZWNlaXZlTWVzc2FnZXM6IHJlY2VpdmVNZXNzYWdlc1xuICB9O1xufSkoKTtcbi8qIGV4cG9ydGVkIHZlcnNpb24gKi9cbnZhciB2ZXJzaW9uID0gXCIwLjEuMVwiO1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG52YXIgY29uZmlnID0ge1xuICBTVE9SQUdFX0VOVjogXCJwcm9kXCIsXG4gIENPTVBPTkVOVFNfUEFUSDogXCJjb21wb25lbnRzL1wiXG59O1xuXG5pZiAoIHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiICkge1xuICBhbmd1bGFyLm1vZHVsZSggXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSApXG4gICAgLmNvbnN0YW50KCBcIkxPQ0FMRVNfUFJFRklYXCIsIFwibG9jYWxlcy90cmFuc2xhdGlvbl9cIiApXG4gICAgLmNvbnN0YW50KCBcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiICk7XG59XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBfICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZSA9IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlID0gKCBmdW5jdGlvbiggZ2FkZ2V0cyApIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9tb2RlLFxuICAgIF9kaXNwbGF5SWQsXG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBfbWVzc2FnZSA9IG51bGwsXG4gICAgX3BhcmFtcyA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxuICAgIF9ub25TdG9yYWdlID0gbnVsbCxcbiAgICBfbG9jYWxTdG9yYWdlID0gbnVsbCxcbiAgICBfc2xpZGVyID0gbnVsbCxcbiAgICBfY3VycmVudEZpbGVzID0gW10sXG4gICAgX2Vycm9yTG9nID0gbnVsbCxcbiAgICBfY29uZmlndXJhdGlvblR5cGUgPSBudWxsLFxuICAgIF9lcnJvclRpbWVyID0gbnVsbCxcbiAgICBfZXJyb3JGbGFnID0gZmFsc2UsXG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZSxcbiAgICBfY29uZmlndXJhdGlvbkxvZ2dlZCA9IGZhbHNlLFxuICAgIF91bmF2YWlsYWJsZUZsYWcgPSBmYWxzZSxcbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZSxcbiAgICBfaW1nID0gbnVsbCxcbiAgICBfaXNHaWYgPSBmYWxzZTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbCggXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoIFwiaWRcIiApLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSApO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RvbmUoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbCggXCJcIiwgXCJyc2V2ZW50X2RvbmVcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyggXCJpZFwiICkgKTtcblxuICAgIC8vIEFueSBlcnJvcnMgbmVlZCB0byBiZSBsb2dnZWQgYmVmb3JlIHRoZSBkb25lIGV2ZW50LlxuICAgIGlmICggX2Vycm9yTG9nICE9PSBudWxsICkge1xuICAgICAgbG9nRXZlbnQoIF9lcnJvckxvZywgdHJ1ZSApO1xuICAgIH1cblxuICAgIC8vIGxvZyBcImRvbmVcIiBldmVudFxuICAgIGxvZ0V2ZW50KCB7IFwiZXZlbnRcIjogXCJkb25lXCIsIFwiZmlsZV91cmxcIjogX2dldEN1cnJlbnRGaWxlKCkgfSwgZmFsc2UgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhckVycm9yVGltZXIoKSB7XG4gICAgY2xlYXJUaW1lb3V0KCBfZXJyb3JUaW1lciApO1xuICAgIF9lcnJvclRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydEVycm9yVGltZXIoKSB7XG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgX2Vycm9yVGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIG5vdGlmeSBWaWV3ZXIgd2lkZ2V0IGlzIGRvbmVcbiAgICAgIF9kb25lKCk7XG4gICAgfSwgNTAwMCApO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlKCkge1xuICAgIHZhciBzbGlkZU51bSA9IC0xO1xuXG4gICAgaWYgKCBfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCApIHtcbiAgICAgIGlmICggX21vZGUgPT09IFwiZmlsZVwiICkge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1sgMCBdO1xuICAgICAgfSBlbHNlIGlmICggX21vZGUgPT09IFwiZm9sZGVyXCIgJiYgX3NsaWRlciAmJiBfc2xpZGVyLmlzUmVhZHkoKSApIHtcbiAgICAgICAgLy8gcmV0cmlldmUgdGhlIGN1cnJlbnRseSBwbGF5ZWQgc2xpZGVcbiAgICAgICAgc2xpZGVOdW0gPSBfc2xpZGVyLmdldEN1cnJlbnRTbGlkZSgpO1xuXG4gICAgICAgIGlmICggc2xpZGVOdW0gIT09IC0xICkge1xuICAgICAgICAgIHJldHVybiAoIF9jdXJyZW50RmlsZXNbIHNsaWRlTnVtIF0gKSA/ICggX2N1cnJlbnRGaWxlc1sgc2xpZGVOdW0gXSApLnVybCA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF90ZXN0TG9jYWxTdG9yYWdlKCkge1xuICAgIC8vIGRvbid0IHRlc3QgaWYgZGlzcGxheSBpZCBpcyBpbnZhbGlkIG9yIHByZXZpZXcvbG9jYWxcbiAgICBpZiAoICFfZGlzcGxheUlkIHx8IF9kaXNwbGF5SWQgPT09IFwicHJldmlld1wiIHx8IF9kaXNwbGF5SWQgPT09IFwiZGlzcGxheV9pZFwiIHx8IF9kaXNwbGF5SWQuaW5kZXhPZiggXCJkaXNwbGF5SWRcIiApICE9PSAtMSApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBfbG9jYWxTdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuTG9jYWxTdG9yYWdlRmlsZSgpO1xuICAgIF9sb2NhbFN0b3JhZ2UuaW5pdCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwiY29udGFpbmVyXCIgKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG4gICAgICBpc1N0b3JhZ2VGaWxlO1xuXG4gICAgLy8gY3JlYXRlIGluc3RhbmNlIG9mIG1lc3NhZ2VcbiAgICBfbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLk1lc3NhZ2UoIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcImNvbnRhaW5lclwiICksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJtZXNzYWdlQ29udGFpbmVyXCIgKSApO1xuXG4gICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2VcbiAgICBfbWVzc2FnZS5zaG93KCBcIlBsZWFzZSB3YWl0IHdoaWxlIHlvdXIgaW1hZ2UgaXMgZG93bmxvYWRlZC5cIiApO1xuXG4gICAgLy8gbGVnYWN5XG4gICAgaWYgKCBfcGFyYW1zLmJhY2tncm91bmQgJiYgT2JqZWN0LmtleXMoIF9wYXJhbXMuYmFja2dyb3VuZCApLmxlbmd0aCA+IDAgKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmQgPSBfcGFyYW1zLmJhY2tncm91bmQuY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKCBfbW9kZSA9PT0gXCJmaWxlXCIgKSB7XG4gICAgICAvLyBjcmVhdGUgdGhlIGltYWdlIDxkaXY+IHdpdGhpbiB0aGUgY29udGFpbmVyIDxkaXY+XG4gICAgICBlbCA9IF9nZXRJbWFnZUVsZW1lbnQoKTtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbCApO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xuXG4gICAgICBfaW1nID0gbmV3IEltYWdlKCk7XG5cbiAgICAgIGlzU3RvcmFnZUZpbGUgPSAoIE9iamVjdC5rZXlzKCBfcGFyYW1zLnN0b3JhZ2UgKS5sZW5ndGggIT09IDAgKTtcblxuICAgICAgaWYgKCAhaXNTdG9yYWdlRmlsZSApIHtcbiAgICAgICAgX2NvbmZpZ3VyYXRpb25UeXBlID0gXCJjdXN0b21cIjtcblxuICAgICAgICBfbm9uU3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLk5vblN0b3JhZ2UoIF9wYXJhbXMgKTtcbiAgICAgICAgX25vblN0b3JhZ2UuaW5pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2NvbmZpZ3VyYXRpb25UeXBlID0gXCJzdG9yYWdlIGZpbGVcIjtcblxuICAgICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZmlsZSBpbnN0YW5jZVxuICAgICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLlN0b3JhZ2VGaWxlKCBfcGFyYW1zLCBfZGlzcGxheUlkICk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCBfbW9kZSA9PT0gXCJmb2xkZXJcIiApIHtcbiAgICAgIC8vIGNyZWF0ZSB0aGUgc2xpZGVyIGNvbnRhaW5lciA8ZGl2PiB3aXRoaW4gdGhlIGNvbnRhaW5lciA8ZGl2PlxuICAgICAgZWwuY2xhc3NOYW1lID0gXCJ0cC1iYW5uZXItY29udGFpbmVyXCI7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbCApO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xuXG4gICAgICBfY29uZmlndXJhdGlvblR5cGUgPSBcInN0b3JhZ2UgZm9sZGVyXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmb2xkZXIgaW5zdGFuY2VcbiAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZvbGRlciggX3BhcmFtcywgX2Rpc3BsYXlJZCApO1xuICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgIH1cblxuICAgIF90ZXN0TG9jYWxTdG9yYWdlKCk7XG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0SW1hZ2VFbGVtZW50KCkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuICAgIGVsLnNldEF0dHJpYnV0ZSggXCJpZFwiLCBcImltYWdlXCIgKTtcbiAgICBlbC5jbGFzc05hbWUgPSBfcGFyYW1zLnBvc2l0aW9uO1xuICAgIGVsLmNsYXNzTmFtZSA9IF9wYXJhbXMuc2NhbGVUb0ZpdCA/IGVsLmNsYXNzTmFtZSArIFwiIHNjYWxlLXRvLWZpdFwiIDogZWwuY2xhc3NOYW1lO1xuXG4gICAgcmV0dXJuIGVsO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2luZ2xlSW1hZ2UoIHVybCApIHtcblxuICAgIF9pbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBcIiNjb250YWluZXIgI2ltYWdlXCIgKTtcblxuICAgICAgaW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJub25lXCI7XG4gICAgICBpbWFnZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyB1cmwgKyBcIicpXCI7XG4gICAgICBfaXNHaWYgPSB1cmwuaW5kZXhPZiggXCIuZ2lmXCIgKSA9PT0gLTEgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAgIC8vIElmIHdpZGdldCBpcyBwbGF5aW5nIHJpZ2h0IG5vdyBtYWtlIHN1cmUgdGhlIGRpdiBpbWFnZSBlbGVtZW50IGlzIHZpc2libGVcbiAgICAgIGlmICggIV92aWV3ZXJQYXVzZWQgJiYgX2lzR2lmICkge1xuICAgICAgICBpbWFnZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9pbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgbG9nRXZlbnQoIHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcImltYWdlIGxvYWQgZXJyb3JcIixcbiAgICAgICAgXCJmaWxlX3VybFwiOiB1cmxcbiAgICAgIH0sIHRydWUgKTtcbiAgICB9O1xuXG4gICAgLy8gaGFuZGxlcyBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgICBfaW1nLnNyYyA9IHVybC5yZXBsYWNlKCBcIlxcXFwnXCIsIFwiJ1wiICk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhhc1N0b3JhZ2VFcnJvcigpIHtcbiAgICByZXR1cm4gX3N0b3JhZ2VFcnJvckZsYWc7XG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudCggcGFyYW1zLCBpc0Vycm9yICkge1xuICAgIGlmICggaXNFcnJvciApIHtcbiAgICAgIF9lcnJvckxvZyA9IHBhcmFtcztcbiAgICB9XG5cbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5sb2dFdmVudCggZ2V0VGFibGVOYW1lKCksIHBhcmFtcyApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlSW5pdCggdXJscyApIHtcbiAgICBpZiAoIF9tb2RlID09PSBcImZpbGVcIiApIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZ1xuICAgICAgX2N1cnJlbnRGaWxlc1sgMCBdID0gdXJscztcblxuICAgICAgX3VuYXZhaWxhYmxlRmxhZyA9IGZhbHNlO1xuXG4gICAgICAvLyByZW1vdmUgYSBtZXNzYWdlIHByZXZpb3VzbHkgc2hvd25cbiAgICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgICAgc2V0U2luZ2xlSW1hZ2UoIF9jdXJyZW50RmlsZXNbIDAgXSApO1xuXG4gICAgfSBlbHNlIGlmICggX21vZGUgPT09IFwiZm9sZGVyXCIgKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXlcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuXG4gICAgICAvLyBjcmVhdGUgc2xpZGVyIGluc3RhbmNlXG4gICAgICBfc2xpZGVyID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU2xpZGVyKCBfcGFyYW1zICk7XG4gICAgICBfc2xpZGVyLmluaXQoIHVybHMgKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVSZWZyZXNoKCB1cmxzICkge1xuICAgIGlmICggX21vZGUgPT09IFwiZmlsZVwiICkge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nIG9mIG9uZSB1cmxcbiAgICAgIF9jdXJyZW50RmlsZXNbIDAgXSA9IHVybHM7XG5cbiAgICAgIGlmICggX3VuYXZhaWxhYmxlRmxhZyApIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBtZXNzYWdlIHByZXZpb3VzbHkgc2hvd25cbiAgICAgICAgX21lc3NhZ2UuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICBzZXRTaW5nbGVJbWFnZSggX2N1cnJlbnRGaWxlc1sgMCBdICk7XG5cbiAgICB9IGVsc2UgaWYgKCBfbW9kZSA9PT0gXCJmb2xkZXJcIiApIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhbiBhcnJheSBvZiB1cmxzXG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcblxuICAgICAgX3NsaWRlci5yZWZyZXNoKCBfY3VycmVudEZpbGVzICk7XG4gICAgfVxuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuICAgIF9zdG9yYWdlRXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX3VuYXZhaWxhYmxlRmxhZyA9IGZhbHNlO1xuICAgIF9lcnJvckxvZyA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVVbmF2YWlsYWJsZSggbWVzc2FnZSApIHtcbiAgICBfdW5hdmFpbGFibGVGbGFnID0gdHJ1ZTtcblxuICAgIF9tZXNzYWdlLnNob3coIG1lc3NhZ2UgKTtcblxuICAgIC8vIGlmIFdpZGdldCBpcyBwbGF5aW5nIHJpZ2h0IG5vdywgcnVuIHRoZSB0aW1lclxuICAgIGlmICggIV92aWV3ZXJQYXVzZWQgKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyggYWRkaXRpb25hbFBhcmFtcywgbW9kZVR5cGUsIGRpc3BsYXlJZCApIHtcbiAgICBfcGFyYW1zID0gXy5jbG9uZSggYWRkaXRpb25hbFBhcmFtcyApO1xuICAgIF9tb2RlID0gbW9kZVR5cGU7XG4gICAgX2Rpc3BsYXlJZCA9IGRpc3BsYXlJZDtcblxuICAgIF9wYXJhbXMud2lkdGggPSBfcHJlZnMuZ2V0SW50KCBcInJzV1wiICk7XG4gICAgX3BhcmFtcy5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KCBcInJzSFwiICk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJjb250YWluZXJcIiApLnN0eWxlLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoIFwicnNIXCIgKSArIFwicHhcIjtcbiAgICBpbml0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvblNsaWRlclJlYWR5KCkge1xuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICggIV92aWV3ZXJQYXVzZWQgKSB7XG4gICAgICBfc2xpZGVyLnBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNsaWRlckNvbXBsZXRlKCkge1xuICAgIF9kb25lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBcIiNjb250YWluZXIgI2ltYWdlXCIgKTtcblxuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gICAgLy8gaW4gY2FzZSBlcnJvciB0aW1lciBzdGlsbCBydW5uaW5nIChubyBjb25kaXRpb25hbCBjaGVjayBvbiBlcnJvckZsYWcsIGl0IG1heSBoYXZlIGJlZW4gcmVzZXQgaW4gb25GaWxlUmVmcmVzaClcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBpZiAoIF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkgKSB7XG4gICAgICBfc2xpZGVyLnBhdXNlKCk7XG4gICAgfSBlbHNlIGlmICggX21vZGUgPT09IFwiZmlsZVwiICYmIGltYWdlICYmIF9pc0dpZiApIHtcbiAgICAgIGltYWdlLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgdmFyIGltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXCIjY29udGFpbmVyICNpbWFnZVwiICk7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBpZiAoICFfY29uZmlndXJhdGlvbkxvZ2dlZCApIHtcbiAgICAgIGxvZ0V2ZW50KCB7IFwiZXZlbnRcIjogXCJjb25maWd1cmF0aW9uXCIsIFwiZXZlbnRfZGV0YWlsc1wiOiBfY29uZmlndXJhdGlvblR5cGUgfSwgZmFsc2UgKTtcbiAgICAgIF9jb25maWd1cmF0aW9uTG9nZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBsb2dFdmVudCggeyBcImV2ZW50XCI6IFwicGxheVwiLCBcImZpbGVfdXJsXCI6IF9nZXRDdXJyZW50RmlsZSgpIH0sIGZhbHNlICk7XG5cbiAgICBpZiAoIF9lcnJvckZsYWcgKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCBfdW5hdmFpbGFibGVGbGFnICkge1xuICAgICAgaWYgKCBfbW9kZSA9PT0gXCJmaWxlXCIgJiYgX3N0b3JhZ2UgKSB7XG4gICAgICAgIF9zdG9yYWdlLnJldHJ5KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkgKSB7XG4gICAgICBfc2xpZGVyLnBsYXkoKTtcbiAgICB9IGVsc2UgaWYgKCBfbW9kZSA9PT0gXCJmaWxlXCIgJiYgaW1hZ2UgJiYgX2lzR2lmICkge1xuICAgICAgaW1hZ2Uuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRhYmxlTmFtZSgpIHtcbiAgICByZXR1cm4gXCJpbWFnZV9ldmVudHNcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFcnJvciggbWVzc2FnZSwgaXNTdG9yYWdlRXJyb3IgKSB7XG4gICAgX2Vycm9yRmxhZyA9IHRydWU7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSB0eXBlb2YgaXNTdG9yYWdlRXJyb3IgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICBfbWVzc2FnZS5zaG93KCBtZXNzYWdlICk7XG5cbiAgICAvLyBkZXN0cm95IHNsaWRlciBpZiBpdCBleGlzdHMgYW5kIHByZXZpb3VzbHkgbm90aWZpZWQgcmVhZHlcbiAgICBpZiAoIF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkgKSB7XG4gICAgICBfc2xpZGVyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBpZiAoICFfdmlld2VyUGF1c2VkICkge1xuICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJoYXNTdG9yYWdlRXJyb3JcIjogaGFzU3RvcmFnZUVycm9yLFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJvbkZpbGVJbml0XCI6IG9uRmlsZUluaXQsXG4gICAgXCJvbkZpbGVSZWZyZXNoXCI6IG9uRmlsZVJlZnJlc2gsXG4gICAgXCJvbkZpbGVVbmF2YWlsYWJsZVwiOiBvbkZpbGVVbmF2YWlsYWJsZSxcbiAgICBcIm9uU2xpZGVyQ29tcGxldGVcIjogb25TbGlkZXJDb21wbGV0ZSxcbiAgICBcIm9uU2xpZGVyUmVhZHlcIjogb25TbGlkZXJSZWFkeSxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwiZ2V0VGFibGVOYW1lXCI6IGdldFRhYmxlTmFtZSxcbiAgICBcInNob3dFcnJvclwiOiBzaG93RXJyb3IsXG4gICAgXCJzdG9wXCI6IHN0b3BcbiAgfTtcbn0gKSggZ2FkZ2V0cyApO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UgPSBSaXNlVmlzaW9uLkltYWdlIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlLk1lc3NhZ2UgPSBmdW5jdGlvbiggbWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lciApIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hY3RpdmUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBfaW5pdCgpIHtcbiAgICB0cnkge1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB9IGNhdGNoICggZSApIHtcbiAgICAgIGNvbnNvbGUud2FybiggXCJDYW4ndCBpbml0aWFsaXplIE1lc3NhZ2UgLSBcIiwgZS5tZXNzYWdlICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoIF9hY3RpdmUgKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAoIG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCApIHtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5yZW1vdmVDaGlsZCggbWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkICk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3coIG1lc3NhZ2UgKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICggIV9hY3RpdmUgKSB7XG4gICAgICAvLyBoaWRlIG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBtZXNzYWdlIGVsZW1lbnRcbiAgICAgIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInBcIiApO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgXCJtZXNzYWdlXCIgKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHAgKTtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoIGZyYWdtZW50ICk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIFwiLm1lc3NhZ2VcIiApO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIF8sICQgKi9cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuU2xpZGVyID0gZnVuY3Rpb24oIHBhcmFtcyApIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHRvdGFsU2xpZGVzID0gMCxcbiAgICAkYXBpID0gbnVsbCxcbiAgICBjdXJyZW50RmlsZXMgPSBudWxsLFxuICAgIG5ld0ZpbGVzID0gbnVsbCxcbiAgICBuYXZUaW1lciA9IG51bGwsXG4gICAgc2xpZGVUaW1lciA9IG51bGwsXG4gICAgaXNMYXN0U2xpZGUgPSBmYWxzZSxcbiAgICByZWZyZXNoU2xpZGVyID0gZmFsc2UsXG4gICAgaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBpc1BsYXlpbmcgPSBmYWxzZSxcbiAgICBpc0ludGVyYWN0aW5nID0gZmFsc2UsXG4gICAgbmF2VGltZW91dCA9IDMwMDAsXG4gICAgc2luZ2xlSW1hZ2VQVURUaW1lciA9IG51bGw7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gYWRkU2xpZGVzKCkge1xuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXCIudHAtYmFubmVyIHVsXCIgKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgc2xpZGVzID0gW10sXG4gICAgICBzbGlkZSA9IG51bGwsXG4gICAgICBpbWFnZSA9IG51bGwsXG4gICAgICBwb3NpdGlvbiA9IFwiXCI7XG5cbiAgICB0b3RhbFNsaWRlcyA9IGN1cnJlbnRGaWxlcy5sZW5ndGg7XG5cbiAgICBjdXJyZW50RmlsZXMuZm9yRWFjaCggZnVuY3Rpb24oIGZpbGUgKSB7XG4gICAgICBzbGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xuICAgICAgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImltZ1wiICk7XG5cbiAgICAgIC8vIFRyYW5zaXRpb25cbiAgICAgIHNsaWRlLnNldEF0dHJpYnV0ZSggXCJkYXRhLXRyYW5zaXRpb25cIiwgXCJmYWRlXCIgKTtcbiAgICAgIHNsaWRlLnNldEF0dHJpYnV0ZSggXCJkYXRhLW1hc3RlcnNwZWVkXCIsIDUwMCApO1xuICAgICAgc2xpZGUuc2V0QXR0cmlidXRlKCBcImRhdGEtZGVsYXlcIiwgcGFyYW1zLmR1cmF0aW9uICogMTAwMCApO1xuXG4gICAgICAvLyBMYXp5IGxvYWRcbiAgICAgIGltYWdlLnNyYyA9IFwiXCI7XG4gICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1sYXp5bG9hZFwiLCBmaWxlLnVybCApO1xuXG4gICAgICAvLyBBbGlnbm1lbnRcbiAgICAgIHN3aXRjaCAoIHBhcmFtcy5wb3NpdGlvbiApIHtcbiAgICAgIGNhc2UgXCJ0b3AtbGVmdFwiOlxuICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCB0b3BcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidG9wLWNlbnRlclwiOlxuICAgICAgICBwb3NpdGlvbiA9IFwiY2VudGVyIHRvcFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0b3AtcmlnaHRcIjpcbiAgICAgICAgcG9zaXRpb24gPSBcInJpZ2h0IHRvcFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtaWRkbGUtbGVmdFwiOlxuICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCBjZW50ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWlkZGxlLWNlbnRlclwiOlxuICAgICAgICBwb3NpdGlvbiA9IFwiY2VudGVyIGNlbnRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtaWRkbGUtcmlnaHRcIjpcbiAgICAgICAgcG9zaXRpb24gPSBcInJpZ2h0IGNlbnRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJib3R0b20tbGVmdFwiOlxuICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCBib3R0b21cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYm90dG9tLWNlbnRlclwiOlxuICAgICAgICBwb3NpdGlvbiA9IFwiY2VudGVyIGJvdHRvbVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJib3R0b20tcmlnaHRcIjpcbiAgICAgICAgcG9zaXRpb24gPSBcInJpZ2h0IGJvdHRvbVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHBvc2l0aW9uID0gXCJsZWZ0IHRvcFwiO1xuICAgICAgfVxuXG4gICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1iZ3Bvc2l0aW9uXCIsIHBvc2l0aW9uICk7XG5cbiAgICAgIC8vIFNjYWxlIHRvIEZpdFxuICAgICAgaWYgKCBwYXJhbXMuc2NhbGVUb0ZpdCApIHtcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCBcImRhdGEtYmdmaXRcIiwgXCJjb250YWluXCIgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSggXCJkYXRhLWJnZml0XCIsIFwibm9ybWFsXCIgKTtcbiAgICAgIH1cblxuICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQoIGltYWdlICk7XG4gICAgICBzbGlkZXMucHVzaCggc2xpZGUgKTtcbiAgICB9ICk7XG5cbiAgICBzbGlkZXMuZm9yRWFjaCggZnVuY3Rpb24oIHNsaWRlICkge1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHNsaWRlICk7XG4gICAgfSApO1xuXG4gICAgbGlzdC5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2xpZGVDaGFuZ2VkKCBkYXRhICkge1xuICAgIGlmICggaXNJbnRlcmFjdGluZyApIHtcbiAgICAgIHBhdXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERvbid0IGNhbGwgXCJkb25lXCIgaWYgdXNlciBpcyBpbnRlcmFjdGluZyB3aXRoIHRoZSBzbGlkZXNob3cuXG4gICAgICBpZiAoIGlzTGFzdFNsaWRlICkge1xuICAgICAgICBpc0xhc3RTbGlkZSA9IGZhbHNlO1xuICAgICAgICBwYXVzZSgpO1xuICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uU2xpZGVyQ29tcGxldGUoKTtcblxuICAgICAgICBpZiAoIHJlZnJlc2hTbGlkZXIgKSB7XG4gICAgICAgICAgLy8gRGVzdHJveSBhbmQgcmVjcmVhdGUgdGhlIHNsaWRlciBpZiB0aGUgZmlsZXMgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgIGlmICggJGFwaSApIHtcbiAgICAgICAgICAgIGRlc3Ryb3lTbGlkZXIoKTtcbiAgICAgICAgICAgIGluaXQoIG5ld0ZpbGVzICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVmcmVzaFNsaWRlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCBkYXRhLnNsaWRlSW5kZXggPT09IHRvdGFsU2xpZGVzICkge1xuICAgICAgaXNMYXN0U2xpZGUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3lTbGlkZXIoKSB7XG4gICAgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzLlxuICAgICQoIFwiYm9keVwiICkub2ZmKCBcInRvdWNoZW5kXCIgKTtcbiAgICAkYXBpLm9mZiggXCJyZXZvbHV0aW9uLnNsaWRlLm9ubG9hZGVkXCIgKTtcbiAgICAkYXBpLm9mZiggXCJyZXZvbHV0aW9uLnNsaWRlLm9uY2hhbmdlXCIgKTtcblxuICAgIC8vIExldCB0aGUgc2xpZGVyIGNsZWFuIHVwIGFmdGVyIGl0c2VsZi5cbiAgICAkYXBpLnJldmtpbGwoKTtcbiAgICAkYXBpID0gbnVsbDtcbiAgfVxuXG4gIC8vIFVzZXIgaGFzIGludGVyYWN0ZWQgd2l0aCB0aGUgc2xpZGVzaG93LlxuICBmdW5jdGlvbiBoYW5kbGVVc2VyQWN0aXZpdHkoKSB7XG4gICAgaXNJbnRlcmFjdGluZyA9IHRydWU7XG4gICAgY2xlYXJUaW1lb3V0KCBzbGlkZVRpbWVyICk7XG5cbiAgICAvLyBNb3ZlIHRvIG5leHQgc2xpZGUgYW5kIHJlc3VtZSB0aGUgc2xpZGVzaG93IGFmdGVyIGEgZGVsYXkuXG4gICAgc2xpZGVUaW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgJGFwaS5yZXZuZXh0KCk7XG4gICAgICAkYXBpLnJldnJlc3VtZSgpO1xuXG4gICAgICBpc0ludGVyYWN0aW5nID0gZmFsc2U7XG4gICAgICBpc1BsYXlpbmcgPSB0cnVlO1xuICAgIH0sIHBhcmFtcy5wYXVzZSAqIDEwMDAgKTtcblxuICAgIGhpZGVOYXYoKTtcbiAgfVxuXG4gIC8vIEhpZGUgdGhlIG5hdmlnYXRpb24gYWZ0ZXIgYSBkZWxheS5cbiAgZnVuY3Rpb24gaGlkZU5hdigpIHtcbiAgICBpZiAoIHBhcmFtcy5hdXRvSGlkZSApIHtcbiAgICAgIGNsZWFyVGltZW91dCggbmF2VGltZXIgKTtcblxuICAgICAgbmF2VGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgJCggXCIudHAtbGVmdGFycm93LCAudHAtcmlnaHRhcnJvd1wiICkuYWRkQ2xhc3MoIFwiaGlkZWFycm93c1wiICk7XG4gICAgICB9LCBuYXZUaW1lb3V0ICk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRTaW5nbGVJbWFnZVBVRFRpbWVyKCkge1xuICAgIHZhciBkZWxheSA9ICggKCBwYXJhbXMuZHVyYXRpb24gPT09IHVuZGVmaW5lZCApIHx8ICggcGFyYW1zLmR1cmF0aW9uIDwgMSApICkgPyAxMDAwMCA6IHBhcmFtcy5kdXJhdGlvbiAqIDEwMDA7XG5cbiAgICBzaW5nbGVJbWFnZVBVRFRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLm9uU2xpZGVyQ29tcGxldGUoKTtcbiAgICB9LCBkZWxheSApO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqICBUT0RPOiBUZXN0IHdoYXQgaGFwcGVucyB3aGVuIGZvbGRlciBpc24ndCBmb3VuZC5cbiAgICovXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgaWYgKCAkYXBpICkge1xuICAgICAgaXNMYXN0U2xpZGUgPSBmYWxzZTtcbiAgICAgIHBhdXNlKCk7XG4gICAgICBkZXN0cm95U2xpZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudFNsaWRlKCkge1xuICAgIGlmICggJGFwaSAmJiBjdXJyZW50RmlsZXMgJiYgY3VycmVudEZpbGVzLmxlbmd0aCA+IDAgKSB7XG4gICAgICByZXR1cm4gJGFwaS5yZXZjdXJyZW50c2xpZGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCBmaWxlcyApIHtcbiAgICB2YXIgdHBCYW5uZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBcIi50cC1iYW5uZXItY29udGFpbmVyXCIgKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgdHBCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG4gICAgICB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwidWxcIiApO1xuXG4gICAgdHBCYW5uZXIuc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIFwidHAtYmFubmVyXCIgKTtcbiAgICB0cEJhbm5lci5hcHBlbmRDaGlsZCggdWwgKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCggdHBCYW5uZXIgKTtcbiAgICB0cEJhbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcblxuICAgIGN1cnJlbnRGaWxlcyA9IF8uY2xvbmUoIGZpbGVzICk7XG5cbiAgICBhZGRTbGlkZXMoKTtcblxuICAgIGlzTG9hZGluZyA9IHRydWU7XG4gICAgJGFwaSA9ICQoIFwiLnRwLWJhbm5lclwiICkucmV2b2x1dGlvbigge1xuICAgICAgXCJoaWRlVGh1bWJzXCI6IDAsXG4gICAgICBcImhpZGVUaW1lckJhclwiOiBcIm9uXCIsXG4gICAgICBcIm5hdmlnYXRpb25UeXBlXCI6IFwibm9uZVwiLFxuICAgICAgXCJvbkhvdmVyU3RvcFwiOiBcIm9mZlwiLFxuICAgICAgXCJzdGFydHdpZHRoXCI6IHBhcmFtcy53aWR0aCxcbiAgICAgIFwic3RhcnRoZWlnaHRcIjogcGFyYW1zLmhlaWdodFxuICAgIH0gKTtcblxuICAgICRhcGkub24oIFwicmV2b2x1dGlvbi5zbGlkZS5vbmxvYWRlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFBhdXNlIHNsaWRlc2hvdyBzaW5jZSBpdCB3aWxsIGF1dG9wbGF5IGFuZCB0aGlzIGlzIG5vdCBjb25maWd1cmFibGUuXG4gICAgICBwYXVzZSgpO1xuICAgICAgaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLm9uU2xpZGVyUmVhZHkoKTtcbiAgICB9ICk7XG5cbiAgICAkYXBpLm9uKCBcInJldm9sdXRpb24uc2xpZGUub25jaGFuZ2VcIiwgZnVuY3Rpb24oIGUsIGRhdGEgKSB7XG4gICAgICBvblNsaWRlQ2hhbmdlZCggZGF0YSApO1xuICAgIH0gKTtcblxuICAgIC8vIFN3aXBlIHRoZSBzbGlkZXIuXG4gICAgJCggXCJib2R5XCIgKS5vbiggXCJ0b3VjaGVuZFwiLCBcIi50cC1iYW5uZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVVc2VyQWN0aXZpdHkoKTtcbiAgICAgICQoIFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIiApLnJlbW92ZUNsYXNzKCBcImhpZGVhcnJvd3NcIiApO1xuICAgIH0gKTtcblxuICAgIC8vIFRvdWNoIHRoZSBuYXZpZ2F0aW9uIGFycm93cy5cbiAgICAkKCBcImJvZHlcIiApLm9uKCBcInRvdWNoZW5kXCIsIFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVVc2VyQWN0aXZpdHkoKTtcbiAgICB9ICk7XG5cbiAgICBoaWRlTmF2KCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1JlYWR5KCkge1xuICAgIHJldHVybiAhaXNMb2FkaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoICRhcGkgKSB7XG4gICAgICAvLyBSZXNldCBzbGlkZXNob3cgdG8gZmlyc3Qgc2xpZGUuXG4gICAgICBpZiAoIHBhcmFtcy5oYXNPd25Qcm9wZXJ0eSggXCJyZXN1bWVcIiApICYmICFwYXJhbXMucmVzdW1lICkge1xuICAgICAgICAkYXBpLnJldnNob3dzbGlkZSggMCApO1xuICAgICAgfVxuXG4gICAgICBpZiAoICFpc1BsYXlpbmcgKSB7XG4gICAgICAgICRhcGkucmV2cmVzdW1lKCk7XG4gICAgICAgIGlzUGxheWluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICggY3VycmVudEZpbGVzLmxlbmd0aCA9PT0gMSApIHtcbiAgICAgICAgc3RhcnRTaW5nbGVJbWFnZVBVRFRpbWVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKCAkYXBpICYmIGlzUGxheWluZyApIHtcbiAgICAgICRhcGkucmV2cGF1c2UoKTtcbiAgICAgIGlzUGxheWluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICggc2luZ2xlSW1hZ2VQVURUaW1lciApIHtcbiAgICAgIGNsZWFyVGltZW91dCggc2luZ2xlSW1hZ2VQVURUaW1lciApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZnJlc2goIGZpbGVzICkge1xuICAgIC8vIFN0YXJ0IHByZWxvYWRpbmcgaW1hZ2VzIHJpZ2h0IGF3YXkuXG4gICAgUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLnByZWxvYWRJbWFnZXMoIGZpbGVzICk7XG5cbiAgICBpZiAoIGN1cnJlbnRGaWxlcy5sZW5ndGggPT09IDEgKSB7XG4gICAgICAvLyBEZXN0cm95IGFuZCByZWNyZWF0ZSB0aGUgc2xpZGVyIGltbWVkaWF0ZWx5IGlmIGN1cnJlbnRseSBvbmx5IDEgc2xpZGUgYW5kIHRoZXJlIGhhcyBiZWVuIGEgY2hhbmdlLlxuICAgICAgaWYgKCAkYXBpICkge1xuICAgICAgICBjbGVhclRpbWVvdXQoIHNpbmdsZUltYWdlUFVEVGltZXIgKTtcbiAgICAgICAgZGVzdHJveVNsaWRlcigpO1xuICAgICAgICBpbml0KCBmaWxlcyApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXdGaWxlcyA9IF8uY2xvbmUoIGZpbGVzICk7XG4gICAgICByZWZyZXNoU2xpZGVyID0gdHJ1ZTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRDdXJyZW50U2xpZGVcIjogZ2V0Q3VycmVudFNsaWRlLFxuICAgIFwiZGVzdHJveVwiOiBkZXN0cm95LFxuICAgIFwiaW5pdFwiOiBpbml0LFxuICAgIFwiaXNSZWFkeVwiOiBpc1JlYWR5LFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJyZWZyZXNoXCI6IHJlZnJlc2hcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcgKi9cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZpbGUgPSBmdW5jdGlvbiggcGFyYW1zLCBkaXNwbGF5SWQgKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB1dGlscyA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcyxcbiAgICByaXNlQ2FjaGUgPSBSaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUsXG4gICAgX2luaXRpYWxMb2FkID0gdHJ1ZTtcblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBcInJpc2Utc3RvcmFnZVwiICk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoIFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgdmFyIHVybDtcblxuICAgICAgaWYgKCBlLmRldGFpbCAmJiBlLmRldGFpbC51cmwgKSB7XG5cbiAgICAgICAgdXJsID0gZS5kZXRhaWwudXJsLnJlcGxhY2UoIFwiJ1wiLCBcIlxcXFwnXCIgKTtcblxuICAgICAgICBpZiAoIF9pbml0aWFsTG9hZCApIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25GaWxlSW5pdCggdXJsICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY2hlY2sgZm9yIFwiY2hhbmdlZFwiIHByb3BlcnR5XG4gICAgICAgICAgaWYgKCBlLmRldGFpbC5oYXNPd25Qcm9wZXJ0eSggXCJjaGFuZ2VkXCIgKSApIHtcbiAgICAgICAgICAgIGlmICggZS5kZXRhaWwuY2hhbmdlZCApIHtcbiAgICAgICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVSZWZyZXNoKCB1cmwgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGluIHRoZSBldmVudCBvZiBhIG5ldHdvcmsgZmFpbHVyZSBhbmQgcmVjb3ZlcnksIGNoZWNrIGlmIHRoZSBXaWRnZXQgaXMgaW4gYSBzdGF0ZSBvZiBzdG9yYWdlIGVycm9yXG4gICAgICAgICAgICAgIGlmICggUmlzZVZpc2lvbi5JbWFnZS5oYXNTdG9yYWdlRXJyb3IoKSApIHtcbiAgICAgICAgICAgICAgICAvLyBwcm9jZWVkIHdpdGggcmVmcmVzaCBsb2dpYyBzbyB0aGUgV2lkZ2V0IGNhbiBldmVudHVhbGx5IHBsYXkgdmlkZW8gYWdhaW4gZnJvbSBhIG5ldHdvcmsgcmVjb3ZlcnlcbiAgICAgICAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZVJlZnJlc2goIGUuZGV0YWlsLnVybCApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2Utc3RvcmFnZS1hcGktZXJyb3JcIiwgZnVuY3Rpb24oIGUgKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBhcGkgZXJyb3JcIixcbiAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IFwiUmVzcG9uc2UgY29kZTogXCIgKyBlLmRldGFpbC5jb2RlICsgXCIsIG1lc3NhZ2U6IFwiICsgZS5kZXRhaWwubWVzc2FnZVxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiICk7XG4gICAgfSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2Utc3RvcmFnZS1uby1maWxlXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJzdG9yYWdlIGZpbGUgbm90IGZvdW5kXCIsXG4gICAgICAgICAgXCJmaWxlX3VybFwiOiBlLmRldGFpbFxuICAgICAgICB9LFxuICAgICAgICBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJpbWFnZVwiICk7XG5cbiAgICAgIC8vIGNsZWFyIHRoZSBleGlzdGluZyBpbWFnZVxuICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKCBcIlRoZSBzZWxlY3RlZCBpbWFnZSBkb2VzIG5vdCBleGlzdCBvciBoYXMgYmVlbiBtb3ZlZCB0byBUcmFzaC5cIiApO1xuICAgIH0gKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2UtZmlsZS10aHJvdHRsZWRcIiwgZnVuY3Rpb24oIGUgKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBmaWxlIHRocm90dGxlZFwiLFxuICAgICAgICBcImZpbGVfdXJsXCI6IGUuZGV0YWlsXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKCBcIlRoZSBzZWxlY3RlZCBpbWFnZSBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS5cIiApO1xuICAgIH0gKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWVycm9yXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGVycm9yXCIsXG4gICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoIFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1leHBpcmVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGV4cGlyZWRcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJSaXNlIFN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGlzIG5vdCBhY3RpdmUuXCIgKTtcbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoIFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgdmFyIGZpbGVVcmwgPSAoIGUuZGV0YWlsICYmIGUuZGV0YWlsLnJlcXVlc3QgJiYgZS5kZXRhaWwucmVxdWVzdC51cmwgKSA/IGUuZGV0YWlsLnJlcXVlc3QudXJsIDogbnVsbCxcbiAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInJpc2Ugc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzLFxuICAgICAgICAgIFwiZmlsZV91cmxcIjogZmlsZVVybFxuICAgICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKCBcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUgKTtcbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoIFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbiggZSApIHtcbiAgICAgIHZhciBmaWxlVXJsID0gKCBlLmRldGFpbCAmJiBlLmRldGFpbC5yZXF1ZXN0ICYmIGUuZGV0YWlsLnJlcXVlc3QudXJsICkgPyBlLmRldGFpbC5yZXF1ZXN0LnVybCA6IG51bGwsXG4gICAgICAgIHBhcmFtcyA9IHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgXCJmaWxlX3VybFwiOiBmaWxlVXJsXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXR1c0NvZGUgPSAwLFxuICAgICAgICBlcnJvck1lc3NhZ2U7XG5cbiAgICAgIC8vIGxvZyB0aGUgZXJyb3JcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHBhcmFtcywgdHJ1ZSApO1xuXG4gICAgICBpZiAoIHJpc2VDYWNoZS5pc1YyUnVubmluZygpICkge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSByaXNlQ2FjaGUuZ2V0RXJyb3JNZXNzYWdlKCBzdGF0dXNDb2RlICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgICBpZiAoIGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UgKSB7XG4gICAgICAgICAgc3RhdHVzQ29kZSA9ICtlLmRldGFpbC5lcnJvci5tZXNzYWdlLnN1YnN0cmluZyggZS5kZXRhaWwuZXJyb3IubWVzc2FnZS5pbmRleE9mKCBcIjpcIiApICsgMiApO1xuICAgICAgICB9XG5cbiAgICAgICAgZXJyb3JNZXNzYWdlID0gdXRpbHMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKCBzdGF0dXNDb2RlICk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNob3cgdGhlIGVycm9yXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggZXJyb3JNZXNzYWdlICk7XG4gICAgfSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2UtY2FjaGUtbm90LXJ1bm5pbmdcIiwgZnVuY3Rpb24oIGUgKSB7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJyaXNlIGNhY2hlIG5vdCBydW5uaW5nXCIsXG4gICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlwiXG4gICAgICB9O1xuXG4gICAgICBpZiAoIGUuZGV0YWlsICkge1xuICAgICAgICBpZiAoIGUuZGV0YWlsLmVycm9yICkge1xuICAgICAgICAgIC8vIHN0b3JhZ2UgdjFcbiAgICAgICAgICBwYXJhbXMuZXJyb3JfZGV0YWlscyA9IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIGUuZGV0YWlsLnJlc3AgJiYgZS5kZXRhaWwucmVzcC5lcnJvciApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIHYyXG4gICAgICAgICAgcGFyYW1zLmVycm9yX2RldGFpbHMgPSBlLmRldGFpbC5yZXNwLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG5cbiAgICAgIGlmICggZS5kZXRhaWwgJiYgZS5kZXRhaWwuaXNQbGF5ZXJSdW5uaW5nICkge1xuICAgICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJXYWl0aW5nIGZvciBSaXNlIENhY2hlXCIsIHRydWUgKTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoIFwicmlzZS1jYWNoZS1maWxlLXVuYXZhaWxhYmxlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVVbmF2YWlsYWJsZSggXCJGaWxlIGlzIGRvd25sb2FkaW5nXCIgKTtcbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZSggXCJmb2xkZXJcIiwgcGFyYW1zLnN0b3JhZ2UuZm9sZGVyICk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoIFwiZmlsZU5hbWVcIiwgcGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUgKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZSggXCJjb21wYW55SWRcIiwgcGFyYW1zLnN0b3JhZ2UuY29tcGFueUlkICk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoIFwiZGlzcGxheUlkXCIsIGRpc3BsYXlJZCApO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKCBcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYgKTtcbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZXRyeSgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIFwicmlzZS1zdG9yYWdlXCIgKTtcblxuICAgIGlmICggIXN0b3JhZ2UgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdCxcbiAgICBcInJldHJ5XCI6IHJldHJ5XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgY29uZmlnLCBfICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZvbGRlciA9IGZ1bmN0aW9uKCBkYXRhLCBkaXNwbGF5SWQgKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB1dGlscyA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcyxcbiAgICByaXNlQ2FjaGUgPSBSaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUsXG4gICAgX2lzTG9hZGluZyA9IHRydWUsXG4gICAgX2ZpbGVzID0gW10sXG4gICAgX3RpbWVyID0gbnVsbDtcblxuICBmdW5jdGlvbiBwcm9jZXNzVXJsKCBlICkge1xuICAgIHZhciBmaWxlO1xuXG4gICAgaWYgKCBlLmRldGFpbCApIHtcblxuICAgICAgLy8gSW1hZ2UgaGFzIGJlZW4gYWRkZWQuXG4gICAgICBpZiAoIGUuZGV0YWlsLmFkZGVkICkge1xuICAgICAgICBfZmlsZXMucHVzaCgge1xuICAgICAgICAgIFwibmFtZVwiOiBlLmRldGFpbC5uYW1lLFxuICAgICAgICAgIFwidXJsXCI6IGUuZGV0YWlsLnVybFxuICAgICAgICB9ICk7XG4gICAgICB9XG5cbiAgICAgIC8vIEltYWdlIGhhcyBiZWVuIGNoYW5nZWQuXG4gICAgICBpZiAoIGUuZGV0YWlsLmNoYW5nZWQgKSB7XG4gICAgICAgIGZpbGUgPSBfLmZpbmQoIF9maWxlcywgZnVuY3Rpb24oIGZpbGUgKSB7XG4gICAgICAgICAgcmV0dXJuIGZpbGUubmFtZSA9PT0gZS5kZXRhaWwubmFtZTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgIGZpbGUudXJsID0gZS5kZXRhaWwudXJsO1xuICAgICAgfVxuXG4gICAgICAvLyBJbWFnZSBoYXMgYmVlbiBkZWxldGVkLlxuICAgICAgaWYgKCBlLmRldGFpbC5kZWxldGVkICkge1xuICAgICAgICBfZmlsZXMgPSBfLnJlamVjdCggX2ZpbGVzLCBmdW5jdGlvbiggZmlsZSApIHtcbiAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lID09PSBlLmRldGFpbC5uYW1lO1xuICAgICAgICB9ICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2ZpbGVzID0gXy5zb3J0QnkoIF9maWxlcywgZnVuY3Rpb24oIGZpbGUgKSB7XG4gICAgICByZXR1cm4gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfSApO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoIGUgKSB7XG4gICAgcHJvY2Vzc1VybCggZSApO1xuXG4gICAgLy8gSW1hZ2UgaGFzIGJlZW4gYWRkZWQuXG4gICAgaWYgKCBlLmRldGFpbC5hZGRlZCApIHtcbiAgICAgIGlmICggX2lzTG9hZGluZyApIHtcbiAgICAgICAgLy8gTmVlZCB0byB3YWl0IGZvciBhdCBsZWFzdCAyIGltYWdlcyB0byBsb2FkIGJlZm9yZSBpbml0aWFsaXppbmcgdGhlIHNsaWRlci5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgcmV2b2x1dGlvbi5zbGlkZS5vbmNoYW5nZSBldmVudCB3aWxsIG5ldmVyIGZpcmUsIGFuZCB0aGlzIGV2ZW50IGlzIHVzZWRcbiAgICAgICAgLy8gdG8gY2hlY2sgd2hldGhlciBvciBub3QgdGhlIHNsaWRlciBzaG91bGQgcmVmcmVzaC5cbiAgICAgICAgaWYgKCBfZmlsZXMubGVuZ3RoID4gMSApIHtcbiAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBjbGVhclRpbWVvdXQoIF90aW1lciApO1xuICAgICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25GaWxlSW5pdCggX2ZpbGVzICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2V0IGEgdGltZW91dCBpbiBjYXNlIHRoZXJlIGlzIG9ubHkgb25lIGltYWdlIGluIHRoZSBmb2xkZXIuXG4gICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZUluaXQoIF9maWxlcyApO1xuICAgICAgICAgIH0sIDUwMDAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVbmNoYW5nZWRcbiAgICBpZiAoIGUuZGV0YWlsLmhhc093blByb3BlcnR5KCBcImNoYW5nZWRcIiApICYmICFlLmRldGFpbC5jaGFuZ2VkICkge1xuICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgIGlmICggIVJpc2VWaXNpb24uSW1hZ2UuaGFzU3RvcmFnZUVycm9yKCkgKSB7XG4gICAgICAgIC8vIG9ubHkgcHJvY2VlZCB3aXRoIHJlZnJlc2ggbG9naWMgYmVsb3cgaWYgdGhlcmUncyBiZWVuIGEgc3RvcmFnZSBlcnJvciwgb3RoZXJ3aXNlIGRvIG5vdGhpbmdcbiAgICAgICAgLy8gdGhpcyBpcyBzbyB0aGUgV2lkZ2V0IGNhbiBldmVudHVhbGx5IHBsYXkgc2xpZGVzaG93IGFnYWluIGZyb20gYSBuZXR3b3JrIHJlY292ZXJ5XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZVJlZnJlc2goIF9maWxlcyApO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXCJyaXNlLXN0b3JhZ2VcIiApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBoYW5kbGVSZXNwb25zZSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2Utc3RvcmFnZS1hcGktZXJyb3JcIiwgZnVuY3Rpb24oIGUgKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBhcGkgZXJyb3JcIixcbiAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IFwiUmVzcG9uc2UgY29kZTogXCIgKyBlLmRldGFpbC5jb2RlICsgXCIsIG1lc3NhZ2U6IFwiICsgZS5kZXRhaWwubWVzc2FnZVxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiICk7XG4gICAgfSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2Utc3RvcmFnZS1lbXB0eS1mb2xkZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBmb2xkZXIgZW1wdHlcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IGltYWdlcy5cIiApO1xuICAgIH0gKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2Utbm8tZm9sZGVyXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2UgZm9sZGVyIGRvZXNuJ3QgZXhpc3RcIixcbiAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IGUuZGV0YWlsXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKCBcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIgKTtcbiAgICB9ICk7XG5cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2UtZm9sZGVyLWludmFsaWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBmb2xkZXIgZm9ybWF0KHMpIGludmFsaWRcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHN1cHBvcnRlZCBpbWFnZSBmb3JtYXRzLlwiICk7XG4gICAgfSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2Utc3RvcmFnZS1zdWJzY3JpcHRpb24tZXJyb3JcIiwgZnVuY3Rpb24oIGUgKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXJyb3JcIixcbiAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHBhcmFtcywgdHJ1ZSApO1xuICAgIH0gKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWV4cGlyZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXhwaXJlZFwiXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKCBcIlJpc2UgU3RvcmFnZSBzdWJzY3JpcHRpb24gaXMgbm90IGFjdGl2ZS5cIiApO1xuICAgIH0gKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oIGUgKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKCBcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUgKTtcbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoIFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbiggZSApIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgXCJldmVudFwiOiBcInJpc2UgY2FjaGUgZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwuZXJyb3IubWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICBzdGF0dXNDb2RlID0gMCxcbiAgICAgICAgZXJyb3JNZXNzYWdlO1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcblxuICAgICAgaWYgKCByaXNlQ2FjaGUuaXNWMlJ1bm5pbmcoKSApIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gcmlzZUNhY2hlLmdldEVycm9yTWVzc2FnZSggc3RhdHVzQ29kZSApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgICAgaWYgKCBlLmRldGFpbC5lcnJvci5tZXNzYWdlICkge1xuICAgICAgICAgIHN0YXR1c0NvZGUgPSArZS5kZXRhaWwuZXJyb3IubWVzc2FnZS5zdWJzdHJpbmcoIGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UuaW5kZXhPZiggXCI6XCIgKSArIDIgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVycm9yTWVzc2FnZSA9IHV0aWxzLmdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSggc3RhdHVzQ29kZSApO1xuICAgICAgfVxuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggZXJyb3JNZXNzYWdlICk7XG4gICAgfSApO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKCBcInJpc2UtY2FjaGUtbm90LXJ1bm5pbmdcIiwgZnVuY3Rpb24oIGUgKSB7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJyaXNlIGNhY2hlIG5vdCBydW5uaW5nXCIsXG4gICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlwiXG4gICAgICB9O1xuXG4gICAgICBpZiAoIGUuZGV0YWlsICkge1xuICAgICAgICBpZiAoIGUuZGV0YWlsLmVycm9yICkge1xuICAgICAgICAgIC8vIHN0b3JhZ2UgdjFcbiAgICAgICAgICBwYXJhbXMuZXJyb3JfZGV0YWlscyA9IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIGUuZGV0YWlsLnJlc3AgJiYgZS5kZXRhaWwucmVzcC5lcnJvciApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIHYyXG4gICAgICAgICAgcGFyYW1zLmVycm9yX2RldGFpbHMgPSBlLmRldGFpbC5yZXNwLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCggcGFyYW1zLCB0cnVlICk7XG5cbiAgICAgIGlmICggZS5kZXRhaWwgJiYgZS5kZXRhaWwuaXNQbGF5ZXJSdW5uaW5nICkge1xuICAgICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvciggXCJXYWl0aW5nIGZvciBSaXNlIENhY2hlXCIsIHRydWUgKTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZSggXCJmaWxlVHlwZVwiLCBcImltYWdlXCIgKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZSggXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCApO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKCBcImRpc3BsYXlJZFwiLCBkaXNwbGF5SWQgKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZSggXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlciApO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKCBcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYgKTtcblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuTm9uU3RvcmFnZSA9IGZ1bmN0aW9uKCBkYXRhICkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcmlzZUNhY2hlID0gUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlLFxuICAgIHV0aWxzID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLFxuICAgIC8vIDUgbWludXRlc1xuICAgIF9yZWZyZXNoRHVyYXRpb24gPSAzMDAwMDAsXG4gICAgX3JlZnJlc2hJbnRlcnZhbElkID0gbnVsbCxcbiAgICBfaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBfdXJsID0gXCJcIjtcblxuICBmdW5jdGlvbiBfZ2V0RmlsZSggb21pdENhY2hlQnVzdGVyICkge1xuICAgIHZhciBwYXJhbXM7XG5cbiAgICByaXNlQ2FjaGUuZ2V0RmlsZSggX3VybCwgZnVuY3Rpb24oIHJlc3BvbnNlLCBlcnJvciApIHtcbiAgICAgIHZhciBzdGF0dXNDb2RlID0gMCxcbiAgICAgICAgZXJyb3JNZXNzYWdlO1xuXG4gICAgICBpZiAoICFlcnJvciApIHtcblxuICAgICAgICBpZiAoIF9pc0xvYWRpbmcgKSB7XG4gICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVJbml0KCByZXNwb25zZS51cmwgKTtcblxuICAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIGludGVydmFsXG4gICAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZVJlZnJlc2goIHJlc3BvbnNlLnVybCApO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgaWYgKCBlcnJvci5tZXNzYWdlICYmIGVycm9yLm1lc3NhZ2UgPT09IFwiRmlsZSBpcyBkb3dubG9hZGluZ1wiICkge1xuICAgICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25GaWxlVW5hdmFpbGFibGUoIGVycm9yLm1lc3NhZ2UgKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIC8vIGVycm9yIG9jY3VycmVkXG4gICAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJub24tc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBcImZpbGVfdXJsXCI6IHJlc3BvbnNlLnVybFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCBwYXJhbXMsIHRydWUgKTtcblxuICAgICAgICAgIGlmICggcmlzZUNhY2hlLmlzVjJSdW5uaW5nKCkgKSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSByaXNlQ2FjaGUuZ2V0RXJyb3JNZXNzYWdlKCBzdGF0dXNDb2RlICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNob3cgYSBkaWZmZXJlbnQgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIDQwNCBjb21pbmcgZnJvbSByaXNlIGNhY2hlXG4gICAgICAgICAgICBpZiAoIGVycm9yLm1lc3NhZ2UgKSB7XG4gICAgICAgICAgICAgIHN0YXR1c0NvZGUgPSArZXJyb3IubWVzc2FnZS5zdWJzdHJpbmcoIGVycm9yLm1lc3NhZ2UuaW5kZXhPZiggXCI6XCIgKSArIDIgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gdXRpbHMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKCBzdGF0dXNDb2RlICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoIGVycm9yTWVzc2FnZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgb21pdENhY2hlQnVzdGVyICk7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRSZWZyZXNoSW50ZXJ2YWwoKSB7XG4gICAgaWYgKCBfcmVmcmVzaEludGVydmFsSWQgPT09IG51bGwgKSB7XG4gICAgICBfcmVmcmVzaEludGVydmFsSWQgPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7XG4gICAgICAgIF9nZXRGaWxlKCB0cnVlICk7XG4gICAgICB9LCBfcmVmcmVzaER1cmF0aW9uICk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIC8vIEhhbmRsZSBwcmUtbWVyZ2UgdXNlIG9mIFwidXJsXCIgc2V0dGluZyBwcm9wZXJ0eVxuICAgIF91cmwgPSAoIGRhdGEudXJsICYmIGRhdGEudXJsICE9PSBcIlwiICkgPyBkYXRhLnVybCA6IGRhdGEuc2VsZWN0b3IudXJsO1xuXG4gICAgX3VybCA9IHV0aWxzLmFkZFByb3RvY29sKCBfdXJsICk7XG5cbiAgICBfZ2V0RmlsZSggdHJ1ZSApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlID0gUmlzZVZpc2lvbi5JbWFnZSB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZS5Mb2NhbFN0b3JhZ2VGaWxlID0gZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB3c0NsaWVudCA9IFJpc2VWaXNpb24uQ29tbW9uLldTQ2xpZW50LFxuICAgIHRlc3RHQ1NJbWFnZSA9IFwibG9jYWwtc3RvcmFnZS10ZXN0L3Rlc3QtMXgxLnBuZ1wiLFxuICAgIHdhdGNoTWVzc2FnZUFscmVhZHlTZW50ID0gZmFsc2UsXG4gICAgdGVzdEltYWdlTG9hZEF0dGVtcHRlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9jbGllbnRMaXN0SGFuZGxlciggbWVzc2FnZSApIHtcbiAgICB2YXIgY2xpZW50cyA9IG1lc3NhZ2UuY2xpZW50cztcblxuICAgIGlmICggIXdhdGNoTWVzc2FnZUFscmVhZHlTZW50ICkge1xuICAgICAgaWYgKCBjbGllbnRzLmluY2x1ZGVzKCBcImxvY2FsLXN0b3JhZ2VcIiApICkge1xuICAgICAgICAvLyBsb2cgdGhhdCBMUyBpcyBwcmVzZW50XG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiTFMgaXMgcHJlc2VudFwiLFxuICAgICAgICAgIFwiZmlsZV91cmxcIjogdGVzdEdDU0ltYWdlXG4gICAgICAgIH0gKTtcblxuICAgICAgICAvLyBzZW5kIHRlc3QgV0FUQ0ggZm9yIHRlc3QgaW1hZ2UgZmlsZSBvbiBHQ1MgYnVja2V0IGNvbmZpZ3VyZWQgd2l0aCBQdWIvU3ViXG4gICAgICAgIHdzQ2xpZW50LmJyb2FkY2FzdE1lc3NhZ2UoIHtcbiAgICAgICAgICBcInRvcGljXCI6IFwiV0FUQ0hcIixcbiAgICAgICAgICBcImZpbGVQYXRoXCI6IHRlc3RHQ1NJbWFnZVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgd2F0Y2hNZXNzYWdlQWxyZWFkeVNlbnQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbG9nIHRoYXQgTFMgaXMgbm90IHByZXNlbnQgKHlldClcbiAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudCgge1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJMUyBpcyBub3QgcHJlc2VudFwiLFxuICAgICAgICAgIFwiZmlsZV91cmxcIjogdGVzdEdDU0ltYWdlXG4gICAgICAgIH0gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfZmlsZVVwZGF0ZUhhbmRsZXIoIG1lc3NhZ2UgKSB7XG4gICAgdmFyIGltZ1Rlc3QgPSBudWxsO1xuXG4gICAgaWYgKCAhbWVzc2FnZS5maWxlUGF0aCB8fCBtZXNzYWdlLmZpbGVQYXRoICE9PSB0ZXN0R0NTSW1hZ2UgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbG9nIHN1Y2Nlc3NmdWwgdGVzdCBvZiByZWNlaXZpbmcgRklMRS1VUERBVEUgbWVzc2FnZVxuICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHtcbiAgICAgIFwiZXZlbnRcIjogXCJUZXN0IGltYWdlIEZJTEUtVVBEQVRFXCIsXG4gICAgICBcImV2ZW50X2RldGFpbHNcIjogSlNPTi5zdHJpbmdpZnkoIG1lc3NhZ2UgKSxcbiAgICAgIFwiZmlsZV91cmxcIjogbWVzc2FnZS5maWxlUGF0aFxuICAgIH0gKTtcblxuICAgIC8vIHRlc3QgZG93bmxvYWRpbmcgdGhlIGltYWdlXG4gICAgaWYgKCAhdGVzdEltYWdlTG9hZEF0dGVtcHRlZCAmJiBtZXNzYWdlLnN0YXR1cyAmJiBtZXNzYWdlLnN0YXR1cyA9PT0gXCJDVVJSRU5UXCIgKSB7XG4gICAgICBpbWdUZXN0ID0gbmV3IEltYWdlKCk7XG5cbiAgICAgIGltZ1Rlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiVGVzdCBpbWFnZSBsb2FkZWRcIixcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IG1lc3NhZ2Uub3NwYXRoXG4gICAgICAgIH0gKTtcbiAgICAgIH07XG5cbiAgICAgIGltZ1Rlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCBlcnIgKSB7XG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiVGVzdCBpbWFnZSBsb2FkIGZhaWxlZFwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBKU09OLnN0cmluZ2lmeSggZXJyICksXG4gICAgICAgICAgXCJmaWxlX3VybFwiOiBtZXNzYWdlLm9zcGF0aFxuICAgICAgICB9ICk7XG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJBdHRlbXB0IHRlc3QgaW1hZ2UgbG9hZFwiLFxuICAgICAgICBcImZpbGVfdXJsXCI6IG1lc3NhZ2Uub3NwYXRoXG4gICAgICB9ICk7XG5cbiAgICAgIGltZ1Rlc3Quc3JjID0gXCJmaWxlOi8vXCIgKyBtZXNzYWdlLm9zcGF0aDtcbiAgICAgIHRlc3RJbWFnZUxvYWRBdHRlbXB0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9maWxlRXJyb3JIYW5kbGVyKCBtZXNzYWdlICkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQoIHtcbiAgICAgIFwiZXZlbnRcIjogXCJUZXN0IGltYWdlIEZJTEUtRVJST1JcIixcbiAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBKU09OLnN0cmluZ2lmeSggbWVzc2FnZSApLFxuICAgICAgXCJmaWxlX3VybFwiOiBtZXNzYWdlLmZpbGVQYXRoXG4gICAgfSApO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBpZiAoIHdzQ2xpZW50LmNhbkNvbm5lY3QoKSApIHtcblxuICAgICAgd3NDbGllbnQucmVjZWl2ZU1lc3NhZ2VzKCBmdW5jdGlvbiggbWVzc2FnZSApIHtcbiAgICAgICAgaWYgKCAhbWVzc2FnZSB8fCAhbWVzc2FnZS50b3BpYyApIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KCB7XG4gICAgICAgICAgICBcImV2ZW50XCI6IFwiSW52YWxpZCBMTVMgbWVzc2FnZSByZWNlaXZlZFwiLFxuICAgICAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IEpTT04uc3RyaW5naWZ5KCBtZXNzYWdlICksXG4gICAgICAgICAgICBcImZpbGVfdXJsXCI6IHRlc3RHQ1NJbWFnZVxuICAgICAgICAgIH0gKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoIG1lc3NhZ2UudG9waWMudG9VcHBlckNhc2UoKSApIHtcbiAgICAgICAgY2FzZSBcIkNMSUVOVC1MSVNUXCI6XG4gICAgICAgICAgcmV0dXJuIF9jbGllbnRMaXN0SGFuZGxlciggbWVzc2FnZSApO1xuICAgICAgICBjYXNlIFwiRklMRS1VUERBVEVcIjpcbiAgICAgICAgICByZXR1cm4gX2ZpbGVVcGRhdGVIYW5kbGVyKCBtZXNzYWdlICk7XG4gICAgICAgIGNhc2UgXCJGSUxFLUVSUk9SXCI6XG4gICAgICAgICAgcmV0dXJuIF9maWxlRXJyb3JIYW5kbGVyKCBtZXNzYWdlICk7XG4gICAgICAgIH1cbiAgICAgIH0gKTtcblxuICAgICAgd3NDbGllbnQuZ2V0TW9kdWxlQ2xpZW50TGlzdCgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBSaXNlVmlzaW9uLCBnYWRnZXRzLCBjb25maWcsIHZlcnNpb24gKi9cbiggZnVuY3Rpb24oIHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMgKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKCBcImlkXCIgKTtcblxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBkb2N1bWVudC5ib2R5Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZSggbmFtZXMsIHZhbHVlcyApIHtcbiAgICB2YXIgYWRkaXRpb25hbFBhcmFtcyxcbiAgICAgIG1vZGUsXG4gICAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgICAgZGlzcGxheUlkID0gXCJcIjtcblxuICAgIGlmICggQXJyYXkuaXNBcnJheSggbmFtZXMgKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIEFycmF5LmlzQXJyYXkoIHZhbHVlcyApICYmIHZhbHVlcy5sZW5ndGggPiAwICkge1xuICAgICAgLy8gY29tcGFueSBpZFxuICAgICAgaWYgKCBuYW1lc1sgMCBdID09PSBcImNvbXBhbnlJZFwiICkge1xuICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbIDAgXTtcbiAgICAgIH1cblxuICAgICAgLy8gZGlzcGxheSBpZFxuICAgICAgaWYgKCBuYW1lc1sgMSBdID09PSBcImRpc3BsYXlJZFwiICkge1xuICAgICAgICBpZiAoIHZhbHVlc1sgMSBdICkge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IHZhbHVlc1sgMSBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IFwicHJldmlld1wiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHByb3ZpZGUgTG9nZ2VyVXRpbHMgdGhlIGlkcyB0byB1c2VcbiAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLnNldElkcyggY29tcGFueUlkLCBkaXNwbGF5SWQgKTtcbiAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLnNldFZlcnNpb24oIHZlcnNpb24gKTtcblxuICAgICAgLy8gYWRkaXRpb25hbCBwYXJhbXNcbiAgICAgIGlmICggbmFtZXNbIDIgXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIgKSB7XG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXMgPSBKU09OLnBhcnNlKCB2YWx1ZXNbIDIgXSApO1xuXG4gICAgICAgIGlmICggT2JqZWN0LmtleXMoIGFkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZSApLmxlbmd0aCAhPT0gMCApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCAhYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlLmZpbGVOYW1lICkge1xuICAgICAgICAgICAgLy8gZm9sZGVyIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZm9sZGVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtb2RlID0gXCJmaWxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vbi1zdG9yYWdlIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zZXRBZGRpdGlvbmFsUGFyYW1zKCBhZGRpdGlvbmFsUGFyYW1zLCBtb2RlLCBkaXNwbGF5SWQgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLkltYWdlLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2UucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLkltYWdlLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgaWYgKCBpZCAmJiBpZCAhPT0gXCJcIiApIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKCBcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSApO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoIFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UgKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKCBcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCApO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoIFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgY29uZmlndXJlICk7XG4gICAgICBnYWRnZXRzLnJwYy5jYWxsKCBcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbIFwiY29tcGFueUlkXCIsIFwiZGlzcGxheUlkXCIsIFwiYWRkaXRpb25hbFBhcmFtc1wiIF0gKTtcbiAgICB9XG4gIH1cblxuICAvLyBjaGVjayB3aGljaCB2ZXJzaW9uIG9mIFJpc2UgQ2FjaGUgaXMgcnVubmluZyBhbmQgZHluYW1pY2FsbHkgYWRkIHJpc2Utc3RvcmFnZSBkZXBlbmRlbmNpZXNcbiAgUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlLmlzUkNWMlBsYXllciggZnVuY3Rpb24oIGlzVjIgKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlua1wiICksXG4gICAgICB3ZWJjb21wb25lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApLFxuICAgICAgaHJlZiA9IGNvbmZpZy5DT01QT05FTlRTX1BBVEggKyAoICggaXNWMiApID8gXCJyaXNlLXN0b3JhZ2UtdjJcIiA6IFwicmlzZS1zdG9yYWdlXCIgKSArIFwiL3Jpc2Utc3RvcmFnZS5odG1sXCIsXG4gICAgICBzdG9yYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJyaXNlLXN0b3JhZ2VcIiApLFxuICAgICAgc3RvcmFnZVJlYWR5ID0gZmFsc2UsXG4gICAgICBwb2x5bWVyUmVhZHkgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIG9uUG9seW1lclJlYWR5KCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIG9uUG9seW1lclJlYWR5ICk7XG4gICAgICBwb2x5bWVyUmVhZHkgPSB0cnVlO1xuXG4gICAgICBpZiAoIHN0b3JhZ2VSZWFkeSAmJiBwb2x5bWVyUmVhZHkgKSB7XG4gICAgICAgIGluaXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblN0b3JhZ2VSZWFkeSgpIHtcbiAgICAgIHN0b3JhZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2UtcmVhZHlcIiwgb25TdG9yYWdlUmVhZHkgKTtcbiAgICAgIHN0b3JhZ2VSZWFkeSA9IHRydWU7XG5cbiAgICAgIGlmICggc3RvcmFnZVJlYWR5ICYmIHBvbHltZXJSZWFkeSApIHtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdlYmNvbXBvbmVudHMuc3JjID0gY29uZmlnLkNPTVBPTkVOVFNfUEFUSCArIFwid2ViY29tcG9uZW50c2pzL3dlYmNvbXBvbmVudHMtbGl0ZS5taW4uanNcIjtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgb25Qb2x5bWVyUmVhZHkgKTtcblxuICAgIC8vIGFkZCB0aGUgd2ViY29tcG9uZW50cyBwb2x5ZmlsbCBzb3VyY2UgdG8gdGhlIGRvY3VtZW50IGhlYWRcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJoZWFkXCIgKVsgMCBdLmFwcGVuZENoaWxkKCB3ZWJjb21wb25lbnRzICk7XG5cbiAgICBsaW5rLnNldEF0dHJpYnV0ZSggXCJyZWxcIiwgXCJpbXBvcnRcIiApO1xuICAgIGxpbmsuc2V0QXR0cmlidXRlKCBcImhyZWZcIiwgaHJlZiApO1xuXG4gICAgLy8gYWRkIHRoZSByaXNlLXN0b3JhZ2UgPGxpbms+IGVsZW1lbnQgdG8gZG9jdW1lbnQgaGVhZFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcImhlYWRcIiApWyAwIF0uYXBwZW5kQ2hpbGQoIGxpbmsgKTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKCBcInJlZnJlc2hcIiwgNSApO1xuXG4gICAgaWYgKCBpc1YyICkge1xuICAgICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoIFwidXNhZ2VcIiwgXCJ3aWRnZXRcIiApO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lciggXCJyaXNlLXN0b3JhZ2UtcmVhZHlcIiwgb25TdG9yYWdlUmVhZHkgKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCggc3RvcmFnZSApO1xuXG4gICAgLy8gYWRkIHRoZSA8cmlzZS1zdG9yYWdlPiBlbGVtZW50IHRvIHRoZSBib2R5XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcbiAgfSApO1xuXG59ICkoIHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMgKTtcblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0zJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdfQ==
